/**
 * 
 * Athene2 Editor - v0.2.4 
 *
 * @license LGPL-3.0
 * @license http://opensource.org/licenses/LGPL-3.0 The GNU Lesser General Public License, version 3.0
 * @link https://github.com/serlo-org/athene2 for the canonical source repository
 * @copyright Copyright (c) 2013 Gesellschaft fÃ¼r freie Bildung e.V. (http://www.open-education.eu/)
 */
!function(){if(function(a,b){function c(a){var b=a.length,c=ka.type(a);return ka.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function d(a){var b=za[a]={};return ka.each(a.match(ma)||[],function(a,c){b[c]=!0}),b}function e(a,c,d,e){if(ka.acceptData(a)){var f,g,h=ka.expando,i=a.nodeType,j=i?ka.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||d!==b||"string"!=typeof c)return k||(k=i?a[h]=ba.pop()||ka.guid++:h),j[k]||(j[k]=i?{}:{toJSON:ka.noop}),("object"==typeof c||"function"==typeof c)&&(e?j[k]=ka.extend(j[k],c):j[k].data=ka.extend(j[k].data,c)),g=j[k],e||(g.data||(g.data={}),g=g.data),d!==b&&(g[ka.camelCase(c)]=d),"string"==typeof c?(f=g[c],null==f&&(f=g[ka.camelCase(c)])):f=g,f}}function f(a,b,c){if(ka.acceptData(a)){var d,e,f=a.nodeType,g=f?ka.cache:a,i=f?a[ka.expando]:ka.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){ka.isArray(b)?b=b.concat(ka.map(b,ka.camelCase)):b in d?b=[b]:(b=ka.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!h(d):!ka.isEmptyObject(d))return}(c||(delete g[i].data,h(g[i])))&&(f?ka.cleanData([a],!0):ka.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null)}}}function g(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(Ba,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Aa.test(d)?ka.parseJSON(d):d}catch(f){}ka.data(a,c,d)}else d=b}return d}function h(a){var b;for(b in a)if(("data"!==b||!ka.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return Y.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(ka.isFunction(b))return ka.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ka.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(Qa.test(b))return ka.filter(b,a,c);b=ka.filter(b,a)}return ka.grep(a,function(a){return ka.inArray(a,b)>=0!==c})}function n(a){var b=Ua.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function o(a,b){return ka.nodeName(a,"table")&&ka.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==ka.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=eb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)ka._data(c,"globalEval",!b||ka._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&ka.hasData(a)){var c,d,e,f=ka._data(a),g=ka._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ka.event.add(b,c,h[c][d])}g.data&&(g.data=ka.extend({},g.data))}}function t(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ka.support.noCloneEvent&&b[ka.expando]){e=ka._data(b);for(d in e.events)ka.removeEvent(b,d,e.handle);b.removeAttribute(ka.expando)}"script"===c&&b.text!==a.text?(p(b).text=a.text,q(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ka.support.html5Clone&&a.innerHTML&&!ka.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function u(a,c){var d,e,f=0,g=typeof a.getElementsByTagName!==W?a.getElementsByTagName(c||"*"):typeof a.querySelectorAll!==W?a.querySelectorAll(c||"*"):b;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!c||ka.nodeName(e,c)?g.push(e):ka.merge(g,u(e,c));return c===b||c&&ka.nodeName(a,c)?ka.merge([a],g):g}function v(a){bb.test(a.type)&&(a.defaultChecked=a.checked)}function w(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=yb.length;e--;)if(b=yb[e]+c,b in a)return b;return d}function x(a,b){return a=b||a,"none"===ka.css(a,"display")||!ka.contains(a.ownerDocument,a)}function y(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ka._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&x(d)&&(f[g]=ka._data(d,"olddisplay",C(d.nodeName)))):f[g]||(e=x(d),(c&&"none"!==c||!e)&&ka._data(d,"olddisplay",e?c:ka.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function z(a,b,c){var d=rb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function A(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ka.css(a,c+xb[f],!0,e)),d?("content"===c&&(g-=ka.css(a,"padding"+xb[f],!0,e)),"margin"!==c&&(g-=ka.css(a,"border"+xb[f]+"Width",!0,e))):(g+=ka.css(a,"padding"+xb[f],!0,e),"padding"!==c&&(g+=ka.css(a,"border"+xb[f]+"Width",!0,e)));return g}function B(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=kb(a),g=ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=lb(a,b,f),(0>e||null==e)&&(e=a.style[b]),sb.test(e))return e;d=g&&(ka.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+A(a,b,c||(g?"border":"content"),d,f)+"px"}function C(a){var b=Y,c=ub[a];return c||(c=D(a,b),"none"!==c&&c||(jb=(jb||ka("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(jb[0].contentWindow||jb[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=D(a,b),jb.detach()),ub[a]=c),c}function D(a,b){var c=ka(b.createElement(a)).appendTo(b.body),d=ka.css(c[0],"display");return c.remove(),d}function E(a,b,c,d){var e;if(ka.isArray(b))ka.each(b,function(b,e){c||Ab.test(a)?d(a,e):E(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ka.type(b))d(a,b);else for(e in b)E(a+"["+e+"]",b[e],c,d)}function F(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ma)||[];if(ka.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function G(a,b,c,d){function e(h){var i;return f[h]=!0,ka.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function H(a,c){var d,e,f=ka.ajaxSettings.flatOptions||{};for(e in c)c[e]!==b&&((f[e]?a:d||(d={}))[e]=c[e]);return d&&ka.extend(!0,a,d),a}function I(a,c,d){for(var e,f,g,h,i=a.contents,j=a.dataTypes;"*"===j[0];)j.shift(),f===b&&(f=a.mimeType||c.getResponseHeader("Content-Type"));if(f)for(h in i)if(i[h]&&i[h].test(f)){j.unshift(h);break}if(j[0]in d)g=j[0];else{for(h in d){if(!j[0]||a.converters[h+" "+j[0]]){g=h;break}e||(e=h)}g=g||e}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function J(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function K(){try{return new a.XMLHttpRequest}catch(b){}}function L(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function M(){return setTimeout(function(){$b=b}),$b=ka.now()}function N(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function O(a,b,c){var d,e,f=0,g=dc.length,h=ka.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||M(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ka.extend({},b),opts:ka.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||M(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ka.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(P(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return ka.map(k,N,j),ka.isFunction(j.opts.start)&&j.opts.start.call(a,j),ka.fx.timer(ka.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function P(a,b){var c,d,e,f,g;for(c in a)if(d=ka.camelCase(c),e=b[d],f=a[c],ka.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ka.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Q(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&x(a),n=ka._data(a,"fxshow");c.queue||(h=ka._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,j.always(function(){j.always(function(){h.unqueued--,ka.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],"inline"===ka.css(a,"display")&&"none"===ka.css(a,"float")&&(ka.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",ka.support.shrinkWrapBlocks||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show"))continue;k[d]=n&&n[d]||ka.style(a,d)}if(!ka.isEmptyObject(k)){n?"hidden"in n&&(m=n.hidden):n=ka._data(a,"fxshow",{}),f&&(n.hidden=!m),m?ka(a).show():j.done(function(){ka(a).hide()}),j.done(function(){var b;ka._removeData(a,"fxshow");for(b in k)ka.style(a,b,k[b])});for(d in k)g=N(m?n[d]:0,d,j),d in n||(n[d]=g.start,m&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function R(a,b,c,d,e){return new R.prototype.init(a,b,c,d,e)}function S(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=xb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function T(a){return ka.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var U,V,W=typeof b,X=a.location,Y=a.document,Z=Y.documentElement,$=a.jQuery,_=a.$,aa={},ba=[],ca="1.10.2",da=ba.concat,ea=ba.push,fa=ba.slice,ga=ba.indexOf,ha=aa.toString,ia=aa.hasOwnProperty,ja=ca.trim,ka=function(a,b){return new ka.fn.init(a,b,V)},la=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ma=/\S+/g,na=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,oa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,pa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,qa=/^[\],:{}\s]*$/,ra=/(?:^|:|,)(?:\s*\[)+/g,sa=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ta=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ua=/^-ms-/,va=/-([\da-z])/gi,wa=function(a,b){return b.toUpperCase()},xa=function(a){(Y.addEventListener||"load"===a.type||"complete"===Y.readyState)&&(ya(),ka.ready())},ya=function(){Y.addEventListener?(Y.removeEventListener("DOMContentLoaded",xa,!1),a.removeEventListener("load",xa,!1)):(Y.detachEvent("onreadystatechange",xa),a.detachEvent("onload",xa))};ka.fn=ka.prototype={jquery:ca,constructor:ka,init:function(a,c,d){var e,f;if(!a)return this;if("string"==typeof a){if(e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:oa.exec(a),!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1]){if(c=c instanceof ka?c[0]:c,ka.merge(this,ka.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:Y,!0)),pa.test(e[1])&&ka.isPlainObject(c))for(e in c)ka.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}if(f=Y.getElementById(e[2]),f&&f.parentNode){if(f.id!==e[2])return d.find(a);this.length=1,this[0]=f}return this.context=Y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ka.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),ka.makeArray(a,this))},selector:"",length:0,toArray:function(){return fa.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){var b=ka.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ka.each(this,a,b)},ready:function(a){return ka.ready.promise().done(a),this},slice:function(){return this.pushStack(fa.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},map:function(a){return this.pushStack(ka.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:ea,sort:[].sort,splice:[].splice},ka.fn.init.prototype=ka.fn,ka.extend=ka.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||ka.isFunction(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(f=arguments[i]))for(e in f)a=h[e],d=f[e],h!==d&&(k&&d&&(ka.isPlainObject(d)||(c=ka.isArray(d)))?(c?(c=!1,g=a&&ka.isArray(a)?a:[]):g=a&&ka.isPlainObject(a)?a:{},h[e]=ka.extend(k,g,d)):d!==b&&(h[e]=d));return h},ka.extend({expando:"jQuery"+(ca+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===ka&&(a.$=_),b&&a.jQuery===ka&&(a.jQuery=$),ka},isReady:!1,readyWait:1,holdReady:function(a){a?ka.readyWait++:ka.ready(!0)},ready:function(a){if(a===!0?!--ka.readyWait:!ka.isReady){if(!Y.body)return setTimeout(ka.ready);ka.isReady=!0,a!==!0&&--ka.readyWait>0||(U.resolveWith(Y,[ka]),ka.fn.trigger&&ka(Y).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===ka.type(a)},isArray:Array.isArray||function(a){return"array"===ka.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?aa[ha.call(a)]||"object":typeof a},isPlainObject:function(a){var c;if(!a||"object"!==ka.type(a)||a.nodeType||ka.isWindow(a))return!1;try{if(a.constructor&&!ia.call(a,"constructor")&&!ia.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(ka.support.ownLast)for(c in a)return ia.call(a,c);for(c in a);return c===b||ia.call(a,c)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Y;var d=pa.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ka.buildFragment([a],b,e),e&&ka(e).remove(),ka.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=ka.trim(b),b&&qa.test(b.replace(sa,"@").replace(ta,"]").replace(ra,"")))?new Function("return "+b)():void ka.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||ka.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&ka.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ua,"ms-").replace(va,wa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:ja&&!ja.call("\ufeffÂ ")?function(a){return null==a?"":ja.call(a)}:function(a){return null==a?"":(a+"").replace(na,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ka.merge(d,"string"==typeof a?[a]:a):ea.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(ga)return ga.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&(i[i.length]=e);else for(f in a)e=b(a[f],f,d),null!=e&&(i[i.length]=e);return da.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(f=a[c],c=a,a=f),ka.isFunction(a)?(d=fa.call(arguments,2),e=function(){return a.apply(c||this,d.concat(fa.call(arguments)))},e.guid=a.guid=a.guid||ka.guid++,e):b},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===ka.type(d)){f=!0;for(i in d)ka.access(a,c,i,d[i],!0,g,h)}else if(e!==b&&(f=!0,ka.isFunction(e)||(h=!0),k&&(h?(c.call(a,e),c=null):(k=c,c=function(a,b,c){return k.call(ka(a),c)})),c))for(;j>i;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)));return f?a:k?c.call(a):j?c(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}}),ka.ready.promise=function(b){if(!U)if(U=ka.Deferred(),"complete"===Y.readyState)setTimeout(ka.ready);else if(Y.addEventListener)Y.addEventListener("DOMContentLoaded",xa,!1),a.addEventListener("load",xa,!1);else{Y.attachEvent("onreadystatechange",xa),a.attachEvent("onload",xa);var c=!1;try{c=null==a.frameElement&&Y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ka.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}ya(),ka.ready()}}()}return U.promise(b)},ka.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){aa["[object "+b+"]"]=b.toLowerCase()}),V=ka(Y),function(a,b){function c(a,b,c,d){var e,f,g,h,i,j,k,l,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(I&&!d){if(e=ta.exec(a))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return aa.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&x.getElementsByClassName&&b.getElementsByClassName)return aa.apply(c,b.getElementsByClassName(g)),c}if(x.qsa&&(!J||!J.test(a))){if(l=k=N,o=b,p=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=m(a),(k=b.getAttribute("id"))?l=k.replace(wa,"\\$&"):b.setAttribute("id",l),l="[id='"+l+"'] ",i=j.length;i--;)j[i]=l+n(j[i]);o=na.test(a)&&b.parentNode||b,p=j.join(",")}if(p)try{return aa.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{k||b.removeAttribute("id")}}}return v(a.replace(ja,"$1"),b,c,d)}function d(){function a(c,d){return b.push(c+=" ")>z.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a}function e(a){return a[N]=!0,a}function f(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function g(a,b){for(var c=a.split("|"),d=a.length;d--;)z.attrHandle[c[d]]=b}function h(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||X)-(~a.sourceIndex||X);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function i(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function j(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function k(a){return e(function(b){return b=+b,e(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function l(){}function m(a,b){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return b?0:k.slice(0);for(h=a,i=[],j=z.preFilter;h;){(!d||(e=la.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ma.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ja," ")}),h=h.slice(d.length));for(g in z.filter)!(e=ra[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return b?h.length:h?c.error(a):S(a,i).slice(0)}function n(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function o(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=P+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[N]||(b[N]={}),(i=j[d])&&i[0]===k){if((h=i[1])===!0||h===y)return h===!0}else if(i=j[d]=[k],i[1]=a(b,c,g)||y,i[1]===!0)return!0}}function p(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,d,f,g){return d&&!d[N]&&(d=r(d)),f&&!f[N]&&(f=r(f,g)),e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||u(b||"*",h.nodeType?[h]:h,[]),r=!a||!e&&b?p:q(p,m,a,h,i),s=c?f||(e?a:o||d)?[]:g:r;if(c&&c(r,s,h,i),d)for(j=q(s,n),d(j,[],h,i),k=j.length;k--;)(l=j[k])&&(s[n[k]]=!(r[n[k]]=l));if(e){if(f||a){if(f){for(j=[],k=s.length;k--;)(l=s[k])&&j.push(r[k]=l);f(null,s=[],j,i)}for(k=s.length;k--;)(l=s[k])&&(j=f?ca.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else s=q(s===g?s.splice(o,s.length):s),f?f(null,g,s,i):aa.apply(g,s)})}function s(a){for(var b,c,d,e=a.length,f=z.relative[a[0].type],g=f||z.relative[" "],h=f?1:0,i=o(function(a){return a===b},g,!0),j=o(function(a){return ca.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==D)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];e>h;h++)if(c=z.relative[a[h].type])k=[o(p(k),c)];else{if(c=z.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!z.relative[a[d].type];d++);return r(h>1&&p(k),h>1&&n(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ja,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&n(a))}k.push(c)}return p(k)}function t(a,b){var d=0,f=b.length>0,g=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,r="0",s=e&&[],t=null!=k,u=D,v=e||g&&z.find.TAG("*",k&&h.parentNode||h),w=P+=null==u?1:Math.random()||.1;for(t&&(D=h!==G&&h,y=d);null!=(l=v[r]);r++){if(g&&l){for(m=0;n=a[m++];)if(n(l,h,i)){j.push(l);break}t&&(P=w,y=++d)}f&&((l=!n&&l)&&p--,e&&s.push(l))}if(p+=r,f&&r!==p){for(m=0;n=b[m++];)n(s,o,h,i);if(e){if(p>0)for(;r--;)s[r]||o[r]||(o[r]=$.call(j));o=q(o)}aa.apply(j,o),t&&!e&&o.length>0&&p+b.length>1&&c.uniqueSort(j)}return t&&(P=w,D=u),s};return f?e(h):h}function u(a,b,d){for(var e=0,f=b.length;f>e;e++)c(a,b[e],d);return d}function v(a,b,c,d){var e,f,g,h,i,j=m(a);if(!d&&1===j.length){if(f=j[0]=j[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&x.getById&&9===b.nodeType&&I&&z.relative[f[1].type]){if(b=(z.find.ID(g.matches[0].replace(xa,ya),b)||[])[0],!b)return c;a=a.slice(f.shift().value.length)}for(e=ra.needsContext.test(a)?0:f.length;e--&&(g=f[e],!z.relative[h=g.type]);)if((i=z.find[h])&&(d=i(g.matches[0].replace(xa,ya),na.test(f[0].type)&&b.parentNode||b))){if(f.splice(e,1),a=d.length&&n(f),!a)return aa.apply(c,d),c;break}}return C(a,j)(d,b,!I,c,na.test(a)),c}var w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+-new Date,O=a.document,P=0,Q=0,R=d(),S=d(),T=d(),U=!1,V=function(a,b){return a===b?(U=!0,0):0},W=typeof b,X=1<<31,Y={}.hasOwnProperty,Z=[],$=Z.pop,_=Z.push,aa=Z.push,ba=Z.slice,ca=Z.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},da="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ea="[\\x20\\t\\r\\n\\f]",fa="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ga=fa.replace("w","w#"),ha="\\["+ea+"*("+fa+")"+ea+"*(?:([*^$|!~]?=)"+ea+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ga+")|)|)"+ea+"*\\]",ia=":("+fa+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ha.replace(3,8)+")*)|.*)\\)|)",ja=new RegExp("^"+ea+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ea+"+$","g"),la=new RegExp("^"+ea+"*,"+ea+"*"),ma=new RegExp("^"+ea+"*([>+~]|"+ea+")"+ea+"*"),na=new RegExp(ea+"*[+~]"),oa=new RegExp("="+ea+"*([^\\]'\"]*)"+ea+"*\\]","g"),pa=new RegExp(ia),qa=new RegExp("^"+ga+"$"),ra={ID:new RegExp("^#("+fa+")"),CLASS:new RegExp("^\\.("+fa+")"),TAG:new RegExp("^("+fa.replace("w","w*")+")"),ATTR:new RegExp("^"+ha),PSEUDO:new RegExp("^"+ia),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ea+"*(even|odd|(([+-]|)(\\d*)n|)"+ea+"*(?:([+-]|)"+ea+"*(\\d+)|))"+ea+"*\\)|)","i"),bool:new RegExp("^(?:"+da+")$","i"),needsContext:new RegExp("^"+ea+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ea+"*((?:-\\d)?\\d*)"+ea+"*\\)|)(?=[^-]|$)","i")},sa=/^[^{]+\{\s*\[native \w/,ta=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ua=/^(?:input|select|textarea|button)$/i,va=/^h\d$/i,wa=/'|\\/g,xa=new RegExp("\\\\([\\da-f]{1,6}"+ea+"?|("+ea+")|.)","ig"),ya=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{aa.apply(Z=ba.call(O.childNodes),O.childNodes),Z[O.childNodes.length].nodeType}catch(za){aa={apply:Z.length?function(a,b){_.apply(a,ba.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}B=c.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},x=c.support={},F=c.setDocument=function(a){var b=a?a.ownerDocument||a:O,c=b.defaultView;return b!==G&&9===b.nodeType&&b.documentElement?(G=b,H=b.documentElement,I=!B(b),c&&c.attachEvent&&c!==c.top&&c.attachEvent("onbeforeunload",function(){F()}),x.attributes=f(function(a){return a.className="i",!a.getAttribute("className")}),x.getElementsByTagName=f(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),x.getElementsByClassName=f(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),x.getById=f(function(a){return H.appendChild(a).id=N,!b.getElementsByName||!b.getElementsByName(N).length}),x.getById?(z.find.ID=function(a,b){if(typeof b.getElementById!==W&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){return a.getAttribute("id")===b}}):(delete z.find.ID,z.filter.ID=function(a){var b=a.replace(xa,ya);return function(a){var c=typeof a.getAttributeNode!==W&&a.getAttributeNode("id");return c&&c.value===b}}),z.find.TAG=x.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==W?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},z.find.CLASS=x.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==W&&I?b.getElementsByClassName(a):void 0},K=[],J=[],(x.qsa=sa.test(b.querySelectorAll))&&(f(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||J.push("\\["+ea+"*(?:value|"+da+")"),a.querySelectorAll(":checked").length||J.push(":checked")}),f(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&J.push("[*^$]="+ea+"*(?:''|\"\")"),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(x.matchesSelector=sa.test(L=H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&f(function(a){x.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ia)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),M=sa.test(H.contains)||H.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},V=H.compareDocumentPosition?function(a,c){if(a===c)return U=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!x.sortDetached&&c.compareDocumentPosition(a)===d?a===b||M(O,a)?-1:c===b||M(O,c)?1:E?ca.call(E,a)-ca.call(E,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0,f=a.parentNode,g=c.parentNode,i=[a],j=[c];if(a===c)return U=!0,0;if(!f||!g)return a===b?-1:c===b?1:f?-1:g?1:E?ca.call(E,a)-ca.call(E,c):0;if(f===g)return h(a,c);for(d=a;d=d.parentNode;)i.unshift(d);for(d=c;d=d.parentNode;)j.unshift(d);for(;i[e]===j[e];)e++;return e?h(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},b):G},c.matches=function(a,b){return c(a,null,null,b)},c.matchesSelector=function(a,b){if((a.ownerDocument||a)!==G&&F(a),b=b.replace(oa,"='$1']"),!(!x.matchesSelector||!I||K&&K.test(b)||J&&J.test(b)))try{var d=L.call(a,b);if(d||x.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return c(b,G,null,[a]).length>0},c.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},c.attr=function(a,c){(a.ownerDocument||a)!==G&&F(a);var d=z.attrHandle[c.toLowerCase()],e=d&&Y.call(z.attrHandle,c.toLowerCase())?d(a,c,!I):b;return e===b?x.attributes||!I?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e},c.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},c.uniqueSort=function(a){var b,c=[],d=0,e=0;if(U=!x.detectDuplicates,E=!x.sortStable&&a.slice(0),a.sort(V),U){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},A=c.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=A(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=A(b);return c},z=c.selectors={cacheLength:50,createPseudo:e,match:ra,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(xa,ya),a[3]=(a[4]||a[5]||"").replace(xa,ya),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||c.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&c.error(a[0]),a},PSEUDO:function(a){var c,d=!a[5]&&a[2];return ra.CHILD.test(a[0])?null:(a[3]&&a[4]!==b?a[2]=a[4]:d&&pa.test(d)&&(c=m(d,!0))&&(c=d.indexOf(")",d.length-c)-d.length)&&(a[0]=a[0].slice(0,c),a[2]=d.slice(0,c)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(xa,ya).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ea+")"+a+"("+ea+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==W&&a.getAttribute("class")||"")})},ATTR:function(a,b,d){return function(e){var f=c.attr(e,a);return null==f?"!="===b:b?(f+="","="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&f.indexOf(d)>-1:"$="===b?d&&f.slice(-d.length)===d:"~="===b?(" "+f+" ").indexOf(d)>-1:"|="===b?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;
return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var d,f=z.pseudos[a]||z.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return f[N]?f(b):f.length>1?(d=[a,a,"",b],z.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){for(var d,e=f(a,b),g=e.length;g--;)d=ca.call(a,e[g]),a[d]=!(c[d]=e[g])}):function(a){return f(a,0,d)}):f}},pseudos:{not:e(function(a){var b=[],c=[],d=C(a.replace(ja,"$1"));return d[N]?e(function(a,b,c,e){for(var f,g=d(a,null,e,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:e(function(a){return function(b){return c(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||A(b)).indexOf(a)>-1}}),lang:e(function(a){return qa.test(a||"")||c.error("unsupported lang: "+a),a=a.replace(xa,ya).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!z.pseudos.empty(a)},header:function(a){return va.test(a.nodeName)},input:function(a){return ua.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:k(function(){return[0]}),last:k(function(a,b){return[b-1]}),eq:k(function(a,b,c){return[0>c?c+b:c]}),even:k(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:k(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:k(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:k(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},z.pseudos.nth=z.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})z.pseudos[w]=i(w);for(w in{submit:!0,reset:!0})z.pseudos[w]=j(w);l.prototype=z.filters=z.pseudos,z.setFilters=new l,C=c.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=m(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d))}return f},x.sortStable=N.split("").sort(V).join("")===N,x.detectDuplicates=U,F(),x.sortDetached=f(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),f(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||g("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),x.attributes&&f(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||g("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),f(function(a){return null==a.getAttribute("disabled")})||g(da,function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&d.specified?d.value:a[b]===!0?b.toLowerCase():null}),ka.find=c,ka.expr=c.selectors,ka.expr[":"]=ka.expr.pseudos,ka.unique=c.uniqueSort,ka.text=c.getText,ka.isXMLDoc=c.isXML,ka.contains=c.contains}(a);var za={};ka.Callbacks=function(a){a="string"==typeof a?za[a]||d(a):ka.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,c=!0;j&&g>h;h++)if(j[h].apply(b[0],b[1])===!1&&a.stopOnFalse){e=!1;break}c=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){ka.each(b,function(b,c){var e=ka.type(c);"function"===e?a.unique&&m.has(c)||j.push(c):c&&c.length&&"string"!==e&&d(c)})}(arguments),c?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&ka.each(arguments,function(a,b){for(var d;(d=ka.inArray(b,j,d))>-1;)j.splice(d,1),c&&(g>=d&&g--,h>=d&&h--)}),this},has:function(a){return a?ka.inArray(a,j)>-1:!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=b,this},disabled:function(){return!j},lock:function(){return k=b,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],c?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},ka.extend({Deferred:function(a){var b=[["resolve","done",ka.Callbacks("once memory"),"resolved"],["reject","fail",ka.Callbacks("once memory"),"rejected"],["notify","progress",ka.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ka.Deferred(function(c){ka.each(b,function(b,f){var g=f[0],h=ka.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&ka.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ka.extend(a,d):d}},e={};return d.pipe=d.then,ka.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=fa.call(arguments),g=f.length,h=1!==g||a&&ka.isFunction(a.promise)?g:0,i=1===h?a:ka.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?fa.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ka.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}}),ka.support=function(b){var c,d,e,f,g,h,i,j,k,l=Y.createElement("div");if(l.setAttribute("className","t"),l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=l.getElementsByTagName("*")||[],d=l.getElementsByTagName("a")[0],!d||!d.style||!c.length)return b;f=Y.createElement("select"),h=f.appendChild(Y.createElement("option")),e=l.getElementsByTagName("input")[0],d.style.cssText="top:1px;float:left;opacity:.5",b.getSetAttribute="t"!==l.className,b.leadingWhitespace=3===l.firstChild.nodeType,b.tbody=!l.getElementsByTagName("tbody").length,b.htmlSerialize=!!l.getElementsByTagName("link").length,b.style=/top/.test(d.getAttribute("style")),b.hrefNormalized="/a"===d.getAttribute("href"),b.opacity=/^0.5/.test(d.style.opacity),b.cssFloat=!!d.style.cssFloat,b.checkOn=!!e.value,b.optSelected=h.selected,b.enctype=!!Y.createElement("form").enctype,b.html5Clone="<:nav></:nav>"!==Y.createElement("nav").cloneNode(!0).outerHTML,b.inlineBlockNeedsLayout=!1,b.shrinkWrapBlocks=!1,b.pixelPosition=!1,b.deleteExpando=!0,b.noCloneEvent=!0,b.reliableMarginRight=!0,b.boxSizingReliable=!0,e.checked=!0,b.noCloneChecked=e.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!h.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}e=Y.createElement("input"),e.setAttribute("value",""),b.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),b.radioValue="t"===e.value,e.setAttribute("checked","t"),e.setAttribute("name","t"),g=Y.createDocumentFragment(),g.appendChild(e),b.appendChecked=e.checked,b.checkClone=g.cloneNode(!0).cloneNode(!0).lastChild.checked,l.attachEvent&&(l.attachEvent("onclick",function(){b.noCloneEvent=!1}),l.cloneNode(!0).click());for(k in{submit:!0,change:!0,focusin:!0})l.setAttribute(i="on"+k,"t"),b[k+"Bubbles"]=i in a||l.attributes[i].expando===!1;l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",b.clearCloneStyle="content-box"===l.style.backgroundClip;for(k in ka(b))break;return b.ownLast="0"!==k,ka(function(){var c,d,e,f="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",g=Y.getElementsByTagName("body")[0];g&&(c=Y.createElement("div"),c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",g.appendChild(c).appendChild(l),l.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=l.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",j=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=j&&0===e[0].offsetHeight,l.innerHTML="",l.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",ka.swap(g,null!=g.style.zoom?{zoom:1}:{},function(){b.boxSizing=4===l.offsetWidth}),a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(l,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(l,null)||{width:"4px"}).width,d=l.appendChild(Y.createElement("div")),d.style.cssText=l.style.cssText=f,d.style.marginRight=d.style.width="0",l.style.width="1px",b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)),typeof l.style.zoom!==W&&(l.innerHTML="",l.style.cssText=f+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===l.offsetWidth,l.style.display="block",l.innerHTML="<div></div>",l.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==l.offsetWidth,b.inlineBlockNeedsLayout&&(g.style.zoom=1)),g.removeChild(c),c=l=e=d=null)}),c=f=g=h=d=e=null,b}({});var Aa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ba=/([A-Z])/g;ka.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ka.cache[a[ka.expando]]:a[ka.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&ka.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),ka.fn.extend({data:function(a,c){var d,e,f=null,h=0,i=this[0];if(a===b){if(this.length&&(f=ka.data(i),1===i.nodeType&&!ka._data(i,"parsedAttrs"))){for(d=i.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=ka.camelCase(e.slice(5)),g(i,e,f[e]));ka._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){ka.data(this,a)}):arguments.length>1?this.each(function(){ka.data(this,a,c)}):i?g(i,a,ka.data(i,a)):null},removeData:function(a){return this.each(function(){ka.removeData(this,a)})}}),ka.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ka._data(a,b),c&&(!d||ka.isArray(c)?d=ka._data(a,b,ka.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ka.queue(a,b),d=c.length,e=c.shift(),f=ka._queueHooks(a,b),g=function(){ka.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ka._data(a,c)||ka._data(a,c,{empty:ka.Callbacks("once memory").add(function(){ka._removeData(a,b+"queue"),ka._removeData(a,c)})})}}),ka.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?ka.queue(this[0],a):c===b?this:this.each(function(){var b=ka.queue(this,a,c);ka._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&ka.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ka.dequeue(this,a)})},delay:function(a,b){return a=ka.fx?ka.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=ka.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)d=ka._data(g[h],a+"queueHooks"),d&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var Ca,Da,Ea=/[\t\r\n\f]/g,Fa=/\r/g,Ga=/^(?:input|select|textarea|button|object)$/i,Ha=/^(?:a|area)$/i,Ia=/^(?:checked|selected)$/i,Ja=ka.support.getSetAttribute,Ka=ka.support.input;ka.fn.extend({attr:function(a,b){return ka.access(this,ka.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ka.removeAttr(this,a)})},prop:function(a,b){return ka.access(this,ka.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ka.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i="string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).addClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=ka.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=0===arguments.length||"string"==typeof a&&a;if(ka.isFunction(a))return this.each(function(b){ka(this).removeClass(a.call(this,b,this.className))});if(i)for(b=(a||"").match(ma)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Ea," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");c.className=a?ka.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(ka.isFunction(a)?function(c){ka(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=ka(this),f=a.match(ma)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===W||"boolean"===c)&&(this.className&&ka._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ka._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Ea," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=ka.isFunction(a),this.each(function(c){var f;1===this.nodeType&&(f=e?a.call(this,c,ka(this).val()):a,null==f?f="":"number"==typeof f?f+="":ka.isArray(f)&&(f=ka.map(f,function(a){return null==a?"":a+""})),d=ka.valHooks[this.type]||ka.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,f,"value")!==b||(this.value=f))});if(f)return d=ka.valHooks[f.type]||ka.valHooks[f.nodeName.toLowerCase()],d&&"get"in d&&(c=d.get(f,"value"))!==b?c:(c=f.value,"string"==typeof c?c.replace(Fa,""):null==c?"":c)}}}),ka.extend({valHooks:{option:{get:function(a){var b=ka.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ka.support.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ka.nodeName(c.parentNode,"optgroup"))){if(b=ka(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ka.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=ka.inArray(ka(d).val(),f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return typeof a.getAttribute===W?ka.prop(a,c,d):(1===g&&ka.isXMLDoc(a)||(c=c.toLowerCase(),e=ka.attrHooks[c]||(ka.expr.match.bool.test(c)?Da:Ca)),d===b?e&&"get"in e&&null!==(f=e.get(a,c))?f:(f=ka.find.attr(a,c),null==f?b:f):null!==d?e&&"set"in e&&(f=e.set(a,d,c))!==b?f:(a.setAttribute(c,d+""),d):void ka.removeAttr(a,c))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ma);if(f&&1===a.nodeType)for(;c=f[e++];)d=ka.propFix[c]||c,ka.expr.match.bool.test(c)?Ka&&Ja||!Ia.test(c)?a[d]=!1:a[ka.camelCase("default-"+c)]=a[d]=!1:ka.attr(a,c,""),a.removeAttribute(Ja?c:d)},attrHooks:{type:{set:function(a,b){if(!ka.support.radioValue&&"radio"===b&&ka.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!ka.isXMLDoc(a),g&&(c=ka.propFix[c]||c,f=ka.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var b=ka.find.attr(a,"tabindex");return b?parseInt(b,10):Ga.test(a.nodeName)||Ha.test(a.nodeName)&&a.href?0:-1}}}}),Da={set:function(a,b,c){return b===!1?ka.removeAttr(a,c):Ka&&Ja||!Ia.test(c)?a.setAttribute(!Ja&&ka.propFix[c]||c,c):a[ka.camelCase("default-"+c)]=a[c]=!0,c}},ka.each(ka.expr.match.bool.source.match(/\w+/g),function(a,c){var d=ka.expr.attrHandle[c]||ka.find.attr;ka.expr.attrHandle[c]=Ka&&Ja||!Ia.test(c)?function(a,c,e){var f=ka.expr.attrHandle[c],g=e?b:(ka.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;return ka.expr.attrHandle[c]=f,g}:function(a,c,d){return d?b:a[ka.camelCase("default-"+c)]?c.toLowerCase():null}}),Ka&&Ja||(ka.attrHooks.value={set:function(a,b,c){return ka.nodeName(a,"input")?void(a.defaultValue=b):Ca&&Ca.set(a,b,c)}}),Ja||(Ca={set:function(a,c,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=c+="","value"===d||c===a.getAttribute(d)?c:b}},ka.expr.attrHandle.id=ka.expr.attrHandle.name=ka.expr.attrHandle.coords=function(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&""!==e.value?e.value:null},ka.valHooks.button={get:function(a,c){var d=a.getAttributeNode(c);return d&&d.specified?d.value:b},set:Ca.set},ka.attrHooks.contenteditable={set:function(a,b,c){Ca.set(a,""===b?!1:b,c)}},ka.each(["width","height"],function(a,b){ka.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),ka.support.hrefNormalized||ka.each(["href","src"],function(a,b){ka.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ka.support.style||(ka.attrHooks.style={get:function(a){return a.style.cssText||b},set:function(a,b){return a.style.cssText=b+""}}),ka.support.optSelected||(ka.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ka.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ka.propFix[this.toLowerCase()]=this}),ka.support.enctype||(ka.propFix.enctype="encoding"),ka.each(["radio","checkbox"],function(){ka.valHooks[this]={set:function(a,b){return ka.isArray(b)?a.checked=ka.inArray(ka(a).val(),b)>=0:void 0}},ka.support.checkOn||(ka.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var La=/^(?:input|select|textarea)$/i,Ma=/^key/,Na=/^(?:mouse|contextmenu)|click/,Oa=/^(?:focusinfocus|focusoutblur)$/,Pa=/^([^.]*)(?:\.(.+)|)$/;ka.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=ka._data(a);if(r){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=ka.guid++),(h=r.events)||(h=r.events={}),(l=r.handle)||(l=r.handle=function(a){return typeof ka===W||a&&ka.event.triggered===a.type?b:ka.event.dispatch.apply(l.elem,arguments)},l.elem=a),c=(c||"").match(ma)||[""],i=c.length;i--;)g=Pa.exec(c[i])||[],o=q=g[1],p=(g[2]||"").split(".").sort(),o&&(k=ka.event.special[o]||{},o=(f?k.delegateType:k.bindType)||o,k=ka.event.special[o]||{},m=ka.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&ka.expr.match.needsContext.test(f),namespace:p.join(".")},j),(n=h[o])||(n=h[o]=[],n.delegateCount=0,k.setup&&k.setup.call(a,e,p,l)!==!1||(a.addEventListener?a.addEventListener(o,l,!1):a.attachEvent&&a.attachEvent("on"+o,l))),k.add&&(k.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),f?n.splice(n.delegateCount++,0,m):n.push(m),ka.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ka.hasData(a)&&ka._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ma)||[""],j=b.length;j--;)if(h=Pa.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ka.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ka.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ka.event.remove(a,n+b[j],c,d,!0);ka.isEmptyObject(k)&&(delete q.handle,ka._removeData(a,"events"))}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||Y],o=ia.call(c,"type")?c.type:c,p=ia.call(c,"namespace")?c.namespace.split("."):[];if(i=l=e=e||Y,3!==e.nodeType&&8!==e.nodeType&&!Oa.test(o+ka.event.triggered)&&(o.indexOf(".")>=0&&(p=o.split("."),o=p.shift(),p.sort()),h=o.indexOf(":")<0&&"on"+o,c=c[ka.expando]?c:new ka.Event(o,"object"==typeof c&&c),c.isTrigger=f?2:3,c.namespace=p.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c.result=b,c.target||(c.target=e),d=null==d?[c]:ka.makeArray(d,[c]),k=ka.event.special[o]||{},f||!k.trigger||k.trigger.apply(e,d)!==!1)){if(!f&&!k.noBubble&&!ka.isWindow(e)){for(j=k.delegateType||o,Oa.test(j+o)||(i=i.parentNode);i;i=i.parentNode)n.push(i),l=i;l===(e.ownerDocument||Y)&&n.push(l.defaultView||l.parentWindow||a)}for(m=0;(i=n[m++])&&!c.isPropagationStopped();)c.type=m>1?j:k.bindType||o,g=(ka._data(i,"events")||{})[c.type]&&ka._data(i,"handle"),g&&g.apply(i,d),g=h&&i[h],g&&ka.acceptData(i)&&g.apply&&g.apply(i,d)===!1&&c.preventDefault();if(c.type=o,!f&&!c.isDefaultPrevented()&&(!k._default||k._default.apply(n.pop(),d)===!1)&&ka.acceptData(e)&&h&&e[o]&&!ka.isWindow(e)){l=e[h],l&&(e[h]=null),ka.event.triggered=o;try{e[o]()}catch(q){}ka.event.triggered=b,l&&(e[h]=l)}return c.result}},dispatch:function(a){a=ka.event.fix(a);var c,d,e,f,g,h=[],i=fa.call(arguments),j=(ka._data(this,"events")||{})[a.type]||[],k=ka.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){for(h=ka.event.handlers.call(this,a,j),c=0;(f=h[c++])&&!a.isPropagationStopped();)for(a.currentTarget=f.elem,g=0;(e=f.handlers[g++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,d=((ka.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),d!==b&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(j.disabled!==!0||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=c[g],d=e.selector+" ",f[d]===b&&(f[d]=e.needsContext?ka(d,this).index(j)>=0:ka.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<c.length&&h.push({elem:this,handlers:c.slice(i)}),h},fix:function(a){if(a[ka.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Na.test(e)?this.mouseHooks:Ma.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ka.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||Y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button,h=c.fromElement;return null==a.pageX&&null!=c.clientX&&(e=a.target.ownerDocument||Y,f=e.documentElement,d=e.body,a.pageX=c.clientX+(f&&f.scrollLeft||d&&d.scrollLeft||0)-(f&&f.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||d&&d.scrollTop||0)-(f&&f.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&h&&(a.relatedTarget=h===a.target?c.toElement:h),a.which||g===b||(a.which=1&g?1:2&g?3:4&g?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===k()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ka.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return ka.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ka.extend(new ka.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ka.event.trigger(e,null,b):ka.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ka.removeEvent=Y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===W&&(a[d]=null),a.detachEvent(d,c))},ka.Event=function(a,b){return this instanceof ka.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&ka.extend(this,b),this.timeStamp=a&&a.timeStamp||ka.now(),void(this[ka.expando]=!0)):new ka.Event(a,b)},ka.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},ka.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){ka.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ka.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ka.support.submitBubbles||(ka.event.special.submit={setup:function(){return ka.nodeName(this,"form")?!1:void ka.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=ka.nodeName(c,"input")||ka.nodeName(c,"button")?c.form:b;d&&!ka._data(d,"submitBubbles")&&(ka.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),ka._data(d,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ka.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ka.nodeName(this,"form")?!1:void ka.event.remove(this,"._submit")}}),ka.support.changeBubbles||(ka.event.special.change={setup:function(){return La.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ka.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ka.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ka.event.simulate("change",this,a,!0)})),!1):void ka.event.add(this,"beforeactivate._change",function(a){var b=a.target;La.test(b.nodeName)&&!ka._data(b,"changeBubbles")&&(ka.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ka.event.simulate("change",this.parentNode,a,!0)}),ka._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ka.event.remove(this,"._change"),!La.test(this.nodeName)}}),ka.support.focusinBubbles||ka.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){ka.event.simulate(b,a.target,ka.event.fix(a),!0)};ka.event.special[b]={setup:function(){0===c++&&Y.addEventListener(a,d,!0)},teardown:function(){0===--c&&Y.removeEventListener(a,d,!0)}}}),ka.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(g in a)this.on(g,c,d,a[g],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return ka().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=ka.guid++)),this.each(function(){ka.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,ka(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=j),this.each(function(){ka.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){ka.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ka.event.trigger(a,b,c,!0):void 0}});var Qa=/^.[^:#\[\.,]*$/,Ra=/^(?:parents|prev(?:Until|All))/,Sa=ka.expr.match.needsContext,Ta={children:!0,contents:!0,next:!0,prev:!0};ka.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ka(a).filter(function(){for(b=0;e>b;b++)if(ka.contains(d[b],this))return!0}));for(b=0;e>b;b++)ka.find(a,d[b],c);return c=this.pushStack(e>1?ka.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=ka(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ka.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&Sa.test(a)?ka(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=Sa.test(a)||"string"!=typeof a?ka(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ka.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?ka.unique(f):f)},index:function(a){return a?"string"==typeof a?ka.inArray(this[0],ka(a)):ka.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?ka(a,b):ka.makeArray(a&&a.nodeType?[a]:a),d=ka.merge(this.get(),c);return this.pushStack(ka.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ka.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null;
},parents:function(a){return ka.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ka.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return ka.dir(a,"nextSibling")},prevAll:function(a){return ka.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ka.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ka.dir(a,"previousSibling",c)},siblings:function(a){return ka.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ka.sibling(a.firstChild)},contents:function(a){return ka.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ka.merge([],a.childNodes)}},function(a,b){ka.fn[a]=function(c,d){var e=ka.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ka.filter(d,e)),this.length>1&&(Ta[a]||(e=ka.unique(e)),Ra.test(a)&&(e=e.reverse())),this.pushStack(e)}}),ka.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ka.find.matchesSelector(d,a)?[d]:[]:ka.find.matches(a,ka.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!ka(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var Ua="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Va=/ jQuery\d+="(?:null|\d+)"/g,Wa=new RegExp("<(?:"+Ua+")[\\s/>]","i"),Xa=/^\s+/,Ya=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Za=/<([\w:]+)/,$a=/<tbody/i,_a=/<|&#?\w+;/,ab=/<(?:script|style|link)/i,bb=/^(?:checkbox|radio)$/i,cb=/checked\s*(?:[^=]|=\s*.checked.)/i,db=/^$|\/(?:java|ecma)script/i,eb=/^true\/(.*)/,fb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,gb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ka.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},hb=n(Y),ib=hb.appendChild(Y.createElement("div"));gb.optgroup=gb.option,gb.tbody=gb.tfoot=gb.colgroup=gb.caption=gb.thead,gb.th=gb.td,ka.fn.extend({text:function(a){return ka.access(this,function(a){return a===b?ka.text(this):this.empty().append((this[0]&&this[0].ownerDocument||Y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ka.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ka.cleanData(u(c)),c.parentNode&&(b&&ka.contains(c.ownerDocument,c)&&r(u(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ka.cleanData(u(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ka.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ka.clone(this,a,b)})},html:function(a){return ka.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Va,""):b;if(!("string"!=typeof a||ab.test(a)||!ka.support.htmlSerialize&&Wa.test(a)||!ka.support.leadingWhitespace&&Xa.test(a)||gb[(Za.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Ya,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(ka.cleanData(u(c,!1)),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=ka.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),ka(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=da.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,m=k-1,n=a[0],o=ka.isFunction(n);if(o||!(1>=k||"string"!=typeof n||ka.support.checkClone)&&cb.test(n))return this.each(function(d){var e=l.eq(d);o&&(a[0]=n.call(this,d,e.html())),e.domManip(a,b,c)});if(k&&(i=ka.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=i.firstChild,1===i.childNodes.length&&(i=d),d)){for(g=ka.map(u(i,"script"),p),f=g.length;k>j;j++)e=i,j!==m&&(e=ka.clone(e,!0,!0),f&&ka.merge(g,u(e,"script"))),b.call(this[j],e,j);if(f)for(h=g[g.length-1].ownerDocument,ka.map(g,q),j=0;f>j;j++)e=g[j],db.test(e.type||"")&&!ka._data(e,"globalEval")&&ka.contains(h,e)&&(e.src?ka._evalUrl(e.src):ka.globalEval((e.text||e.textContent||e.innerHTML||"").replace(fb,"")));i=d=null}return this}}),ka.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ka.fn[a]=function(a){for(var c,d=0,e=[],f=ka(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ka(f[d])[b](c),ea.apply(e,c.get());return this.pushStack(e)}}),ka.extend({clone:function(a,b,c){var d,e,f,g,h,i=ka.contains(a.ownerDocument,a);if(ka.support.html5Clone||ka.isXMLDoc(a)||!Wa.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(ib.innerHTML=a.outerHTML,ib.removeChild(f=ib.firstChild)),!(ka.support.noCloneEvent&&ka.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ka.isXMLDoc(a)))for(d=u(f),h=u(a),g=0;null!=(e=h[g]);++g)d[g]&&t(e,d[g]);if(b)if(c)for(h=h||u(a),d=d||u(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=u(f,"script"),d.length>0&&r(d,!i&&u(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=n(b),o=[],p=0;l>p;p++)if(f=a[p],f||0===f)if("object"===ka.type(f))ka.merge(o,f.nodeType?[f]:f);else if(_a.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Za.exec(f)||["",""])[1].toLowerCase(),k=gb[i]||gb._default,h.innerHTML=k[1]+f.replace(Ya,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ka.support.leadingWhitespace&&Xa.test(f)&&o.push(b.createTextNode(Xa.exec(f)[0])),!ka.support.tbody)for(f="table"!==i||$a.test(f)?"<table>"!==k[1]||$a.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ka.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ka.merge(o,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else o.push(b.createTextNode(f));for(h&&m.removeChild(h),ka.support.appendChecked||ka.grep(u(o,"input"),v),p=0;f=o[p++];)if((!d||-1===ka.inArray(f,d))&&(g=ka.contains(f.ownerDocument,f),h=u(m.appendChild(f),"script"),g&&r(h),c))for(e=0;f=h[e++];)db.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ka.expando,i=ka.cache,j=ka.support.deleteExpando,k=ka.event.special;null!=(c=a[g]);g++)if((b||ka.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ka.event.remove(c,d):ka.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==W?c.removeAttribute(h):c[h]=null,ba.push(e))}},_evalUrl:function(a){return ka.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),ka.fn.extend({wrapAll:function(a){if(ka.isFunction(a))return this.each(function(b){ka(this).wrapAll(a.call(this,b))});if(this[0]){var b=ka(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(ka.isFunction(a)?function(b){ka(this).wrapInner(a.call(this,b))}:function(){var b=ka(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ka.isFunction(a);return this.each(function(c){ka(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ka.nodeName(this,"body")||ka(this).replaceWith(this.childNodes)}).end()}});var jb,kb,lb,mb=/alpha\([^)]*\)/i,nb=/opacity\s*=\s*([^)]*)/,ob=/^(top|right|bottom|left)$/,pb=/^(none|table(?!-c[ea]).+)/,qb=/^margin/,rb=new RegExp("^("+la+")(.*)$","i"),sb=new RegExp("^("+la+")(?!px)[a-z%]+$","i"),tb=new RegExp("^([+-])=("+la+")","i"),ub={BODY:"block"},vb={position:"absolute",visibility:"hidden",display:"block"},wb={letterSpacing:0,fontWeight:400},xb=["Top","Right","Bottom","Left"],yb=["Webkit","O","Moz","ms"];ka.fn.extend({css:function(a,c){return ka.access(this,function(a,c,d){var e,f,g={},h=0;if(ka.isArray(c)){for(f=kb(a),e=c.length;e>h;h++)g[c[h]]=ka.css(a,c[h],!1,f);return g}return d!==b?ka.style(a,c,d):ka.css(a,c)},a,c,arguments.length>1)},show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){x(this)?ka(this).show():ka(this).hide()})}}),ka.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=lb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ka.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=ka.camelCase(c),j=a.style;if(c=ka.cssProps[i]||(ka.cssProps[i]=w(j,i)),h=ka.cssHooks[c]||ka.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=tb.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(ka.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||ka.cssNumber[i]||(d+="px"),ka.support.clearCloneStyle||""!==d||0!==c.indexOf("background")||(j[c]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=ka.camelCase(c);return c=ka.cssProps[i]||(ka.cssProps[i]=w(a.style,i)),h=ka.cssHooks[c]||ka.cssHooks[i],h&&"get"in h&&(g=h.get(a,!0,d)),g===b&&(g=lb(a,c,e)),"normal"===g&&c in wb&&(g=wb[c]),""===d||d?(f=parseFloat(g),d===!0||ka.isNumeric(f)?f||0:g):g}}),a.getComputedStyle?(kb=function(b){return a.getComputedStyle(b,null)},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;return h&&(""!==i||ka.contains(a.ownerDocument,a)||(i=ka.style(a,c)),sb.test(i)&&qb.test(c)&&(e=j.width,f=j.minWidth,g=j.maxWidth,j.minWidth=j.maxWidth=j.width=i,i=h.width,j.width=e,j.minWidth=f,j.maxWidth=g)),i}):Y.documentElement.currentStyle&&(kb=function(a){return a.currentStyle},lb=function(a,c,d){var e,f,g,h=d||kb(a),i=h?h[c]:b,j=a.style;return null==i&&j&&j[c]&&(i=j[c]),sb.test(i)&&!ob.test(c)&&(e=j.left,f=a.runtimeStyle,g=f&&f.left,g&&(f.left=a.currentStyle.left),j.left="fontSize"===c?"1em":i,i=j.pixelLeft+"px",j.left=e,g&&(f.left=g)),""===i?"auto":i}),ka.each(["height","width"],function(a,b){ka.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&pb.test(ka.css(a,"display"))?ka.swap(a,vb,function(){return B(a,b,d)}):B(a,b,d):void 0},set:function(a,c,d){var e=d&&kb(a);return z(a,c,d?A(a,b,d,ka.support.boxSizing&&"border-box"===ka.css(a,"boxSizing",!1,e),e):0)}}}),ka.support.opacity||(ka.cssHooks.opacity={get:function(a,b){return nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ka.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ka.trim(f.replace(mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=mb.test(f)?f.replace(mb,e):f+" "+e)}}),ka(function(){ka.support.reliableMarginRight||(ka.cssHooks.marginRight={get:function(a,b){return b?ka.swap(a,{display:"inline-block"},lb,[a,"marginRight"]):void 0}}),!ka.support.pixelPosition&&ka.fn.position&&ka.each(["top","left"],function(a,b){ka.cssHooks[b]={get:function(a,c){return c?(c=lb(a,b),sb.test(c)?ka(a).position()[b]+"px":c):void 0}}})}),ka.expr&&ka.expr.filters&&(ka.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ka.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||ka.css(a,"display"))},ka.expr.filters.visible=function(a){return!ka.expr.filters.hidden(a)}),ka.each({margin:"",padding:"",border:"Width"},function(a,b){ka.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+xb[d]+b]=f[d]||f[d-2]||f[0];return e}},qb.test(a)||(ka.cssHooks[a+b].set=z)});var zb=/%20/g,Ab=/\[\]$/,Bb=/\r?\n/g,Cb=/^(?:submit|button|image|reset|file)$/i,Db=/^(?:input|select|textarea|keygen)/i;ka.fn.extend({serialize:function(){return ka.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ka.prop(this,"elements");return a?ka.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ka(this).is(":disabled")&&Db.test(this.nodeName)&&!Cb.test(a)&&(this.checked||!bb.test(a))}).map(function(a,b){var c=ka(this).val();return null==c?null:ka.isArray(c)?ka.map(c,function(a){return{name:b.name,value:a.replace(Bb,"\r\n")}}):{name:b.name,value:c.replace(Bb,"\r\n")}}).get()}}),ka.param=function(a,c){var d,e=[],f=function(a,b){b=ka.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=ka.ajaxSettings&&ka.ajaxSettings.traditional),ka.isArray(a)||a.jquery&&!ka.isPlainObject(a))ka.each(a,function(){f(this.name,this.value)});else for(d in a)E(d,a[d],c,f);return e.join("&").replace(zb,"+")},ka.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ka.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ka.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb,Fb,Gb=ka.now(),Hb=/\?/,Ib=/#.*$/,Jb=/([?&])_=[^&]*/,Kb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Lb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Mb=/^(?:GET|HEAD)$/,Nb=/^\/\//,Ob=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Pb=ka.fn.load,Qb={},Rb={},Sb="*/".concat("*");try{Fb=X.href}catch(Tb){Fb=Y.createElement("a"),Fb.href="",Fb=Fb.href}Eb=Ob.exec(Fb.toLowerCase())||[],ka.fn.load=function(a,c,d){if("string"!=typeof a&&Pb)return Pb.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),ka.isFunction(c)?(d=c,c=b):c&&"object"==typeof c&&(g="POST"),h.length>0&&ka.ajax({url:a,type:g,dataType:"html",data:c}).done(function(a){f=arguments,h.html(e?ka("<div>").append(ka.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},ka.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ka.fn[b]=function(a){return this.on(b,a)}}),ka.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Fb,type:"GET",isLocal:Lb.test(Eb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ka.parseJSON,"text xml":ka.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?H(H(a,ka.ajaxSettings),b):H(ka.ajaxSettings,a)},ajaxPrefilter:F(Qb),ajaxTransport:F(Rb),ajax:function(a,c){function d(a,c,d,e){var f,l,s,t,v,x=c;2!==u&&(u=2,i&&clearTimeout(i),k=b,h=e||"",w.readyState=a>0?4:0,f=a>=200&&300>a||304===a,d&&(t=I(m,w,d)),t=J(m,t,w,f),f?(m.ifModified&&(v=w.getResponseHeader("Last-Modified"),v&&(ka.lastModified[g]=v),v=w.getResponseHeader("etag"),v&&(ka.etag[g]=v)),204===a||"HEAD"===m.type?x="nocontent":304===a?x="notmodified":(x=t.state,l=t.data,s=t.error,f=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),w.status=a,w.statusText=(c||x)+"",f?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]),w.statusCode(r),r=b,j&&o.trigger(f?"ajaxSuccess":"ajaxError",[w,m,f?l:s]),q.fireWith(n,[w,x]),j&&(o.trigger("ajaxComplete",[w,m]),--ka.active||ka.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var e,f,g,h,i,j,k,l,m=ka.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?ka(n):ka.event,p=ka.Deferred(),q=ka.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=Kb.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;return k&&k.abort(b),d(0,b),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||Fb)+"").replace(Ib,"").replace(Nb,Eb[1]+"//"),m.type=c.method||c.type||m.method||m.type,m.dataTypes=ka.trim(m.dataType||"*").toLowerCase().match(ma)||[""],null==m.crossDomain&&(e=Ob.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===Eb[1]&&e[2]===Eb[2]&&(e[3]||("http:"===e[1]?"80":"443"))===(Eb[3]||("http:"===Eb[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=ka.param(m.data,m.traditional)),G(Qb,m,c,w),2===u)return w;j=m.global,j&&0===ka.active++&&ka.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!Mb.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(Hb.test(g)?"&":"?")+m.data,delete m.data),m.cache===!1&&(m.url=Jb.test(g)?g.replace(Jb,"$1_="+Gb++):g+(Hb.test(g)?"&":"?")+"_="+Gb++)),m.ifModified&&(ka.lastModified[g]&&w.setRequestHeader("If-Modified-Since",ka.lastModified[g]),ka.etag[g]&&w.setRequestHeader("If-None-Match",ka.etag[g])),(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+Sb+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(m.beforeSend.call(n,w,m)===!1||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=G(Rb,m,c,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return ka.get(a,b,c,"json")},getScript:function(a,c){return ka.get(a,b,c,"script")}}),ka.each(["get","post"],function(a,c){ka[c]=function(a,d,e,f){return ka.isFunction(d)&&(f=f||e,e=d,d=b),ka.ajax({url:a,type:c,dataType:f,data:d,success:e})}}),ka.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ka.globalEval(a),a}}}),ka.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ka.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=Y.head||ka("head")[0]||Y.documentElement;return{send:function(b,e){c=Y.createElement("script"),c.async=!0,a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,b){(b||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,c.parentNode&&c.parentNode.removeChild(c),c=null,b||e(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(b,!0)}}}});var Ub=[],Vb=/(=)\?(?=&|$)|\?\?/;ka.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Ub.pop()||ka.expando+"_"+Gb++;return this[a]=!0,a}}),ka.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(Vb.test(c.url)?"url":"string"==typeof c.data&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(c.data)&&"data");return i||"jsonp"===c.dataTypes[0]?(f=c.jsonpCallback=ka.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,i?c[i]=c[i].replace(Vb,"$1"+f):c.jsonp!==!1&&(c.url+=(Hb.test(c.url)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||ka.error(f+" was not called"),h[0]},c.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,Ub.push(f)),h&&ka.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0});var Wb,Xb,Yb=0,Zb=a.ActiveXObject&&function(){var a;for(a in Wb)Wb[a](b,!0)};ka.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&K()||L()}:K,Xb=ka.ajaxSettings.xhr(),ka.support.cors=!!Xb&&"withCredentials"in Xb,Xb=ka.support.ajax=!!Xb,Xb&&ka.ajaxTransport(function(c){if(!c.crossDomain||ka.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=ka.noop,Zb&&delete Wb[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},c.async?4===i.readyState?setTimeout(d):(g=++Yb,Zb&&(Wb||(Wb={},ka(a).unload(Zb)),Wb[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(b,!0)}}}});var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+la+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[Q],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(ka.cssNumber[a]?"":"px"),g=(ka.cssNumber[a]||"px"!==f&&+d)&&bc.exec(ka.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ka.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ka.Animation=ka.extend(O,{tweener:function(a,b){ka.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),ka.Tween=R,R.prototype={constructor:R,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ka.cssNumber[c]?"":"px")},cur:function(){var a=R.propHooks[this.prop];return a&&a.get?a.get(this):R.propHooks._default.get(this)},run:function(a){var b,c=R.propHooks[this.prop];return this.options.duration?this.pos=b=ka.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):R.propHooks._default.set(this),this}},R.prototype.init.prototype=R.prototype,R.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ka.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ka.fx.step[a.prop]?ka.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ka.cssProps[a.prop]]||ka.cssHooks[a.prop])?ka.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},R.propHooks.scrollTop=R.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ka.each(["toggle","show","hide"],function(a,b){var c=ka.fn[b];ka.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(S(b,!0),a,d,e)}}),ka.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ka.isEmptyObject(a),f=ka.speed(b,c,d),g=function(){var b=O(this,ka.extend({},a),f);(e||ka._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=ka.timers,g=ka._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cc.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&ka.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ka._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ka.timers,g=d?d.length:0;for(c.finish=!0,ka.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ka.each({slideDown:S("show"),slideUp:S("hide"),slideToggle:S("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ka.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ka.speed=function(a,b,c){var d=a&&"object"==typeof a?ka.extend({},a):{complete:c||!c&&b||ka.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ka.isFunction(b)&&b};return d.duration=ka.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ka.fx.speeds?ka.fx.speeds[d.duration]:ka.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ka.isFunction(d.old)&&d.old.call(this),d.queue&&ka.dequeue(this,d.queue)},d},ka.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ka.timers=[],ka.fx=R.prototype.init,ka.fx.tick=function(){var a,c=ka.timers,d=0;for($b=ka.now();d<c.length;d++)a=c[d],a()||c[d]!==a||c.splice(d--,1);c.length||ka.fx.stop(),$b=b},ka.fx.timer=function(a){a()&&ka.timers.push(a)&&ka.fx.start()},ka.fx.interval=13,ka.fx.start=function(){_b||(_b=setInterval(ka.fx.tick,ka.fx.interval))},ka.fx.stop=function(){clearInterval(_b),_b=null},ka.fx.speeds={slow:600,fast:200,_default:400},ka.fx.step={},ka.expr&&ka.expr.filters&&(ka.expr.filters.animated=function(a){return ka.grep(ka.timers,function(b){return a===b.elem}).length}),ka.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){ka.offset.setOffset(this,a,b)});var c,d,e={top:0,left:0},f=this[0],g=f&&f.ownerDocument;if(g)return c=g.documentElement,ka.contains(c,f)?(typeof f.getBoundingClientRect!==W&&(e=f.getBoundingClientRect()),d=T(g),{top:e.top+(d.pageYOffset||c.scrollTop)-(c.clientTop||0),left:e.left+(d.pageXOffset||c.scrollLeft)-(c.clientLeft||0)}):e},ka.offset={setOffset:function(a,b,c){var d=ka.css(a,"position");"static"===d&&(a.style.position="relative");var e,f,g=ka(a),h=g.offset(),i=ka.css(a,"top"),j=ka.css(a,"left"),k=("absolute"===d||"fixed"===d)&&ka.inArray("auto",[i,j])>-1,l={},m={};k?(m=g.position(),e=m.top,f=m.left):(e=parseFloat(i)||0,f=parseFloat(j)||0),ka.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(l.top=b.top-h.top+e),null!=b.left&&(l.left=b.left-h.left+f),"using"in b?b.using.call(a,l):g.css(l)}},ka.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ka.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ka.nodeName(a[0],"html")||(c=a.offset()),c.top+=ka.css(a[0],"borderTopWidth",!0),c.left+=ka.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ka.css(d,"marginTop",!0),left:b.left-c.left-ka.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Z;a&&!ka.nodeName(a,"html")&&"static"===ka.css(a,"position");)a=a.offsetParent;return a||Z})}}),ka.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);ka.fn[a]=function(e){return ka.access(this,function(a,e,f){var g=T(a);return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?ka(g).scrollLeft():f,d?f:ka(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),ka.each({Height:"height",Width:"width"},function(a,c){ka.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){ka.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return ka.access(this,function(c,d,e){var f;return ka.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?ka.css(c,d,h):ka.style(c,d,e,h)},c,g?e:b,g,null)}})}),ka.fn.size=function(){return this.length},ka.fn.andSelf=ka.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ka:(a.jQuery=a.$=ka,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ka}))}(window),"undefined"==typeof jQuery)throw new Error("Bootstrap requires jQuery");+function(a){"use strict";function b(){var a=document.createElement("bootstrap"),b={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]}}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(a.support.transition.end,function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b()})}(jQuery),+function(a){"use strict";var b='[data-dismiss="alert"]',c=function(c){a(c).on("click",b,this.close)};c.prototype.close=function(b){function c(){f.trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one(a.support.transition.end,c).emulateTransitionEnd(150):c())};var d=a.fn.alert;a.fn.alert=function(b){return this.each(function(){var d=a(this),e=d.data("bs.alert");e||d.data("bs.alert",e=new c(this)),"string"==typeof b&&e[b].call(d)})},a.fn.alert.Constructor=c,a.fn.alert.noConflict=function(){return a.fn.alert=d,this},a(document).on("click.bs.alert.data-api",b,c.prototype.close)}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d)};b.DEFAULTS={loadingText:"loading..."},b.prototype.setState=function(a){var b="disabled",c=this.$element,d=c.is("input")?"val":"html",e=c.data();a+="Text",e.resetText||c.data("resetText",c[d]()),c[d](e[a]||this.options[a]),setTimeout(function(){"loadingText"==a?c.addClass(b).attr(b,b):c.removeClass(b).removeAttr(b)},0)},b.prototype.toggle=function(){var a=this.$element.closest('[data-toggle="buttons"]');if(a.length){var b=this.$element.find("input").prop("checked",!this.$element.hasClass("active")).trigger("change");"radio"===b.prop("type")&&a.find(".active").removeClass("active")}this.$element.toggleClass("active");
};var c=a.fn.button;a.fn.button=function(c){return this.each(function(){var d=a(this),e=d.data("bs.button"),f="object"==typeof c&&c;e||d.data("bs.button",e=new b(this,f)),"toggle"==c?e.toggle():c&&e.setState(c)})},a.fn.button.Constructor=b,a.fn.button.noConflict=function(){return a.fn.button=c,this},a(document).on("click.bs.button.data-api","[data-toggle^=button]",function(b){var c=a(b.target);c.hasClass("btn")||(c=c.closest(".btn")),c.button("toggle"),b.preventDefault()})}(jQuery),+function(a){"use strict";var b=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(".carousel-indicators"),this.options=c,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter",a.proxy(this.pause,this)).on("mouseleave",a.proxy(this.cycle,this))};b.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},b.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},b.prototype.getActiveIndex=function(){return this.$active=this.$element.find(".item.active"),this.$items=this.$active.parent().children(),this.$items.index(this.$active)},b.prototype.to=function(b){var c=this,d=this.getActiveIndex();return b>this.$items.length-1||0>b?void 0:this.sliding?this.$element.one("slid",function(){c.to(b)}):d==b?this.pause().cycle():this.slide(b>d?"next":"prev",a(this.$items[b]))},b.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(".next, .prev").length&&a.support.transition.end&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},b.prototype.next=function(){return this.sliding?void 0:this.slide("next")},b.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},b.prototype.slide=function(b,c){var d=this.$element.find(".item.active"),e=c||d[b](),f=this.interval,g="next"==b?"left":"right",h="next"==b?"first":"last",i=this;if(!e.length){if(!this.options.wrap)return;e=this.$element.find(".item")[h]()}this.sliding=!0,f&&this.pause();var j=a.Event("slide.bs.carousel",{relatedTarget:e[0],direction:g});if(!e.hasClass("active")){if(this.$indicators.length&&(this.$indicators.find(".active").removeClass("active"),this.$element.one("slid",function(){var b=a(i.$indicators.children()[i.getActiveIndex()]);b&&b.addClass("active")})),a.support.transition&&this.$element.hasClass("slide")){if(this.$element.trigger(j),j.isDefaultPrevented())return;e.addClass(b),e[0].offsetWidth,d.addClass(g),e.addClass(g),d.one(a.support.transition.end,function(){e.removeClass([b,g].join(" ")).addClass("active"),d.removeClass(["active",g].join(" ")),i.sliding=!1,setTimeout(function(){i.$element.trigger("slid")},0)}).emulateTransitionEnd(600)}else{if(this.$element.trigger(j),j.isDefaultPrevented())return;d.removeClass("active"),e.addClass("active"),this.sliding=!1,this.$element.trigger("slid")}return f&&this.cycle(),this}};var c=a.fn.carousel;a.fn.carousel=function(c){return this.each(function(){var d=a(this),e=d.data("bs.carousel"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c),g="string"==typeof c?c:f.slide;e||d.data("bs.carousel",e=new b(this,f)),"number"==typeof c?e.to(c):g?e[g]():f.interval&&e.pause().cycle()})},a.fn.carousel.Constructor=b,a.fn.carousel.noConflict=function(){return a.fn.carousel=c,this},a(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(b){var c,d=a(this),e=a(d.attr("data-target")||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,"")),f=a.extend({},e.data(),d.data()),g=d.attr("data-slide-to");g&&(f.interval=!1),e.carousel(f),(g=d.attr("data-slide-to"))&&e.data("bs.carousel").to(g),b.preventDefault()}),a(window).on("load",function(){a('[data-ride="carousel"]').each(function(){var b=a(this);b.carousel(b.data())})})}(jQuery),+function(a){"use strict";var b=function(c,d){this.$element=a(c),this.options=a.extend({},b.DEFAULTS,d),this.transitioning=null,this.options.parent&&(this.$parent=a(this.options.parent)),this.options.toggle&&this.toggle()};b.DEFAULTS={toggle:!0},b.prototype.dimension=function(){var a=this.$element.hasClass("width");return a?"width":"height"},b.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var b=a.Event("show.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.$parent&&this.$parent.find("> .panel > .in");if(c&&c.length){var d=c.data("bs.collapse");if(d&&d.transitioning)return;c.collapse("hide"),d||c.data("bs.collapse",null)}var e=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[e](0),this.transitioning=1;var f=function(){this.$element.removeClass("collapsing").addClass("in")[e]("auto"),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!a.support.transition)return f.call(this);var g=a.camelCase(["scroll",e].join("-"));this.$element.one(a.support.transition.end,a.proxy(f,this)).emulateTransitionEnd(350)[e](this.$element[0][g])}}},b.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var b=a.Event("hide.bs.collapse");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var d=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return a.support.transition?void this.$element[c](0).one(a.support.transition.end,a.proxy(d,this)).emulateTransitionEnd(350):d.call(this)}}},b.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var c=a.fn.collapse;a.fn.collapse=function(c){return this.each(function(){var d=a(this),e=d.data("bs.collapse"),f=a.extend({},b.DEFAULTS,d.data(),"object"==typeof c&&c);e||d.data("bs.collapse",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.collapse.Constructor=b,a.fn.collapse.noConflict=function(){return a.fn.collapse=c,this},a(document).on("click.bs.collapse.data-api","[data-toggle=collapse]",function(b){var c,d=a(this),e=d.attr("data-target")||b.preventDefault()||(c=d.attr("href"))&&c.replace(/.*(?=#[^\s]+$)/,""),f=a(e),g=f.data("bs.collapse"),h=g?"toggle":d.data(),i=d.attr("data-parent"),j=i&&a(i);g&&g.transitioning||(j&&j.find('[data-toggle=collapse][data-parent="'+i+'"]').not(d).addClass("collapsed"),d[f.hasClass("in")?"addClass":"removeClass"]("collapsed")),f.collapse(h)})}(jQuery),+function(a){"use strict";function b(){a(d).remove(),a(e).each(function(b){var d=c(a(this));d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown")),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown"))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){if("ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b),f.trigger(d=a.Event("show.bs.dropdown")),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown"),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=a("[role=menu] li:not(.divider):visible a",f);if(h.length){var i=h.index(h.filter(":focus"));38==b.keyCode&&i>0&&i--,40==b.keyCode&&i<h.length-1&&i++,~i||(i=0),h.eq(i).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("dropdown");d||c.data("dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu]",f.prototype.keydown)}(jQuery),+function(a){"use strict";var b=function(b,c){this.options=c,this.$element=a(b),this.$backdrop=this.isShown=null,this.options.remote&&this.$element.load(this.options.remote)};b.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},b.prototype.toggle=function(a){return this[this.isShown?"hide":"show"](a)},b.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.escape(),this.$element.on("click.dismiss.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(document.body),c.$element.show(),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one(a.support.transition.end,function(){c.$element.focus().trigger(e)}).emulateTransitionEnd(300):c.$element.focus().trigger(e)}))},b.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one(a.support.transition.end,a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},b.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.focus()},this))},b.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},b.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.removeBackdrop(),a.$element.trigger("hidden.bs.modal")})},b.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},b.prototype.backdrop=function(b){var c=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=a.support.transition&&c;if(this.$backdrop=a('<div class="modal-backdrop '+c+'" />').appendTo(document.body),this.$element.on("click.dismiss.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),d&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;d?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(a.support.transition.end,b).emulateTransitionEnd(150):b()):b&&b()};var c=a.fn.modal;a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},b.DEFAULTS,e.data(),"object"==typeof c&&c);f||e.data("bs.modal",f=new b(this,g)),"string"==typeof c?f[c](d):g.show&&f.show(d)})},a.fn.modal.Constructor=b,a.fn.modal.noConflict=function(){return a.fn.modal=c,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f,this).one("hide",function(){c.is(":visible")&&c.focus()})}),a(document).on("show.bs.modal",".modal",function(){a(document.body).addClass("modal-open")}).on("hidden.bs.modal",".modal",function(){a(document.body).removeClass("modal-open")})}(jQuery),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focus",i="hover"==g?"mouseleave":"blur";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this.tip();this.setContent(),this.options.animation&&c.addClass("fade");var d="function"==typeof this.options.placement?this.options.placement.call(this,c[0],this.$element[0]):this.options.placement,e=/\s?auto?\s?/i,f=e.test(d);f&&(d=d.replace(e,"")||"top"),c.detach().css({top:0,left:0,display:"block"}).addClass(d),this.options.container?c.appendTo(this.options.container):c.insertAfter(this.$element);var g=this.getPosition(),h=c[0].offsetWidth,i=c[0].offsetHeight;if(f){var j=this.$element.parent(),k=d,l=document.documentElement.scrollTop||document.body.scrollTop,m="body"==this.options.container?window.innerWidth:j.outerWidth(),n="body"==this.options.container?window.innerHeight:j.outerHeight(),o="body"==this.options.container?0:j.offset().left;d="bottom"==d&&g.top+g.height+i-l>n?"top":"top"==d&&g.top-l-i<0?"bottom":"right"==d&&g.right+h>m?"left":"left"==d&&g.left-h<o?"right":d,c.removeClass(k).addClass(d)}var p=this.getCalculatedOffset(d,g,h,i);this.applyPlacement(p,d),this.$element.trigger("shown.bs."+this.type)}},b.prototype.applyPlacement=function(a,b){var c,d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),a.top=a.top+g,a.left=a.left+h,d.offset(a).addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;if("top"==b&&j!=f&&(c=!0,a.top=a.top+f-j),/bottom|top/.test(b)){var k=0;a.left<0&&(k=-2*a.left,a.left=0,d.offset(a),i=d[0].offsetWidth,j=d[0].offsetHeight),this.replaceArrow(k-e+i,i,"left")}else this.replaceArrow(j-f,j,"top");c&&d.offset(a)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach()}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.$element.trigger("hidden.bs."+this.type),this)},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"html":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),+function(a){"use strict";function b(c,d){var e,f=a.proxy(this.process,this);this.$element=a(a(c).is("body")?window:c),this.$body=a("body"),this.$scrollElement=this.$element.on("scroll.bs.scroll-spy.data-api",f),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||(e=a(c).attr("href"))&&e.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.offsets=a([]),this.targets=a([]),this.activeTarget=null,this.refresh(),this.process()}b.DEFAULTS={offset:10},b.prototype.refresh=function(){var b=this.$element[0]==window?"offset":"position";this.offsets=a([]),this.targets=a([]);var c=this;this.$body.find(this.selector).map(function(){var d=a(this),e=d.data("target")||d.attr("href"),f=/^#\w/.test(e)&&a(e);return f&&f.length&&[[f[b]().top+(!a.isWindow(c.$scrollElement.get(0))&&c.$scrollElement.scrollTop()),e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){c.offsets.push(this[0]),c.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.$scrollElement[0].scrollHeight||this.$body[0].scrollHeight,d=c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(b>=d)return g!=(a=f.last()[0])&&this.activate(a);for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(!e[a+1]||b<=e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,a(this.selector).parents(".active").removeClass("active");var c=this.selector+'[data-target="'+b+'"],'+this.selector+'[href="'+b+'"]',d=a(c).parents("li").addClass("active");d.parent(".dropdown-menu").length&&(d=d.closest("li.dropdown").addClass("active")),d.trigger("activate")};var c=a.fn.scrollspy;a.fn.scrollspy=function(c){return this.each(function(){var d=a(this),e=d.data("bs.scrollspy"),f="object"==typeof c&&c;e||d.data("bs.scrollspy",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=c,this},a(window).on("load",function(){a('[data-spy="scroll"]').each(function(){var b=a(this);b.scrollspy(b.data())})})}(jQuery),+function(a){"use strict";var b=function(b){this.element=a(b)};b.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.parent("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},b.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one(a.support.transition.end,e).emulateTransitionEnd(150):e(),f.removeClass("in")};var c=a.fn.tab;a.fn.tab=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new b(this)),"string"==typeof c&&e[c]()})},a.fn.tab.Constructor=b,a.fn.tab.noConflict=function(){return a.fn.tab=c,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(b){b.preventDefault(),a(this).tab("show")})}(jQuery),+function(a){"use strict";var b=function(c,d){this.options=a.extend({},b.DEFAULTS,d),this.$window=a(window).on("scroll.bs.affix.data-api",a.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(c),this.affixed=this.unpin=null,this.checkPosition()};b.RESET="affix affix-top affix-bottom",b.DEFAULTS={offset:0},b.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},b.prototype.checkPosition=function(){if(this.$element.is(":visible")){var c=a(document).height(),d=this.$window.scrollTop(),e=this.$element.offset(),f=this.options.offset,g=f.top,h=f.bottom;"object"!=typeof f&&(h=g=f),"function"==typeof g&&(g=f.top()),"function"==typeof h&&(h=f.bottom());var i=null!=this.unpin&&d+this.unpin<=e.top?!1:null!=h&&e.top+this.$element.height()>=c-h?"bottom":null!=g&&g>=d?"top":!1;this.affixed!==i&&(this.unpin&&this.$element.css("top",""),this.affixed=i,this.unpin="bottom"==i?e.top-d:null,this.$element.removeClass(b.RESET).addClass("affix"+(i?"-"+i:"")),"bottom"==i&&this.$element.offset({top:document.body.offsetHeight-h-this.$element.height()}))}};var c=a.fn.affix;a.fn.affix=function(c){return this.each(function(){var d=a(this),e=d.data("bs.affix"),f="object"==typeof c&&c;e||d.data("bs.affix",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.affix.Constructor=b,a.fn.affix.noConflict=function(){return a.fn.affix=c,this},a(window).on("load",function(){a('[data-spy="affix"]').each(function(){var b=a(this),c=b.data();c.offset=c.offset||{},c.offsetBottom&&(c.offset.bottom=c.offsetBottom),c.offsetTop&&(c.offset.top=c.offsetTop),b.affix(c)})})}(jQuery),define("bootstrap",["jquery"],function(){}),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),define("polyfills",function(){}),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,b.href&&f&&"map"===e.nodeName.toLowerCase()?(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g)):!1):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),define("jquery.ui.core",function(){}),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,
!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),define("jquery.ui.widget",["jquery.ui.core"],function(){}),function(a){"use strict";"function"==typeof define&&define.amd?define("fileupload",["jquery","jquery.ui.widget"],a):a(window.jQuery)}(function(a){"use strict";a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){return b.isDefaultPrevented()?!1:void((c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var d,e=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&e-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=e,d=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=d-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=d,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(e,d,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(d,e){c.push({name:"array"===a.type(b.paramName)&&b.paramName[d]||g,value:e})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(e,f){(d._isInstanceOf("File",f)||d._isInstanceOf("Blob",f))&&c.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=c):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return this._isXHRUpload(b)&&k&&(i||h>j)&&!b.data?c?!0:i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(f._trigger("chunksend",null,c)!==!1&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),h>i?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m):!1},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||h._trigger("send",a.Event("send",{delegatedEvent:b}),i)===!1)&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=c.files,l=k.length,m=j.limitMultiFileUploads,n=j.limitMultiFileUploadSize,o=j.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(j),r=0;if(!n||l&&void 0!==k[0].size||(n=void 0),(j.singleFileUploads||m||n)&&this._isXHRUpload(j))if(j.singleFileUploads||n||!m)if(!j.singleFileUploads&&n)for(f=[],d=[],g=0;l>g;g+=1)p+=k[g].size+o,(g+1===l||p+k[g+1].size+o>n||m&&g+1-r>=m)&&(f.push(k.slice(r,g+1)),e=q.slice(r,g+1),e.length||(e=q),d.push(e),r=g+1,p=0);else d=q;else for(f=[],d=[],g=0;l>g;g+=m)f.push(k.slice(g,g+m)),e=q.slice(g,g+m),e.length||(e=q),d.push(e);else f=[k],d=[q];return c.originalFiles=k,a.each(f||k,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",a.Event("add",{delegatedEvent:b}),j)}),i},_replaceFileInput:function(b){var c=b.clone(!0);a("<form></form>").append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])},h=function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},i=function(){d.readEntries(function(a){a.length?(j=j.concat(a),i()):h(j)},g)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),i()):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(d=b.prop("value"),!d)return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d.fileInput),c._trigger("change",a.Event("change",{delegatedEvent:b}),d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)!==!1&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={};d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)!==!1&&c._onAdd(b,e)}))},_onDragOver:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=b.dataTransfer;c&&-1!==a.inArray("Files",c.types)&&this._trigger("dragover",a.Event("dragover",{delegatedEvent:b}))!==!1&&(b.preventDefault(),c.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=-1!==a.inArray(b,this._specialOptions);d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=a(this.element[0].cloneNode(!1));a.each(d.data(),function(a,e){var f="data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();d.attr(f)&&(b._isRegExpOption(a,e)&&(e=b._getRegExp(e)),c[a]=e)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){if(!d){if(!a.length)return void f.reject();b.files=a,c=e._onSend(null,b),c.then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)})}}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){var b={},c={},d=function(a,b){for(b=b.slice(0);b.length>0;)a=a.childNodes[b.shift()];return a},e=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;d>c;c+=1)if(a[c]!==b[c])return c;return c<Math.max(a.length,b.length)?c:!0},g=function(a,b){var c=a.slice(0);return c.push(b),c},h=function(a,c,d){for(f=0;f<a.length;f++)if(b[a[f]].condition(c)&&b[a[f]].condition(d))return b[a[f]].test(c,d)?!0:!1;return void 0},i=function(b,d){var e;if(e=c[b.nodeName.toLowerCase()])for(var f=0,g=e.length;g>f;f++)if(a(b).attr(e[f])!==a(d).attr(e[f]))return!0;return!1},j=function(a,b,c,d){if(a.nodeName!==b.nodeName||i(a,b))return c;if(d){var e=h(d,a,b);if(e)return c;if(e===!1)return!1}var f,k=a.firstChild,l=b.firstChild,m=0;if(k&&l){do{if(f=j(k,l,g(c,m),d))return f;m+=1,k=k.nextSibling,l=l.nextSibling}while(k&&l);return k||l?g(c,m):!1}return k||l?c:a.data?a.data===b.data?!1:c:!1},k=function(a,b,c,d,e){if(a.nodeName!==b.nodeName||i(a,b))return[c,d];if(e){var f=h(e,a,b);if(f)return[c,d];if(f===!1)return!1}var j,l=a.lastChild,m=b.lastChild,n=a.childNodes.length,o=b.childNodes.length,p=n-1,q=o-1;if(l&&m){do{if(j=k(l,m,g(c,p),g(d,q),e))return j;p-=1,q-=1,l=l.previousSibling,m=m.previousSibling}while(l&&m);return l||m?[g(c,p),g(d,q)]:!1}return l||m?[c,d]:a.data?a.data===b.data?!1:[c,d]:!1},l=function(a,b,c){for(var d=[],e=0,f=a.firstChild;b>e;)f=f.nextSibling,e+=1;for(;c>e;)d.push(f),f=f.nextSibling,e+=1;return d},m=function(a,b,c){var f=j(a,b,[],c);if(f===!1)return{type:"identical"};var g,h,i=k(a,b,[],[],c),m=e(f,i[0]),n=e(f,i[1]);if(m===!0&&n===!0)g=[d(a,f)],h=[d(b,f)];else{var o=Math.min(m,n),p=f.slice(0,o),q=d(a,p),r=d(b,p),s=f[o],t=i[0][o],u=i[1][o];if(u>t&&s>t)return{type:"insert",source:{node:q,index:s-1},replace:l(r,s,s+(u-t))};s>t||s>u?(g=l(q,s,s+(t-u)),h=[]):(g=l(q,s,t+1),h=l(r,s,u+1))}return{type:"replace",source:g,replace:h}},n=function(b){return"identical"!==b.type?"insert"===b.type?void(-1===b.source.index?a(b.source.node).prepend(b.replace):a(a(b.source.node).contents()[b.source.index]).after(b.replace)):void("replace"===b.type&&(a(b.source[b.source.length-1]).after(b.replace),a(b.source).remove())):void 0},o={diff:function(a,b){var c=m(this.get(0),a.get(0),b);return c.patch=function(){n(c)},c},patch:function(a,b){var c=m(this.get(0),a.get(0),b);return n(c),c},filter:function(a,c,d){c&&d?b[a]={condition:c,test:d}:delete b[a]},attributes:function(a){return void 0===a?c:void(c=a)}};a.fn.quickdiff=function(b){return o[b]?o[b].apply(this,Array.prototype.slice.call(arguments,1)):void a.error("Method "+b+" does not exist on jQuery.quickdiff")}}(jQuery),define("quickdiff",["jquery"],function(){}),window.CodeMirror=function(){"use strict";function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};for(var e in fe)!d.hasOwnProperty(e)&&fe.hasOwnProperty(e)&&(d[e]=fe[e]);m(d);var f="string"==typeof d.value?0:d.value.first,g=this.display=b(c,f);g.wrapper.CodeMirror=this,j(this),d.autofocus&&!Nd&&oa(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Vc},h(this),d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var i=d.value;"string"==typeof i&&(i=new te(d.value,d.mode)),ga(this,mc)(this,i),Ad&&setTimeout(cd(na,this,!0),20),qa(this);var k;try{k=document.activeElement==g.input}catch(l){}k||d.autofocus&&!Nd?setTimeout(cd(Ia,this),20):Ja(this),ga(this,function(){for(var a in ee)ee.propertyIsEnumerable(a)&&ee[a](this,d[a],ge);for(var b=0;b<ke.length;++b)ke[b](this)})()}function b(a,b){var c={},d=c.input=fd("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return Dd?d.style.width="1000px":d.setAttribute("wrap","off"),Md&&(d.style.border="1px solid black"),d.setAttribute("autocorrect","off"),d.setAttribute("autocapitalize","off"),d.setAttribute("spellcheck","false"),c.inputDiv=fd("div",[d],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),c.scrollbarH=fd("div",[fd("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),c.scrollbarV=fd("div",[fd("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),c.scrollbarFiller=fd("div",null,"CodeMirror-scrollbar-filler"),c.gutterFiller=fd("div",null,"CodeMirror-gutter-filler"),c.lineDiv=fd("div",null,"CodeMirror-code"),c.selectionDiv=fd("div",null,null,"position: relative; z-index: 1"),c.cursor=fd("div","Â ","CodeMirror-cursor"),c.otherCursor=fd("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"),c.measure=fd("div",null,"CodeMirror-measure"),c.lineSpace=fd("div",[c.measure,c.selectionDiv,c.lineDiv,c.cursor,c.otherCursor],null,"position: relative; outline: none"),c.mover=fd("div",[fd("div",[c.lineSpace],"CodeMirror-lines")],null,"position: relative"),c.sizer=fd("div",[c.mover],"CodeMirror-sizer"),c.heightForcer=fd("div",null,null,"position: absolute; height: "+ye+"px; width: 1px;"),c.gutters=fd("div",null,"CodeMirror-gutters"),c.lineGutter=null,c.scroller=fd("div",[c.sizer,c.heightForcer,c.gutters],"CodeMirror-scroll"),c.scroller.setAttribute("tabIndex","-1"),c.wrapper=fd("div",[c.inputDiv,c.scrollbarH,c.scrollbarV,c.scrollbarFiller,c.gutterFiller,c.scroller],"CodeMirror"),Bd&&(c.gutters.style.zIndex=-1,c.scroller.style.paddingRight=0),a.appendChild?a.appendChild(c.wrapper):a(c.wrapper),Md&&(d.style.width="0px"),Dd||(c.scroller.draggable=!0),Id?(c.inputDiv.style.height="1px",c.inputDiv.style.position="absolute"):Bd&&(c.scrollbarH.style.minWidth=c.scrollbarV.style.minWidth="18px"),c.viewOffset=c.lastSizeC=0,c.showingFrom=c.showingTo=b,c.lineNumWidth=c.lineNumInnerWidth=c.lineNumChars=null,c.prevInput="",c.alignWidgets=!1,c.pollingFast=!1,c.poll=new Vc,c.cachedCharWidth=c.cachedTextHeight=null,c.measureLineCache=[],c.measureLineCachePos=0,c.inaccurateSelection=!1,c.maxLine=null,c.maxLineLength=0,c.maxLineChanged=!1,c.wheelDX=c.wheelDY=c.wheelStartX=c.wheelStartY=null,c}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption),b.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),b.doc.frontier=b.doc.first,G(b,100),b.state.modeGen++,b.curOp&&ja(b)}function d(a){a.options.lineWrapping?(a.display.wrapper.className+=" CodeMirror-wrap",a.display.sizer.style.minWidth=""):(a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-wrap",""),l(a)),f(a),ja(a),U(a),setTimeout(function(){n(a)},100)}function e(a){var b=ca(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/da(a.display)-3);return function(e){return Qb(a.doc,e)?0:c?(Math.ceil(e.text.length/d)||1)*b:b}}function f(a){var b=a.doc,c=e(a);b.iter(function(a){var b=c(a);b!=a.height&&qc(a,b)})}function g(a){var b=ne[a.options.keyMap],c=b.style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(c?" cm-keymap-"+c:""),a.state.disableInput=b.disableInput}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),U(a)}function i(a){j(a),ja(a),setTimeout(function(){p(a)},20)}function j(a){var b=a.display.gutters,c=a.options.gutters;gd(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(fd("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none"}function k(a,b){if(0==b.height)return 0;for(var c,d=b.text.length,e=b;c=Nb(e);){var f=c.find();e=nc(a,f.from.line),d+=f.from.ch-f.to.ch}for(e=b;c=Ob(e);){var f=c.find();d-=e.text.length-f.from.ch,e=nc(a,f.to.line),d+=e.text.length-f.to.ch}return d}function l(a){var b=a.display,c=a.doc;b.maxLine=nc(c,c.first),b.maxLineLength=k(c,b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var d=k(c,a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function m(a){var b=$c(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function n(a){var b=a.display,c=a.doc.height,d=c+L(b);b.sizer.style.minHeight=b.heightForcer.style.top=d+"px",b.gutters.style.height=Math.max(d,b.scroller.clientHeight-ye)+"px";var e=Math.max(d,b.scroller.scrollHeight),f=b.scroller.scrollWidth>b.scroller.clientWidth+1,g=e>b.scroller.clientHeight+1;g?(b.scrollbarV.style.display="block",b.scrollbarV.style.bottom=f?ld(b.measure)+"px":"0",b.scrollbarV.firstChild.style.height=e-b.scroller.clientHeight+b.scrollbarV.clientHeight+"px"):(b.scrollbarV.style.display="",b.scrollbarV.firstChild.style.height="0"),f?(b.scrollbarH.style.display="block",b.scrollbarH.style.right=g?ld(b.measure)+"px":"0",b.scrollbarH.firstChild.style.width=b.scroller.scrollWidth-b.scroller.clientWidth+b.scrollbarH.clientWidth+"px"):(b.scrollbarH.style.display="",b.scrollbarH.firstChild.style.width="0"),f&&g?(b.scrollbarFiller.style.display="block",b.scrollbarFiller.style.height=b.scrollbarFiller.style.width=ld(b.measure)+"px"):b.scrollbarFiller.style.display="",f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(b.gutterFiller.style.display="block",b.gutterFiller.style.height=ld(b.measure)+"px",b.gutterFiller.style.width=b.gutters.offsetWidth+"px"):b.gutterFiller.style.display="",Jd&&0===ld(b.measure)&&(b.scrollbarV.style.minWidth=b.scrollbarH.style.minHeight=Kd?"18px":"12px",b.scrollbarV.style.pointerEvents=b.scrollbarH.style.pointerEvents="none")}function o(a,b,c){var d=a.scroller.scrollTop,e=a.wrapper.clientHeight;"number"==typeof c?d=c:c&&(d=c.top,e=c.bottom-c.top),d=Math.floor(d-K(a));var f=Math.ceil(d+e);return{from:sc(b,d),to:sc(b,f)}}function p(a){var b=a.display;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var c=s(b)-b.scroller.scrollLeft+a.doc.scrollLeft,d=b.gutters.offsetWidth,e=c+"px",f=b.lineDiv.firstChild;f;f=f.nextSibling)if(f.alignable)for(var g=0,h=f.alignable;g<h.length;++g)h[g].style.left=e;
a.options.fixedGutter&&(b.gutters.style.left=c+d+"px")}}function q(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=r(a.options,b.first+b.size-1),d=a.display;if(c.length!=d.lineNumChars){var e=d.measure.appendChild(fd("div",[fd("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),f=e.firstChild.offsetWidth,g=e.offsetWidth-f;return d.lineGutter.style.width="",d.lineNumInnerWidth=Math.max(f,d.lineGutter.offsetWidth-g),d.lineNumWidth=d.lineNumInnerWidth+g,d.lineNumChars=d.lineNumInnerWidth?c.length:-1,d.lineGutter.style.width=d.lineNumWidth+"px",!0}return!1}function r(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function s(a){return jd(a.scroller).left-jd(a.sizer).left}function t(a,b,c,d){for(var e,f=a.display.showingFrom,g=a.display.showingTo,h=o(a.display,a.doc,c),i=!0;;i=!1){var j=a.display.scroller.clientWidth;if(!u(a,b,h,d))break;if(e=!0,b=[],C(a),n(a),i&&a.options.lineWrapping&&j!=a.display.scroller.clientWidth)d=!0;else if(d=!1,c&&(c=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,"number"==typeof c?c:c.top)),h=o(a.display,a.doc,c),h.from>=a.display.showingFrom&&h.to<=a.display.showingTo)break}return e&&(Qc(a,"update",a),(a.display.showingFrom!=f||a.display.showingTo!=g)&&Qc(a,"viewportChange",a,a.display.showingFrom,a.display.showingTo)),e}function u(a,b,c,d){var e=a.display,f=a.doc;if(!e.wrapper.clientWidth)return e.showingFrom=e.showingTo=f.first,void(e.viewOffset=0);if(!(!d&&0==b.length&&c.from>e.showingFrom&&c.to<e.showingTo)){q(a)&&(b=[{from:f.first,to:f.first+f.size}]);var g=e.sizer.style.marginLeft=e.gutters.offsetWidth+"px";e.scrollbarH.style.left=a.options.fixedGutter?g:"0";var h=1/0;if(a.options.lineNumbers)for(var i=0;i<b.length;++i)b[i].diff&&b[i].from<h&&(h=b[i].from);var j=f.first+f.size,k=Math.max(c.from-a.options.viewportMargin,f.first),l=Math.min(j,c.to+a.options.viewportMargin);if(e.showingFrom<k&&k-e.showingFrom<20&&(k=Math.max(f.first,e.showingFrom)),e.showingTo>l&&e.showingTo-l<20&&(l=Math.min(j,e.showingTo)),Xd)for(k=rc(Pb(f,nc(f,k)));j>l&&Qb(f,nc(f,l));)++l;var m=[{from:Math.max(e.showingFrom,f.first),to:Math.min(e.showingTo,j)}];if(m=m[0].from>=m[0].to?[]:x(m,b),Xd)for(var i=0;i<m.length;++i)for(var n,o=m[i];n=Ob(nc(f,o.to-1));){var p=n.find().from.line;if(!(p>o.from)){m.splice(i--,1);break}o.to=p}for(var r=0,i=0;i<m.length;++i){var o=m[i];o.from<k&&(o.from=k),o.to>l&&(o.to=l),o.from>=o.to?m.splice(i--,1):r+=o.to-o.from}if(!d&&r==l-k&&k==e.showingFrom&&l==e.showingTo)return void w(a);m.sort(function(a,b){return a.from-b.from});try{var s=document.activeElement}catch(t){}.7*(l-k)>r&&(e.lineDiv.style.display="none"),z(a,k,l,m,h),e.lineDiv.style.display="",s&&document.activeElement!=s&&s.offsetHeight&&s.focus();var u=k!=e.showingFrom||l!=e.showingTo||e.lastSizeC!=e.wrapper.clientHeight;return u&&(e.lastSizeC=e.wrapper.clientHeight,G(a,400)),e.showingFrom=k,e.showingTo=l,v(a),w(a),!0}}function v(a){for(var b,c=a.display,d=c.lineDiv.offsetTop,e=c.lineDiv.firstChild;e;e=e.nextSibling)if(e.lineObj){if(Bd){var f=e.offsetTop+e.offsetHeight;b=f-d,d=f}else{var g=jd(e);b=g.bottom-g.top}var h=e.lineObj.height-b;if(2>b&&(b=ca(c)),h>.001||-.001>h){qc(e.lineObj,b);var i=e.lineObj.widgets;if(i)for(var j=0;j<i.length;++j)i[j].height=i[j].node.offsetHeight}}}function w(a){var b=a.display.viewOffset=tc(a,nc(a.doc,a.display.showingFrom));a.display.mover.style.top=b+"px"}function x(a,b){for(var c=0,d=b.length||0;d>c;++c){for(var e=b[c],f=[],g=e.diff||0,h=0,i=a.length;i>h;++h){var j=a[h];e.to<=j.from&&e.diff?f.push({from:j.from+g,to:j.to+g}):e.to<=j.from||e.from>=j.to?f.push(j):(e.from>j.from&&f.push({from:j.from,to:e.from}),e.to<j.to&&f.push({from:e.to+g,to:j.to+g}))}a=f}return a}function y(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:s(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function z(a,b,c,d,e){function f(b){var c=b.nextSibling;return Dd&&Od&&a.display.currentWheelTarget==b?(b.style.display="none",b.lineObj=null):b.parentNode.removeChild(b),c}var g=y(a),h=a.display,i=a.options.lineNumbers;d.length||Dd&&a.display.currentWheelTarget||gd(h.lineDiv);var j=h.lineDiv,k=j.firstChild,l=d.shift(),m=b;for(a.doc.iter(b,c,function(b){if(l&&l.to==m&&(l=d.shift()),Qb(a.doc,b)){if(0!=b.height&&qc(b,0),b.widgets&&k&&k.previousSibling)for(var c=0;c<b.widgets.length;++c){var h=b.widgets[c];if(h.showIfHidden){var n=k.previousSibling;if(/pre/i.test(n.nodeName)){var o=fd("div",null,null,"position: relative");n.parentNode.replaceChild(o,n),o.appendChild(n),n=o}var p=n.appendChild(fd("div",[h.node],"CodeMirror-linewidget"));h.handleMouseEvents||(p.ignoreEvents=!0),B(h,p,n,g)}}}else if(l&&l.from<=m&&l.to>m){for(;k.lineObj!=b;)k=f(k);i&&m>=e&&k.lineNumber&&id(k.lineNumber,r(a.options,m)),k=k.nextSibling}else{if(b.widgets)for(var q,s=0,t=k;t&&20>s;++s,t=t.nextSibling)if(t.lineObj==b&&/div/i.test(t.nodeName)){q=t;break}var u=A(a,b,m,g,q);if(u!=q)j.insertBefore(u,k);else{for(;k!=q;)k=f(k);k=k.nextSibling}u.lineObj=b}++m});k;)k=f(k)}function A(a,b,c,d,e){var f,g=cc(a,b),h=g.pre,i=b.gutterMarkers,j=a.display,k=g.bgClass?g.bgClass+" "+(b.bgClass||""):b.bgClass;if(!(a.options.lineNumbers||i||k||b.wrapClass||b.widgets))return h;if(e){e.alignable=null;for(var l,m=!0,n=0,o=null,p=e.firstChild;p;p=l)if(l=p.nextSibling,/\bCodeMirror-linewidget\b/.test(p.className)){for(var q=0;q<b.widgets.length;++q){var s=b.widgets[q];if(s.node==p.firstChild){s.above||o||(o=p),B(s,p,e,d),++n;break}}if(q==b.widgets.length){m=!1;break}}else e.removeChild(p);e.insertBefore(h,o),m&&n==b.widgets.length&&(f=e,e.className=b.wrapClass||"")}if(f||(f=fd("div",null,b.wrapClass,"position: relative"),f.appendChild(h)),k&&f.insertBefore(fd("div",null,k+" CodeMirror-linebackground"),f.firstChild),a.options.lineNumbers||i){var t=f.insertBefore(fd("div",null,null,"position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),f.firstChild);if(a.options.fixedGutter&&(f.alignable||(f.alignable=[])).push(t),!a.options.lineNumbers||i&&i["CodeMirror-linenumbers"]||(f.lineNumber=t.appendChild(fd("div",r(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+j.lineNumInnerWidth+"px"))),i)for(var u=0;u<a.options.gutters.length;++u){var v=a.options.gutters[u],w=i.hasOwnProperty(v)&&i[v];w&&t.appendChild(fd("div",[w],"CodeMirror-gutter-elt","left: "+d.gutterLeft[v]+"px; width: "+d.gutterWidth[v]+"px"))}}if(Bd&&(f.style.zIndex=2),b.widgets&&f!=e)for(var q=0,x=b.widgets;q<x.length;++q){var s=x[q],y=fd("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||(y.ignoreEvents=!0),B(s,y,f,d),s.above?f.insertBefore(y,a.options.lineNumbers&&0!=b.height?t:h):f.appendChild(y),Qc(s,"redraw")}return f}function B(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function C(a){var b=a.display,c=Wa(a.doc.sel.from,a.doc.sel.to);if(c||a.options.showCursorWhenSelecting?D(a):b.cursor.style.display=b.otherCursor.style.display="none",c?b.selectionDiv.style.display="none":E(a),a.options.moveInputWithCursor){var d=$(a,a.doc.sel.head,"div"),e=jd(b.wrapper),f=jd(b.lineDiv);b.inputDiv.style.top=Math.max(0,Math.min(b.wrapper.clientHeight-10,d.top+f.top-e.top))+"px",b.inputDiv.style.left=Math.max(0,Math.min(b.wrapper.clientWidth-10,d.left+f.left-e.left))+"px"}}function D(a){var b=a.display,c=$(a,a.doc.sel.head,"div");b.cursor.style.left=c.left+"px",b.cursor.style.top=c.top+"px",b.cursor.style.height=Math.max(0,c.bottom-c.top)*a.options.cursorHeight+"px",b.cursor.style.display="",c.other?(b.otherCursor.style.display="",b.otherCursor.style.left=c.other.left+"px",b.otherCursor.style.top=c.other.top+"px",b.otherCursor.style.height=.85*(c.other.bottom-c.other.top)+"px"):b.otherCursor.style.display="none"}function E(a){function b(a,b,c,d){0>b&&(b=0),g.appendChild(fd("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?h-a:c)+"px; height: "+(d-b)+"px"))}function c(c,d,f){function g(b,d){return Z(a,Va(c,b),"div",l,d)}var j,k,l=nc(e,c),m=l.text.length;return nd(uc(l),d||0,null==f?m:f,function(a,c,e){var l,n,o,p=g(a,"left");if(a==c)l=p,n=o=p.left;else{if(l=g(c-1,"right"),"rtl"==e){var q=p;p=l,l=q}n=p.left,o=l.right}null==d&&0==a&&(n=i),l.top-p.top>3&&(b(n,p.top,null,p.bottom),n=i,p.bottom<l.top&&b(n,p.bottom,null,l.top)),null==f&&c==m&&(o=h),(!j||p.top<j.top||p.top==j.top&&p.left<j.left)&&(j=p),(!k||l.bottom>k.bottom||l.bottom==k.bottom&&l.right>k.right)&&(k=l),i+1>n&&(n=i),b(n,l.top,o-n,l.bottom)}),{start:j,end:k}}var d=a.display,e=a.doc,f=a.doc.sel,g=document.createDocumentFragment(),h=d.lineSpace.offsetWidth,i=M(a.display);if(f.from.line==f.to.line)c(f.from.line,f.from.ch,f.to.ch);else{var j=nc(e,f.from.line),k=nc(e,f.to.line),l=Pb(e,j)==Pb(e,k),m=c(f.from.line,f.from.ch,l?j.text.length:null).end,n=c(f.to.line,l?0:null,f.to.ch).start;l&&(m.top<n.top-2?(b(m.right,m.top,null,m.bottom),b(i,n.top,n.left,n.bottom)):b(m.right,m.top,n.left-m.right,m.bottom)),m.bottom<n.top&&b(i,m.bottom,null,n.top)}hd(d.selectionDiv,g),d.selectionDiv.style.display=""}function F(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursor.style.visibility=b.otherCursor.style.visibility="",a.options.cursorBlinkRate>0&&(b.blinker=setInterval(function(){b.cursor.style.visibility=b.otherCursor.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate))}}function G(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.showingTo&&a.state.highlight.set(b,cd(H,a))}function H(a){var b=a.doc;if(b.frontier<b.first&&(b.frontier=b.first),!(b.frontier>=a.display.showingTo)){var c,d=+new Date+a.options.workTime,e=tb(b.mode,J(a,b.frontier)),f=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.showingTo+500),function(g){if(b.frontier>=a.display.showingFrom){var h=g.styles;g.styles=$b(a,g,e);for(var i=!h||h.length!=g.styles.length,j=0;!i&&j<h.length;++j)i=h[j]!=g.styles[j];i&&(c&&c.end==b.frontier?c.end++:f.push(c={start:b.frontier,end:b.frontier+1})),g.stateAfter=tb(b.mode,e)}else ac(a,g,e),g.stateAfter=b.frontier%5==0?tb(b.mode,e):null;return++b.frontier,+new Date>d?(G(a,a.options.workDelay),!0):void 0}),f.length&&ga(a,function(){for(var a=0;a<f.length;++a)ja(this,f[a].start,f[a].end)})()}}function I(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=nc(f,h-1);if(i.stateAfter&&(!c||h<=f.frontier))return h;var j=Wc(i.text,null,a.options.tabSize);(null==e||d>j)&&(e=h-1,d=j)}return e}function J(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=I(a,b,c),g=f>d.first&&nc(d,f-1).stateAfter;return g=g?tb(d.mode,g):ub(d.mode),d.iter(f,b,function(c){ac(a,c,g);var h=f==b-1||f%5==0||f>=e.showingFrom&&f<e.showingTo;c.stateAfter=h?tb(d.mode,g):null,++f}),c&&(d.frontier=f),g}function K(a){return a.lineSpace.offsetTop}function L(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function M(a){var b=hd(a.measure,fd("pre",null,null,"text-align: left")).appendChild(fd("span","x"));return b.offsetLeft}function N(a,b,c,d,e){var f=-1;if(d=d||Q(a,b),d.crude){var g=d.left+c*d.width;return{left:g,right:g+d.width,top:d.top,bottom:d.bottom}}for(var h=c;;h+=f){var i=d[h];if(i)break;0>f&&0==h&&(f=1)}return e=h>c?"left":c>h?"right":e,"left"==e&&i.leftSide?i=i.leftSide:"right"==e&&i.rightSide&&(i=i.rightSide),{left:c>h?i.right:i.left,right:h>c?i.left:i.right,top:i.top,bottom:i.bottom}}function O(a,b){for(var c=a.display.measureLineCache,d=0;d<c.length;++d){var e=c[d];if(e.text==b.text&&e.markedSpans==b.markedSpans&&a.display.scroller.clientWidth==e.width&&e.classes==b.textClass+"|"+b.wrapClass)return e}}function P(a,b){var c=O(a,b);c&&(c.text=c.measure=c.markedSpans=null)}function Q(a,b){var c=O(a,b);if(c)return c.measure;var d=R(a,b),e=a.display.measureLineCache,f={text:b.text,width:a.display.scroller.clientWidth,markedSpans:b.markedSpans,measure:d,classes:b.textClass+"|"+b.wrapClass};return 16==e.length?e[++a.display.measureLineCachePos%16]=f:e.push(f),d}function R(a,b){function c(a){var b=a.top-o.top,c=a.bottom-o.top;c>r&&(c=r),0>b&&(b=0);for(var d=p.length-2;d>=0;d-=2){var e=p[d],f=p[d+1];if(!(e>c||b>f)&&(b>=e&&f>=c||e>=b&&c>=f||Math.min(c,f)-Math.max(b,e)>=c-b>>1)){p[d]=Math.min(b,e),p[d+1]=Math.max(c,f);break}}return 0>d&&(d=p.length,p.push(b,c)),{left:a.left-o.left,right:a.right-o.left,top:d,bottom:null}}function d(a){a.bottom=p[a.top+1],a.top=p[a.top]}if(!a.options.lineWrapping&&b.text.length>=a.options.crudeMeasuringFrom)return S(a,b);var e=a.display,f=bd(b.text.length),g=cc(a,b,f,!0).pre;if(Ad&&!Bd&&!a.options.lineWrapping&&g.childNodes.length>100){for(var h=document.createDocumentFragment(),i=10,j=g.childNodes.length,k=0,l=Math.ceil(j/i);l>k;++k){for(var m=fd("div",null,null,"display: inline-block"),n=0;i>n&&j;++n)m.appendChild(g.firstChild),--j;h.appendChild(m)}g.appendChild(h)}hd(e.measure,g);var o=jd(e.lineDiv),p=[],q=bd(b.text.length),r=g.offsetHeight;Cd&&e.measure.first!=g&&hd(e.measure,g);for(var s,k=0;k<f.length;++k)if(s=f[k]){var t=s,u=null;if(/\bCodeMirror-widget\b/.test(s.className)&&s.getClientRects){1==s.firstChild.nodeType&&(t=s.firstChild);var v=t.getClientRects();v.length>1&&(u=q[k]=c(v[0]),u.rightSide=c(v[v.length-1]))}u||(u=q[k]=c(jd(t))),s.measureRight&&(u.right=jd(s.measureRight).left),s.leftSide&&(u.leftSide=c(jd(s.leftSide)))}gd(a.display.measure);for(var s,k=0;k<q.length;++k)(s=q[k])&&(d(s),s.leftSide&&d(s.leftSide),s.rightSide&&d(s.rightSide));return q}function S(a,b){var c=new pe(b.text.slice(0,100),null);b.textClass&&(c.textClass=b.textClass);var d=R(a,c),e=N(a,c,0,d,"left"),f=N(a,c,99,d,"right");return{crude:!0,top:e.top,left:e.left,bottom:e.bottom,width:(f.right-e.left)/100}}function T(a,b){var c=!1;if(b.markedSpans)for(var d=0;d<b.markedSpans;++d){var e=b.markedSpans[d];!e.collapsed||null!=e.to&&e.to!=b.text.length||(c=!0)}var f=!c&&O(a,b);if(f||b.text.length>=a.options.crudeMeasuringFrom)return N(a,b,b.text.length,f&&f.measure,"right").right;var g=cc(a,b,null,!0).pre,h=g.appendChild(md(a.display.measure));return hd(a.display.measure,g),jd(h).right-jd(a.display.lineDiv).left}function U(a){a.display.measureLineCache.length=a.display.measureLineCachePos=0,a.display.cachedCharWidth=a.display.cachedTextHeight=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function V(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function W(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function X(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Vb(b.widgets[e]);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=tc(a,b);if("local"==d?g+=K(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=jd(a.display.lineSpace);g+=h.top+("window"==d?0:W());var i=h.left+("window"==d?0:V());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function Y(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=V(),e-=W();else if("local"==c||!c){var f=jd(a.display.sizer);d+=f.left,e+=f.top}var g=jd(a.display.lineSpace);return{left:d-g.left,top:e-g.top}}function Z(a,b,c,d,e){return d||(d=nc(a.doc,b.line)),X(a,d,N(a,d,b.ch,null,e),c)}function $(a,b,c,d,e){function f(b,f){var g=N(a,d,b,e,f?"right":"left");return f?g.left=g.right:g.right=g.left,X(a,d,g,c)}function g(a,b){var c=h[b],d=c.level%2;return a==od(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=pd(c)-(c.level%2?0:1),d=!0):a==pd(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=od(c)-c.level%2,d=!1),d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||nc(a.doc,b.line),e||(e=Q(a,d));var h=uc(d),i=b.ch;if(!h)return f(i);var j=vd(h,i),k=g(i,j);return null!=Ke&&(k.other=g(i,Ke)),k}function _(a,b,c,d){var e=new Va(a,b);return e.xRel=d,c&&(e.outside=!0),e}function aa(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return _(d.first,0,!0,-1);var e=sc(d,c),f=d.first+d.size-1;if(e>f)return _(d.first+d.size-1,nc(d,f).text.length,!0,1);for(0>b&&(b=0);;){var g=nc(d,e),h=ba(a,g,e,b,c),i=Ob(g),j=i&&i.find();if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=j.to.line}}function ba(a,b,c,d,e){function f(d){var e=$(a,Va(c,d),"line",b,j);return h=!0,g>e.bottom?e.left-i:g<e.top?e.left+i:(h=!1,e.left)}var g=e-tc(a,b),h=!1,i=2*a.display.wrapper.clientWidth,j=Q(a,b),k=uc(b),l=b.text.length,m=qd(b),n=rd(b),o=f(m),p=h,q=f(n),r=h;if(d>q)return _(c,n,r,1);for(;;){if(k?n==m||n==xd(b,m,1):1>=n-m){for(var s=o>d||q-d>=d-o?m:n,t=d-(s==m?o:q);Ce.test(b.text.charAt(s));)++s;var u=_(c,s,s==m?p:r,0>t?-1:t?1:0);return u}var v=Math.ceil(l/2),w=m+v;if(k){w=m;for(var x=0;v>x;++x)w=xd(b,w,1)}var y=f(w);y>d?(n=w,q=y,(r=h)&&(q+=1e3),l=v):(m=w,o=y,p=h,l-=v)}}function ca(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Rd){Rd=fd("pre");for(var b=0;49>b;++b)Rd.appendChild(document.createTextNode("x")),Rd.appendChild(fd("br"));Rd.appendChild(document.createTextNode("x"))}hd(a.measure,Rd);var c=Rd.offsetHeight/50;return c>3&&(a.cachedTextHeight=c),gd(a.measure),c||1}function da(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=fd("span","x"),c=fd("pre",[b]);hd(a.measure,c);var d=b.offsetWidth;return d>2&&(a.cachedCharWidth=d),d||10}function ea(a){a.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Yd},xe++||(we=[])}function fa(a){var b=a.curOp,c=a.doc,d=a.display;if(a.curOp=null,b.updateMaxLine&&l(a),d.maxLineChanged&&!a.options.lineWrapping&&d.maxLine){var e=T(a,d.maxLine);d.sizer.style.minWidth=Math.max(0,e+3+ye)+"px",d.maxLineChanged=!1;var f=Math.max(0,d.sizer.offsetLeft+d.sizer.offsetWidth-d.scroller.clientWidth);f<c.scrollLeft&&!b.updateScrollPos&&Aa(a,Math.min(d.scroller.scrollLeft,f),!0)}var g,h;if(b.updateScrollPos)g=b.updateScrollPos;else if(b.selectionChanged&&d.scroller.clientHeight){var i=$(a,c.sel.head);g=jb(a,i.left,i.top,i.left,i.bottom)}(b.changes.length||b.forceUpdate||g&&null!=g.scrollTop)&&(h=t(a,b.changes,g&&g.scrollTop,b.forceUpdate),a.display.scroller.offsetHeight&&(a.doc.scrollTop=a.display.scroller.scrollTop)),!h&&b.selectionChanged&&C(a),b.updateScrollPos?(d.scroller.scrollTop=d.scrollbarV.scrollTop=c.scrollTop=g.scrollTop,d.scroller.scrollLeft=d.scrollbarH.scrollLeft=c.scrollLeft=g.scrollLeft,p(a),b.scrollToPos&&hb(a,$a(a.doc,b.scrollToPos.from),$a(a.doc,b.scrollToPos.to),b.scrollToPos.margin)):g&&gb(a),b.selectionChanged&&F(a),a.state.focused&&b.updateInput&&na(a,b.userSelChange);var j=b.maybeHiddenMarkers,k=b.maybeUnhiddenMarkers;if(j)for(var m=0;m<j.length;++m)j[m].lines.length||Pc(j[m],"hide");if(k)for(var m=0;m<k.length;++m)k[m].lines.length&&Pc(k[m],"unhide");var n;if(--xe||(n=we,we=null),b.textChanged&&Pc(a,"change",a,b.textChanged),b.cursorActivity&&Pc(a,"cursorActivity",a),n)for(var m=0;m<n.length;++m)n[m]()}function ga(a,b){return function(){var c=a||this,d=!c.curOp;d&&ea(c);try{var e=b.apply(c,arguments)}finally{d&&fa(c)}return e}}function ha(a){return function(){var b,c=this.cm&&!this.cm.curOp;c&&ea(this.cm);try{b=a.apply(this,arguments)}finally{c&&fa(this.cm)}return b}}function ia(a,b){var c,d=!a.curOp;d&&ea(a);try{c=b()}finally{d&&fa(a)}return c}function ja(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),a.curOp.changes.push({from:b,to:c,diff:d})}function ka(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){ma(a),a.state.focused&&ka(a)})}function la(a){function b(){var d=ma(a);d||c?(a.display.pollingFast=!1,ka(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0,a.display.poll.set(20,b)}function ma(a){var b=a.display.input,c=a.display.prevInput,d=a.doc,e=d.sel;if(!a.state.focused||He(b)||pa(a)||a.state.disableInput)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var f=b.value;if(f==c&&Wa(e.from,e.to))return!1;if(Ad&&!Cd&&a.display.inputHasSelection===f)return na(a,!0),!1;var g=!a.curOp;g&&ea(a),e.shift=!1;for(var h=0,i=Math.min(c.length,f.length);i>h&&c.charCodeAt(h)==f.charCodeAt(h);)++h;var j=e.from,k=e.to;h<c.length?j=Va(j.line,j.ch-(c.length-h)):a.state.overwrite&&Wa(j,k)&&!a.state.pasteIncoming&&(k=Va(k.line,Math.min(nc(d,k.line).text.length,k.ch+(f.length-h))));var l=a.curOp.updateInput,m={from:j,to:k,text:Ge(f.slice(h)),origin:a.state.pasteIncoming?"paste":"+input"};return Oa(a.doc,m,"end"),a.curOp.updateInput=l,Qc(a,"inputRead",a,m),f.length>1e3||f.indexOf("\n")>-1?b.value=a.display.prevInput="":a.display.prevInput=f,g&&fa(a),a.state.pasteIncoming=!1,!0}function na(a,b){var c,d,e=a.doc;if(Wa(e.sel.from,e.sel.to))b&&(a.display.prevInput=a.display.input.value="",Ad&&!Cd&&(a.display.inputHasSelection=null));else{a.display.prevInput="",c=Ie&&(e.sel.to.line-e.sel.from.line>100||(d=a.getSelection()).length>1e3);var f=c?"-":d||a.getSelection();a.display.input.value=f,a.state.focused&&Zc(a.display.input),Ad&&!Cd&&(a.display.inputHasSelection=f)}a.display.inaccurateSelection=c}function oa(a){"nocursor"==a.options.readOnly||Nd&&document.activeElement==a.display.input||a.display.input.focus()}function pa(a){return a.options.readOnly||a.doc.cantEdit}function qa(a){function b(){a.state.focused&&setTimeout(cd(oa,a),0)}function c(){null==h&&(h=setTimeout(function(){h=null,g.cachedCharWidth=g.cachedTextHeight=Ee=null,U(a),ia(a,cd(ja,a))},100))}function d(){for(var a=g.wrapper.parentNode;a&&a!=document.body;a=a.parentNode);a?setTimeout(d,5e3):Oc(window,"resize",c)}function e(b){Rc(a,b)||a.options.onDragEvent&&a.options.onDragEvent(a,Gc(b))||Kc(b)}function f(){g.inaccurateSelection&&(g.prevInput="",g.inaccurateSelection=!1,g.input.value=a.getSelection(),Zc(g.input))}var g=a.display;Nc(g.scroller,"mousedown",ga(a,ta)),Ad?Nc(g.scroller,"dblclick",ga(a,function(b){if(!Rc(a,b)){var c=sa(a,b);if(c&&!wa(a,b)&&!ra(a.display,b)){Hc(b);var d=qb(nc(a.doc,c.line).text,c);bb(a.doc,d.from,d.to)}}})):Nc(g.scroller,"dblclick",function(b){Rc(a,b)||Hc(b)}),Nc(g.lineSpace,"selectstart",function(a){ra(g,a)||Hc(a)}),Vd||Nc(g.scroller,"contextmenu",function(b){Ka(a,b)}),Nc(g.scroller,"scroll",function(){g.scroller.clientHeight&&(za(a,g.scroller.scrollTop),Aa(a,g.scroller.scrollLeft,!0),Pc(a,"scroll",a))}),Nc(g.scrollbarV,"scroll",function(){g.scroller.clientHeight&&za(a,g.scrollbarV.scrollTop)}),Nc(g.scrollbarH,"scroll",function(){g.scroller.clientHeight&&Aa(a,g.scrollbarH.scrollLeft)}),Nc(g.scroller,"mousewheel",function(b){Ba(a,b)}),Nc(g.scroller,"DOMMouseScroll",function(b){Ba(a,b)}),Nc(g.scrollbarH,"mousedown",b),Nc(g.scrollbarV,"mousedown",b),Nc(g.wrapper,"scroll",function(){g.wrapper.scrollTop=g.wrapper.scrollLeft=0});var h;Nc(window,"resize",c),setTimeout(d,5e3),Nc(g.input,"keyup",ga(a,function(b){Rc(a,b)||a.options.onKeyEvent&&a.options.onKeyEvent(a,Gc(b))||16==b.keyCode&&(a.doc.sel.shift=!1)})),Nc(g.input,"input",function(){Ad&&!Cd&&a.display.inputHasSelection&&(a.display.inputHasSelection=null),la(a)}),Nc(g.input,"keydown",ga(a,Ga)),Nc(g.input,"keypress",ga(a,Ha)),Nc(g.input,"focus",cd(Ia,a)),Nc(g.input,"blur",cd(Ja,a)),a.options.dragDrop&&(Nc(g.scroller,"dragstart",function(b){ya(a,b)}),Nc(g.scroller,"dragenter",e),Nc(g.scroller,"dragover",e),Nc(g.scroller,"drop",ga(a,xa))),Nc(g.scroller,"paste",function(b){ra(g,b)||(oa(a),la(a))}),Nc(g.input,"paste",function(){if(Dd&&!a.state.fakedLastChar&&!(new Date-a.state.lastMiddleDown<200)){var b=g.input.selectionStart,c=g.input.selectionEnd;g.input.value+="$",g.input.selectionStart=b,g.input.selectionEnd=c,a.state.fakedLastChar=!0}a.state.pasteIncoming=!0,la(a)}),Nc(g.input,"cut",f),Nc(g.input,"copy",f),Id&&Nc(g.sizer,"mouseup",function(){document.activeElement==g.input&&g.input.blur(),oa(a)})}function ra(a,b){for(var c=Lc(b);c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function sa(a,b,c){var d=a.display;if(!c){var e=Lc(b);if(e==d.scrollbarH||e==d.scrollbarH.firstChild||e==d.scrollbarV||e==d.scrollbarV.firstChild||e==d.scrollbarFiller||e==d.gutterFiller)return null}var f,g,h=jd(d.lineSpace);try{f=b.clientX,g=b.clientY}catch(b){return null}return aa(a,f-h.left,g-h.top)}function ta(a){function b(a){if(!Wa(r,a)){if(r=a,"single"==k)return void bb(e.doc,$a(g,i),a);if(p=$a(g,p),q=$a(g,q),"double"==k){var b=qb(nc(g,a.line).text,a);Xa(a,p)?bb(e.doc,b.from,q):bb(e.doc,p,b.to)}else"triple"==k&&(Xa(a,p)?bb(e.doc,q,$a(g,Va(a.line,0))):bb(e.doc,p,$a(g,Va(a.line+1,0))))}}function c(a){var d=++t,h=sa(e,a,!0);if(h)if(Wa(h,m)){var i=a.clientY<s.top?-20:a.clientY>s.bottom?20:0;i&&setTimeout(ga(e,function(){t==d&&(f.scroller.scrollTop+=i,c(a))}),50)}else{e.state.focused||Ia(e),m=h,b(h);var j=o(f,g);(h.line>=j.to||h.line<j.from)&&setTimeout(ga(e,function(){t==d&&c(a)}),150)}}function d(a){t=1/0,Hc(a),oa(e),Oc(document,"mousemove",u),Oc(document,"mouseup",v)}if(!Rc(this,a)){var e=this,f=e.display,g=e.doc,h=g.sel;if(h.shift=a.shiftKey,ra(f,a))return void(Dd||(f.scroller.draggable=!1,setTimeout(function(){f.scroller.draggable=!0},100)));if(!wa(e,a)){var i=sa(e,a);switch(Mc(a)){case 3:return void(Vd&&Ka.call(e,e,a));case 2:return Dd&&(e.state.lastMiddleDown=+new Date),i&&bb(e.doc,i),setTimeout(cd(oa,e),20),void Hc(a)}if(!i)return void(Lc(a)==f.scroller&&Hc(a));e.state.focused||Ia(e);var j=+new Date,k="single";if(Td&&Td.time>j-400&&Wa(Td.pos,i))k="triple",Hc(a),setTimeout(cd(oa,e),20),rb(e,i.line);else if(Sd&&Sd.time>j-400&&Wa(Sd.pos,i)){k="double",Td={time:j,pos:i},Hc(a);var l=qb(nc(g,i.line).text,i);bb(e.doc,l.from,l.to)}else Sd={time:j,pos:i};var m=i;if(e.options.dragDrop&&De&&!pa(e)&&!Wa(h.from,h.to)&&!Xa(i,h.from)&&!Xa(h.to,i)&&"single"==k){var n=ga(e,function(b){Dd&&(f.scroller.draggable=!1),e.state.draggingText=!1,Oc(document,"mouseup",n),Oc(f.scroller,"drop",n),Math.abs(a.clientX-b.clientX)+Math.abs(a.clientY-b.clientY)<10&&(Hc(b),bb(e.doc,i),oa(e))});return Dd&&(f.scroller.draggable=!0),e.state.draggingText=n,f.scroller.dragDrop&&f.scroller.dragDrop(),Nc(document,"mouseup",n),void Nc(f.scroller,"drop",n)}Hc(a),"single"==k&&bb(e.doc,$a(g,i));var p=h.from,q=h.to,r=i,s=jd(f.wrapper),t=0,u=ga(e,function(a){Ad||Mc(a)?c(a):d(a)}),v=ga(e,d);Nc(document,"mousemove",u),Nc(document,"mouseup",v)}}}function ua(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(b){return!1}if(f>=Math.floor(jd(a.display.gutters).right))return!1;d&&Hc(b);var h=a.display,i=jd(h.lineDiv);if(g>i.bottom||!Tc(a,c))return Jc(b);g-=i.top-h.viewOffset;for(var j=0;j<a.options.gutters.length;++j){var k=h.gutters.childNodes[j];if(k&&jd(k).right>=f){var l=sc(a.doc,g),m=a.options.gutters[j];return e(a,c,a,l,m,b),Jc(b)}}}function va(a,b){return Tc(a,"gutterContextMenu")?ua(a,b,"gutterContextMenu",!1,Pc):!1}function wa(a,b){return ua(a,b,"gutterClick",!0,Qc)}function xa(a){var b=this;if(!(Rc(b,a)||ra(b.display,a)||b.options.onDragEvent&&b.options.onDragEvent(b,Gc(a)))){Hc(a),Ad&&(Zd=+new Date);var c=sa(b,a,!0),d=a.dataTransfer.files;if(c&&!pa(b))if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){var h=new FileReader;h.onload=function(){f[d]=h.result,++g==e&&(c=$a(b.doc,c),Oa(b.doc,{from:c,to:c,text:Ge(f.join("\n")),origin:"paste"},"around"))},h.readAsText(a)},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&!Xa(c,b.doc.sel.from)&&!Xa(b.doc.sel.to,c))return b.state.draggingText(a),void setTimeout(cd(oa,b),20);try{var f=a.dataTransfer.getData("Text");if(f){var j=b.doc.sel.from,k=b.doc.sel.to;db(b.doc,c,c),b.state.draggingText&&Ua(b.doc,"",j,k,"paste"),b.replaceSelection(f,null,"paste"),oa(b),Ia(b)}}catch(a){}}}}function ya(a,b){if(Ad&&(!a.state.draggingText||+new Date-Zd<100))return void Kc(b);if(!Rc(a,b)&&!ra(a.display,b)){var c=a.getSelection();if(b.dataTransfer.setData("Text",c),b.dataTransfer.setDragImage&&!Hd){var d=fd("img",null,null,"position: fixed; left: 0; top: 0;");d.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",Gd&&(d.width=d.height=1,a.display.wrapper.appendChild(d),d._top=d.offsetTop),b.dataTransfer.setDragImage(d,0,0),Gd&&d.parentNode.removeChild(d)}}}function za(a,b){Math.abs(a.doc.scrollTop-b)<2||(a.doc.scrollTop=b,zd||t(a,[],b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),zd&&t(a,[]),G(a,100))}function Aa(a,b,c){(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,p(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function Ba(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail),null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>f.clientHeight){if(d&&Od&&Dd)for(var g=b.target;g!=f;g=g.parentNode)if(g.lineObj){a.display.currentWheelTarget=g;break}if(c&&!zd&&!Gd&&null!=_d)return d&&za(a,Math.max(0,Math.min(f.scrollTop+d*_d,f.scrollHeight-f.clientHeight))),Aa(a,Math.max(0,Math.min(f.scrollLeft+c*_d,f.scrollWidth-f.clientWidth))),Hc(b),void(e.wheelStartX=null);if(d&&null!=_d){var h=d*_d,i=a.doc.scrollTop,j=i+e.wrapper.clientHeight;0>h?i=Math.max(0,i+h-50):j=Math.min(a.doc.height,j+h+50),t(a,[],{top:i,bottom:j})}20>$d&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,c=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null,c&&(_d=(_d*$d+c)/($d+1),++$d)}},200)):(e.wheelDX+=c,e.wheelDY+=d))}}function Ca(a,b,c){if("string"==typeof b&&(b=me[b],!b))return!1;a.display.pollingFast&&ma(a)&&(a.display.pollingFast=!1);var d=a.doc,e=d.sel.shift,f=!1;try{pa(a)&&(a.state.suppressEdits=!0),c&&(d.sel.shift=!1),f=b(a)!=ze}finally{d.sel.shift=e,a.state.suppressEdits=!1}return f}function Da(a){var b=a.state.keyMaps.slice(0);return a.options.extraKeys&&b.push(a.options.extraKeys),b.push(a.options.keyMap),b}function Ea(a,b){var c=vb(a.options.keyMap),d=c.auto;clearTimeout(ae),d&&!xb(b)&&(ae=setTimeout(function(){vb(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,g(a))},50));var e=yb(b,!0),f=!1;if(!e)return!1;var h=Da(a);return f=b.shiftKey?wb("Shift-"+e,h,function(b){return Ca(a,b,!0)})||wb(e,h,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?Ca(a,b):void 0}):wb(e,h,function(b){return Ca(a,b)}),f&&(Hc(b),F(a),Cd&&(b.oldKeyCode=b.keyCode,b.keyCode=0),Qc(a,"keyHandled",a,e,b)),f}function Fa(a,b,c){var d=wb("'"+c+"'",Da(a),function(b){return Ca(a,b,!0)});return d&&(Hc(b),F(a),Qc(a,"keyHandled",a,"'"+c+"'",b)),d}function Ga(a){var b=this;if(b.state.focused||Ia(b),!(Rc(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Gc(a)))){Ad&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.doc.sel.shift=16==c||a.shiftKey;var d=Ea(b,a);Gd&&(ce=d?c:null,!d&&88==c&&!Ie&&(Od?a.metaKey:a.ctrlKey)&&b.replaceSelection(""))}}function Ha(a){var b=this;if(!(Rc(b,a)||b.options.onKeyEvent&&b.options.onKeyEvent(b,Gc(a)))){var c=a.keyCode,d=a.charCode;if(Gd&&c==ce)return ce=null,void Hc(a);if(!(Gd&&(!a.which||a.which<10)||Id)||!Ea(b,a)){var e=String.fromCharCode(null==d?c:d);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!pa(this)&&this.doc.mode.electricChars.indexOf(e)>-1&&setTimeout(ga(b,function(){mb(b,b.doc.sel.to.line,"smart")}),75),Fa(b,a,e)||(Ad&&!Cd&&(b.display.inputHasSelection=null),la(b))}}}function Ia(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Pc(a,"focus",a),
a.state.focused=!0,-1==a.display.wrapper.className.search(/\bCodeMirror-focused\b/)&&(a.display.wrapper.className+=" CodeMirror-focused"),a.curOp||(na(a,!0),Dd&&setTimeout(cd(na,a,!0),0))),ka(a),F(a))}function Ja(a){a.state.focused&&(Pc(a,"blur",a),a.state.focused=!1,a.display.wrapper.className=a.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.doc.sel.shift=!1)},150)}function Ka(a,b){function c(){if(null!=e.input.selectionStart){var a=e.input.value="â"+(Wa(f.from,f.to)?"":e.input.value);e.prevInput="â",e.input.selectionStart=1,e.input.selectionEnd=a.length}}function d(){if(e.inputDiv.style.position="relative",e.input.style.cssText=j,Cd&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=h),ka(a),null!=e.input.selectionStart){(!Ad||Cd)&&c(),clearTimeout(be);var b=0,d=function(){" "==e.prevInput&&0==e.input.selectionStart?ga(a,me.selectAll)(a):b++<10?be=setTimeout(d,500):na(a)};be=setTimeout(d,200)}}if(!Rc(a,b,"contextmenu")){var e=a.display,f=a.doc.sel;if(!ra(e,b)&&!va(a,b)){var g=sa(a,b),h=e.scroller.scrollTop;if(g&&!Gd){var i=a.options.resetSelectionOnContextMenu;i&&(Wa(f.from,f.to)||Xa(g,f.from)||!Xa(g,f.to))&&ga(a,db)(a.doc,g,g);var j=e.input.style.cssText;if(e.inputDiv.style.position="absolute",e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: white; outline: none;border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",oa(a),na(a,!0),Wa(f.from,f.to)&&(e.input.value=e.prevInput=" "),Ad&&!Cd&&c(),Vd){Kc(b);var k=function(){Oc(window,"mouseup",k),setTimeout(d,20)};Nc(window,"mouseup",k)}else setTimeout(d,50)}}}}function La(a,b,c){if(!Xa(b.from,c))return $a(a,c);var d=b.text.length-1-(b.to.line-b.from.line);if(c.line>b.to.line+d){var e=c.line-d,f=a.first+a.size-1;return e>f?Va(f,nc(a,f).text.length):_a(c,nc(a,e).text.length)}if(c.line==b.to.line+d)return _a(c,Yc(b.text).length+(1==b.text.length?b.from.ch:0)+nc(a,b.to.line).text.length-b.to.ch);var g=c.line-b.from.line;return _a(c,b.text[g].length+(g?0:b.from.ch))}function Ma(a,b,c){if(c&&"object"==typeof c)return{anchor:La(a,b,c.anchor),head:La(a,b,c.head)};if("start"==c)return{anchor:b.from,head:b.from};var d=de(b);if("around"==c)return{anchor:b.from,head:d};if("end"==c)return{anchor:d,head:d};var e=function(a){if(Xa(a,b.from))return a;if(!Xa(b.to,a))return d;var c=a.line+b.text.length-(b.to.line-b.from.line)-1,e=a.ch;return a.line==b.to.line&&(e+=d.ch-b.to.ch),Va(c,e)};return{anchor:e(a.sel.anchor),head:e(a.sel.head)}}function Na(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};return c&&(d.update=function(b,c,d,e){b&&(this.from=$a(a,b)),c&&(this.to=$a(a,c)),d&&(this.text=d),void 0!==e&&(this.origin=e)}),Pc(a,"beforeChange",a,d),a.cm&&Pc(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function Oa(a,b,c,d){if(a.cm){if(!a.cm.curOp)return ga(a.cm,Oa)(a,b,c,d);if(a.cm.state.suppressEdits)return}if(!(Tc(a,"beforeChange")||a.cm&&Tc(a.cm,"beforeChange"))||(b=Na(a,b,!0))){var e=Wd&&!d&&Lb(a,b.from,b.to);if(e){for(var f=e.length-1;f>=1;--f)Pa(a,{from:e[f].from,to:e[f].to,text:[""]});e.length&&Pa(a,{from:e[0].from,to:e[0].to,text:b.text},c)}else Pa(a,b,c)}}function Pa(a,b,c){if(1!=b.text.length||""!=b.text[0]||!Wa(b.from,b.to)){var d=Ma(a,b,c);yc(a,b,d,a.cm?a.cm.curOp.id:NaN),Sa(a,b,d,Jb(a,b));var e=[];lc(a,function(a,c){c||-1!=$c(e,a.history)||(Ec(a.history,b),e.push(a.history)),Sa(a,b,null,Jb(a,b))})}}function Qa(a,b){if(!a.cm||!a.cm.state.suppressEdits){var c=a.history,d=("undo"==b?c.done:c.undone).pop();if(d){var e={changes:[],anchorBefore:d.anchorAfter,headBefore:d.headAfter,anchorAfter:d.anchorBefore,headAfter:d.headBefore,generation:c.generation};("undo"==b?c.undone:c.done).push(e),c.generation=d.generation||++c.maxGeneration;for(var f=Tc(a,"beforeChange")||a.cm&&Tc(a.cm,"beforeChange"),g=d.changes.length-1;g>=0;--g){var h=d.changes[g];if(h.origin=b,f&&!Na(a,h,!1))return void(("undo"==b?c.done:c.undone).length=0);e.changes.push(xc(a,h));var i=g?Ma(a,h,null):{anchor:d.anchorBefore,head:d.headBefore};Sa(a,h,i,Kb(a,h));var j=[];lc(a,function(a,b){b||-1!=$c(j,a.history)||(Ec(a.history,h),j.push(a.history)),Sa(a,h,null,Kb(a,h))})}}}}function Ra(a,b){function c(a){return Va(a.line+b,a.ch)}a.first+=b,a.cm&&ja(a.cm,a.first,a.first,b),a.sel.head=c(a.sel.head),a.sel.anchor=c(a.sel.anchor),a.sel.from=c(a.sel.from),a.sel.to=c(a.sel.to)}function Sa(a,b,c,d){if(a.cm&&!a.cm.curOp)return ga(a.cm,Sa)(a,b,c,d);if(b.to.line<a.first)return void Ra(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Ra(a,e),b={from:Va(a.first,0),to:Va(b.to.line+e,b.to.ch),text:[Yc(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:Va(f,nc(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=oc(a,b.from,b.to),c||(c=Ma(a,b,null)),a.cm?Ta(a.cm,b,d,c):ic(a,b,d,c)}}function Ta(a,b,c,d){var f=a.doc,g=a.display,h=b.from,i=b.to,j=!1,l=h.line;a.options.lineWrapping||(l=rc(Pb(f,nc(f,h.line))),f.iter(l,i.line+1,function(a){return a==g.maxLine?(j=!0,!0):void 0})),Xa(f.sel.head,b.from)||Xa(b.to,f.sel.head)||(a.curOp.cursorActivity=!0),ic(f,b,c,d,e(a)),a.options.lineWrapping||(f.iter(l,h.line+b.text.length,function(a){var b=k(f,a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,j=!1)}),j&&(a.curOp.updateMaxLine=!0)),f.frontier=Math.min(f.frontier,h.line),G(a,400);var m=b.text.length-(i.line-h.line)-1;if(ja(a,h.line,i.line+1,m),Tc(a,"change")){var n={from:h,to:i,text:b.text,removed:b.removed,origin:b.origin};if(a.curOp.textChanged){for(var o=a.curOp.textChanged;o.next;o=o.next);o.next=n}else a.curOp.textChanged=n}}function Ua(a,b,c,d,e){if(d||(d=c),Xa(d,c)){var f=d;d=c,c=f}"string"==typeof b&&(b=Ge(b)),Oa(a,{from:c,to:d,text:b,origin:e},null)}function Va(a,b){return this instanceof Va?(this.line=a,void(this.ch=b)):new Va(a,b)}function Wa(a,b){return a.line==b.line&&a.ch==b.ch}function Xa(a,b){return a.line<b.line||a.line==b.line&&a.ch<b.ch}function Ya(a){return Va(a.line,a.ch)}function Za(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function $a(a,b){if(b.line<a.first)return Va(a.first,0);var c=a.first+a.size-1;return b.line>c?Va(c,nc(a,c).text.length):_a(b,nc(a,b.line).text.length)}function _a(a,b){var c=a.ch;return null==c||c>b?Va(a.line,b):0>c?Va(a.line,0):a}function ab(a,b){return b>=a.first&&b<a.first+a.size}function bb(a,b,c,d){if(a.sel.shift||a.sel.extend){var e=a.sel.anchor;if(c){var f=Xa(b,e);f!=Xa(c,e)?(e=b,b=c):f!=Xa(b,c)&&(b=c)}db(a,e,b,d)}else db(a,b,c||b,d);a.cm&&(a.cm.curOp.userSelChange=!0)}function cb(a,b,c){var d={anchor:b,head:c};return Pc(a,"beforeSelectionChange",a,d),a.cm&&Pc(a.cm,"beforeSelectionChange",a.cm,d),d.anchor=$a(a,d.anchor),d.head=$a(a,d.head),d}function db(a,b,c,d,e){if(!e&&Tc(a,"beforeSelectionChange")||a.cm&&Tc(a.cm,"beforeSelectionChange")){var f=cb(a,b,c);c=f.head,b=f.anchor}var g=a.sel;if(g.goalColumn=null,null==d&&(d=Xa(c,g.head)?-1:1),(e||!Wa(b,g.anchor))&&(b=fb(a,b,d,"push"!=e)),(e||!Wa(c,g.head))&&(c=fb(a,c,d,"push"!=e)),!Wa(g.anchor,b)||!Wa(g.head,c)){g.anchor=b,g.head=c;var h=Xa(c,b);g.from=h?c:b,g.to=h?b:c,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=a.cm.curOp.cursorActivity=!0),Qc(a,"cursorActivity",a)}}function eb(a){db(a.doc,a.doc.sel.from,a.doc.sel.to,null,"push")}function fb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=nc(a,f.line);if(h.markedSpans)for(var i=0;i<h.markedSpans.length;++i){var j=h.markedSpans[i],k=j.marker;if((null==j.from||(k.inclusiveLeft?j.from<=f.ch:j.from<f.ch))&&(null==j.to||(k.inclusiveRight?j.to>=f.ch:j.to>f.ch))){if(d&&(Pc(k,"beforeCursorEnter"),k.explicitlyCleared)){if(h.markedSpans){--i;continue}break}if(!k.atomic)continue;var l=k.find()[0>g?"from":"to"];if(Wa(l,f)&&(l.ch+=g,l.ch<0?l=l.line>a.first?$a(a,Va(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?Va(l.line+1,0):null),!l)){if(e)return d?(a.cantEdit=!0,Va(a.first,0)):fb(a,b,c,!0);e=!0,l=b,g=-g}f=l;continue a}}return f}}function gb(a){var b=hb(a,a.doc.sel.head,null,a.options.cursorScrollMargin);if(a.state.focused){var c=a.display,d=jd(c.sizer),e=null;if(b.top+d.top<0?e=!0:b.bottom+d.top>(window.innerHeight||document.documentElement.clientHeight)&&(e=!1),null!=e&&!Ld){var f="none"==c.cursor.style.display;f&&(c.cursor.style.display="",c.cursor.style.left=b.left+"px",c.cursor.style.top=b.top-c.viewOffset+"px"),c.cursor.scrollIntoView(e),f&&(c.cursor.style.display="none")}}}function hb(a,b,c,d){for(null==d&&(d=0);;){var e=!1,f=$(a,b),g=c&&c!=b?$(a,c):f,h=jb(a,Math.min(f.left,g.left),Math.min(f.top,g.top)-d,Math.max(f.left,g.left),Math.max(f.bottom,g.bottom)+d),i=a.doc.scrollTop,j=a.doc.scrollLeft;if(null!=h.scrollTop&&(za(a,h.scrollTop),Math.abs(a.doc.scrollTop-i)>1&&(e=!0)),null!=h.scrollLeft&&(Aa(a,h.scrollLeft),Math.abs(a.doc.scrollLeft-j)>1&&(e=!0)),!e)return f}}function ib(a,b,c,d,e){var f=jb(a,b,c,d,e);null!=f.scrollTop&&za(a,f.scrollTop),null!=f.scrollLeft&&Aa(a,f.scrollLeft)}function jb(a,b,c,d,e){var f=a.display,g=ca(a.display);0>c&&(c=0);var h=f.scroller.clientHeight-ye,i=f.scroller.scrollTop,j={},k=a.doc.height+L(f),l=g>c,m=e>k-g;if(i>c)j.scrollTop=l?0:c;else if(e>i+h){var n=Math.min(c,(m?k:e)-h);n!=i&&(j.scrollTop=n)}var o=f.scroller.clientWidth-ye,p=f.scroller.scrollLeft;b+=f.gutters.offsetWidth,d+=f.gutters.offsetWidth;var q=f.gutters.offsetWidth,r=q+10>b;return p+q>b||r?(r&&(b=0),j.scrollLeft=Math.max(0,b-10-q)):d>o+p-3&&(j.scrollLeft=d+10-o),j}function kb(a,b,c){a.curOp.updateScrollPos={scrollLeft:null==b?a.doc.scrollLeft:b,scrollTop:null==c?a.doc.scrollTop:c}}function lb(a,b,c){var d=a.curOp.updateScrollPos||(a.curOp.updateScrollPos={scrollLeft:a.doc.scrollLeft,scrollTop:a.doc.scrollTop}),e=a.display.scroller;d.scrollTop=Math.max(0,Math.min(e.scrollHeight-e.clientHeight,d.scrollTop+c)),d.scrollLeft=Math.max(0,Math.min(e.scrollWidth-e.clientWidth,d.scrollLeft+b))}function mb(a,b,c,d){var e=a.doc;if(null==c&&(c="add"),"smart"==c)if(a.doc.mode.indent)var f=J(a,b);else c="prev";var g,h=a.options.tabSize,i=nc(e,b),j=Wc(i.text,null,h),k=i.text.match(/^\s*/)[0];if("smart"==c&&(g=a.doc.mode.indent(f,i.text.slice(k.length),i.text),g==ze)){if(!d)return;c="prev"}"prev"==c?g=b>e.first?Wc(nc(e,b-1).text,null,h):0:"add"==c?g=j+a.options.indentUnit:"subtract"==c?g=j-a.options.indentUnit:"number"==typeof c&&(g=j+c),g=Math.max(0,g);var l="",m=0;if(a.options.indentWithTabs)for(var n=Math.floor(g/h);n;--n)m+=h,l+="	";g>m&&(l+=Xc(g-m)),l!=k?Ua(a.doc,l,Va(b,0),Va(b,k.length),"+input"):e.sel.head.line==b&&e.sel.head.ch<k.length&&db(e,Va(b,k.length),Va(b,k.length),1),i.stateAfter=null}function nb(a,b,c){var d=b,e=b,f=a.doc;return"number"==typeof b?e=nc(f,Za(f,b)):d=rc(b),null==d?null:c(e,d)?(ja(a,d,d+1),e):null}function ob(a,b,c,d,e){function f(){var b=h+c;return b<a.first||b>=a.first+a.size?l=!1:(h=b,k=nc(a,b))}function g(a){var b=(e?xd:yd)(k,i,c,!0);if(null==b){if(a||!f())return l=!1;i=e?(0>c?rd:qd)(k):0>c?k.text.length:0}else i=b;return!0}var h=b.line,i=b.ch,j=c,k=nc(a,h),l=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var m=null,n="group"==d,o=!0;!(0>c)||g(!o);o=!1){var p=k.text.charAt(i)||"\n",q=dd(p)?"w":n?/\s/.test(p)?null:"p":null;if(m&&m!=q){0>c&&(c=1,g());break}if(q&&(m=q),c>0&&!g(!o))break}var r=fb(a,Va(h,i),j,!0);return l||(r.hitSide=!0),r}function pb(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);e=b.top+c*(h-(0>c?1.5:.5)*ca(a.display))}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(;;){var i=aa(a,g,e);if(!i.outside)break;if(0>c?0>=e:e>=f.height){i.hitSide=!0;break}e+=5*c}return i}function qb(a,b){var c=b.ch,d=b.ch;if(a){(b.xRel<0||d==a.length)&&c?--c:++d;for(var e=a.charAt(c),f=dd(e)?dd:/\s/.test(e)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!dd(a)};c>0&&f(a.charAt(c-1));)--c;for(;d<a.length&&f(a.charAt(d));)++d}return{from:Va(b.line,c),to:Va(b.line,d)}}function rb(a,b){bb(a.doc,Va(b,0),$a(a.doc,Va(b+1,0)))}function sb(b,c,d,e){a.defaults[b]=c,d&&(ee[b]=e?function(a,b,c){c!=ge&&d(a,b,c)}:d)}function tb(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function ub(a,b,c){return a.startState?a.startState(b,c):!0}function vb(a){return"string"==typeof a?ne[a]:a}function wb(a,b,c){function d(b){b=vb(b);var e=b[a];if(e===!1)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";var f=b.fallthrough;if(null==f)return!1;if("[object Array]"!=Object.prototype.toString.call(f))return d(f);for(var g=0,h=f.length;h>g;++g){var i=d(f[g]);if(i)return i}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}}function xb(a){var b=Je[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function yb(a,b){if(Gd&&34==a.keyCode&&a["char"])return!1;var c=Je[a.keyCode];return null==c||a.altGraphKey?!1:(a.altKey&&(c="Alt-"+c),(Ud?a.metaKey:a.ctrlKey)&&(c="Ctrl-"+c),(Ud?a.ctrlKey:a.metaKey)&&(c="Cmd-"+c),!b&&a.shiftKey&&(c="Shift-"+c),c)}function zb(a,b,c){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineNo=c||0}function Ab(a,b){this.lines=[],this.type=b,this.doc=a}function Bb(a,b,c,d,e){if(d&&d.shared)return Db(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return ga(a.cm,Bb)(a,b,c,d,e);var f=new Ab(a,e);if(Xa(c,b)||Wa(b,c)&&"range"==e&&(!d.inclusiveLeft||!d.inclusiveRight))return f;d&&ad(d,f),f.replacedWith&&(f.collapsed=!0,f.replacedWith=fd("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||(f.replacedWith.ignoreEvents=!0)),f.collapsed&&(Xd=!0),f.addToHistory&&yc(a,{from:b,to:c,origin:"markText"},{head:a.sel.head,anchor:a.sel.anchor},NaN);var g,h,i,j=b.line,k=0,l=a.cm;if(a.iter(j,c.line+1,function(d){l&&f.collapsed&&!l.options.lineWrapping&&Pb(a,d)==l.display.maxLine&&(i=!0);var e={from:null,to:null,marker:f};k+=d.text.length,j==b.line&&(e.from=b.ch,k-=b.ch),j==c.line&&(e.to=c.ch,k-=d.text.length-c.ch),f.collapsed&&(j==c.line&&(h=Mb(d,c.ch)),j==b.line?g=Mb(d,b.ch):qc(d,0)),Gb(d,e),++j}),f.collapsed&&a.iter(b.line,c.line+1,function(b){Qb(a,b)&&qc(b,0)}),f.clearOnEnter&&Nc(f,"beforeCursorEnter",function(){f.clear()}),f.readOnly&&(Wd=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory()),f.collapsed){if(g!=h)throw new Error("Inserting collapsed marker overlapping an existing one");f.size=k,f.atomic=!0}return l&&(i&&(l.curOp.updateMaxLine=!0),(f.className||f.title||f.startStyle||f.endStyle||f.collapsed)&&ja(l,b.line,c.line+1),f.atomic&&eb(l)),f}function Cb(a,b){this.markers=a,this.primary=b;for(var c=0,d=this;c<a.length;++c)a[c].parent=this,Nc(a[c],"clear",function(){d.clear()})}function Db(a,b,c,d,e){d=ad(d),d.shared=!1;var f=[Bb(a,b,c,d,e)],g=f[0],h=d.replacedWith;return lc(a,function(a){h&&(d.replacedWith=h.cloneNode(!0)),f.push(Bb(a,$a(a,b),$a(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=Yc(f)}),new Cb(f,g)}function Eb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Fb(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Gb(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Hb(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||(g.inclusiveLeft&&g.inclusiveRight||"bookmark"==g.type)&&f.from==b&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push({from:f.from,to:i?null:f.to,marker:g})}}return d}function Ib(a,b,c){if(a)for(var d,e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||"bookmark"==g.type&&f.from==b&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push({from:i?null:f.from-b,to:null==f.to?null:f.to-b,marker:g})}}return d}function Jb(a,b){var c=ab(a,b.from.line)&&nc(a,b.from.line).markedSpans,d=ab(a,b.to.line)&&nc(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=Wa(b.from,b.to),h=Hb(c,e,g),i=Ib(d,f,g),j=1==b.text.length,k=Yc(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=Eb(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var l=0;l<i.length;++l){var m=i[l];if(null!=m.to&&(m.to+=k),null==m.from){var n=Eb(h,m.marker);n||(m.from=k,j&&(h||(h=[])).push(m))}else m.from+=k,j&&(h||(h=[])).push(m)}if(j&&h){for(var l=0;l<h.length;++l)null!=h[l].from&&h[l].from==h[l].to&&"bookmark"!=h[l].marker.type&&h.splice(l--,1);h.length||(h=null)}var o=[h];if(!j){var p,q=b.text.length-2;if(q>0&&h)for(var l=0;l<h.length;++l)null==h[l].to&&(p||(p=[])).push({from:null,to:null,marker:h[l].marker});for(var l=0;q>l;++l)o.push(p);o.push(i)}return o}function Kb(a,b){var c=Ac(a,b),d=Jb(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function Lb(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=$c(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(),i=0;i<e.length;++i){var j=e[i];if(!Xa(j.to,h.from)&&!Xa(h.to,j.from)){var k=[i,1];(Xa(j.from,h.from)||!g.inclusiveLeft&&Wa(j.from,h.from))&&k.push({from:j.from,to:h.from}),(Xa(h.to,j.to)||!g.inclusiveRight&&Wa(j.to,h.to))&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-1}}return e}function Mb(a,b){var c,d=Xd&&a.markedSpans;if(d)for(var e,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&(null==e.from||e.from<b)&&(null==e.to||e.to>b)&&(!c||c.width<e.marker.width)&&(c=e.marker);return c}function Nb(a){return Mb(a,-1)}function Ob(a){return Mb(a,a.text.length+1)}function Pb(a,b){for(var c;c=Nb(b);)b=nc(a,c.find().from.line);return b}function Qb(a,b){var c=Xd&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.replacedWith&&0==d.from&&d.marker.inclusiveLeft&&Rb(a,b,d))return!0}}function Rb(a,b,c){if(null==c.to){var d=c.marker.find().to,e=nc(a,d.line);return Rb(a,e,Eb(e.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var f,g=0;g<b.markedSpans.length;++g)if(f=b.markedSpans[g],f.marker.collapsed&&!f.marker.replacedWith&&f.from==c.to&&(f.marker.inclusiveLeft||c.marker.inclusiveRight)&&Rb(a,b,f))return!0}function Sb(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Tb(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Ub(a){return function(){var b=!this.cm.curOp;b&&ea(this.cm);try{var c=a.apply(this,arguments)}finally{b&&fa(this.cm)}return c}}function Vb(a){return null!=a.height?a.height:(a.node.parentNode&&1==a.node.parentNode.nodeType||hd(a.cm.display.measure,fd("div",[a.node],null,"position: relative")),a.height=a.node.offsetHeight)}function Wb(a,b,c,d){var e=new oe(a,c,d);return e.noHScroll&&(a.display.alignWidgets=!0),nb(a,b,function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,!Qb(a.doc,b)||e.showIfHidden){var d=tc(a,b)<a.doc.scrollTop;qc(b,b.height+Vb(e)),d&&lb(a,0,e.height)}return!0}),e}function Xb(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),Sb(a),Tb(a,c);var e=d?d(a):1;e!=a.height&&qc(a,e)}function Yb(a){a.parent=null,Sb(a)}function Zb(a,b,c,d,e,f){var g=d.flattenSpans;null==g&&(g=a.options.flattenSpans);var h,i=0,j=null,k=new zb(c,a.options.tabSize,b);for(""==c&&d.blankLine&&d.blankLine(e);!k.eol();)k.pos>a.options.maxHighlightLength?(g=!1,k.pos=c.length,h=null):h=d.token(k,e),g&&j==h||(i<k.start&&f(k.start,j),i=k.start,j=h),k.start=k.pos;for(;i<k.pos;){var l=Math.min(k.pos,i+5e4);f(l,j),i=l}}function $b(a,b,c){var d=[a.state.modeGen];Zb(a,rc(b),b.text,a.doc.mode,c,function(a,b){d.push(a,b)});for(var e=0;e<a.state.overlays.length;++e){var f=a.state.overlays[e],g=1,h=0;Zb(a,rc(b),b.text,f.mode,!0,function(a,b){for(var c=g;a>h;){var e=d[g];e>a&&d.splice(g,1,a,d[g+1],e),g+=2,h=Math.min(a,e)}if(b)if(f.opaque)d.splice(c,g-c,a,b),g=c+2;else for(;g>c;c+=2){var i=d[c+1];d[c+1]=i?i+" "+b:b}})}return d}function _b(a,b){return b.styles&&b.styles[0]==a.state.modeGen||(b.styles=$b(a,b,b.stateAfter=J(a,rc(b)))),b.styles}function ac(a,b,c){var d=a.doc.mode,e=new zb(b.text,a.options.tabSize);for(""==b.text&&d.blankLine&&d.blankLine(c);!e.eol()&&e.pos<=a.options.maxHighlightLength;)d.token(e,c),e.start=e.pos}function bc(a,b){if(!a)return null;for(;;){var c=a.match(/(?:^|\s)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return qe[a]||(qe[a]="cm-"+a.replace(/ +/g," cm-"))}function cc(a,b,c,d){for(var e,f=b,g=!0;e=Nb(f);)f=nc(a.doc,e.find().from.line);var h={pre:fd("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:a,copyWidgets:d};do{f.text&&(g=!1),h.measure=f==b&&c,h.pos=0,h.addToken=h.measure?ec:dc,(Ad||Dd)&&a.getOption("lineWrapping")&&(h.addToken=fc(h.addToken));var i=hc(f,h,_b(a,f));c&&f==b&&!h.measuredSomething&&(c[0]=h.pre.appendChild(md(a.display.measure)),h.measuredSomething=!0),i&&(f=nc(a.doc,i.to.line))}while(i);!c||h.measuredSomething||c[0]||(c[0]=h.pre.appendChild(g?fd("span","Â "):md(a.display.measure))),h.pre.firstChild||Qb(a.doc,b)||h.pre.appendChild(document.createTextNode("Â "));var j;if(c&&Ad&&(j=uc(f))){var k=j.length-1;j[k].from==j[k].to&&--k;var l=j[k],m=j[k-1];if(l.from+1==l.to&&m&&l.level<m.level){var n=c[h.pos-1];n&&n.parentNode.insertBefore(n.measureRight=md(a.display.measure),n.nextSibling)}}var o=h.textClass?h.textClass+" "+(b.textClass||""):b.textClass;return o&&(h.pre.className=o),Pc(a,"renderLine",a,b,h.pre),h}function dc(a,b,c,d,e,f){if(b){if(re.test(b))for(var g=document.createDocumentFragment(),h=0;;){re.lastIndex=h;var i=re.exec(b),j=i?i.index-h:b.length-h;if(j&&(g.appendChild(document.createTextNode(b.slice(h,h+j))),a.col+=j),!i)break;if(h+=j+1,"	"==i[0]){var k=a.cm.options.tabSize,l=k-a.col%k;g.appendChild(fd("span",Xc(l),"cm-tab")),a.col+=l}else{var m=fd("span","â¢","cm-invalidchar");m.title="\\u"+i[0].charCodeAt(0).toString(16),g.appendChild(m),a.col+=1}}else{a.col+=b.length;var g=document.createTextNode(b)}if(c||d||e||a.measure){var n=c||"";d&&(n+=d),e&&(n+=e);var m=fd("span",[g],n);return f&&(m.title=f),a.pre.appendChild(m)}a.pre.appendChild(g)}}function ec(a,b,c,d,e){for(var f=a.cm.options.lineWrapping,g=0;g<b.length;++g){var h=b.charAt(g),i=0==g;h>="ï¿½"&&"ï¿½">h&&g<b.length-1?(h=b.slice(g,g+2),++g):g&&f&&kd(b,g)&&a.pre.appendChild(fd("wbr"));var j=a.measure[a.pos],k=a.measure[a.pos]=dc(a,h,c,i&&d,g==b.length-1&&e);j&&(k.leftSide=j.leftSide||j),Ad&&f&&" "==h&&g&&!/\s/.test(b.charAt(g-1))&&g<b.length-1&&!/\s/.test(b.charAt(g+1))&&(k.style.whiteSpace="normal"),a.pos+=h.length}b.length&&(a.measuredSomething=!0)}function fc(a){function b(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"Â ";return b+=" "}return function(c,d,e,f,g,h){return a(c,d.replace(/ {3,}/g,b),e,f,g,h)}}function gc(a,b,c,d){var e=!d&&c.replacedWith;if(e&&(a.copyWidgets&&(e=e.cloneNode(!0)),a.pre.appendChild(e),a.measure)){if(b)a.measure[a.pos]=e;else{var f=md(a.cm.display.measure);if("bookmark"!=c.type||c.insertLeft){if(a.measure[a.pos])return;a.measure[a.pos]=a.pre.insertBefore(f,e)}else a.measure[a.pos]=a.pre.appendChild(f)}a.measuredSomething=!0}a.pos+=b}function hc(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m=e.length,n=0,o=1,p="",q=0;;){if(q==n){h=i=j=k="",l=null,q=1/0;for(var r=[],s=0;s<d.length;++s){var t=d[s],u=t.marker;t.from<=n&&(null==t.to||t.to>n)?(null!=t.to&&q>t.to&&(q=t.to,i=""),u.className&&(h+=" "+u.className),u.startStyle&&t.from==n&&(j+=" "+u.startStyle),u.endStyle&&t.to==q&&(i+=" "+u.endStyle),u.title&&!k&&(k=u.title),u.collapsed&&(!l||l.marker.size<u.size)&&(l=t)):t.from>n&&q>t.from&&(q=t.from),"bookmark"==u.type&&t.from==n&&u.replacedWith&&r.push(u)}if(l&&(l.from||0)==n&&(gc(b,(null==l.to?m:l.to)-n,l.marker,null==l.from),null==l.to))return l.marker.find();if(!l&&r.length)for(var s=0;s<r.length;++s)gc(b,0,r[s])}if(n>=m)break;for(var v=Math.min(m,q);;){if(p){var w=n+p.length;if(!l){var x=w>v?p.slice(0,v-n):p;b.addToken(b,x,g?g+h:h,j,n+x.length==q?i:"",k)}if(w>=v){p=p.slice(v-n),n=v;break}n=w,j=""}p=e.slice(f,f=c[o++]),g=bc(c[o++],b)}}else for(var o=1;o<c.length;o+=2)b.addToken(b,e.slice(f,f=c[o]),bc(c[o+1],b))}function ic(a,b,c,d,e){function f(a){return c?c[a]:null}function g(a,c,d){Xb(a,c,d,e),Qc(a,"change",a,b)}var h=b.from,i=b.to,j=b.text,k=nc(a,h.line),l=nc(a,i.line),m=Yc(j),n=f(j.length-1),o=i.line-h.line;if(0==h.ch&&0==i.ch&&""==m){for(var p=0,q=j.length-1,r=[];q>p;++p)r.push(new pe(j[p],f(p),e));g(l,l.text,n),o&&a.remove(h.line,o),r.length&&a.insert(h.line,r)}else if(k==l)if(1==j.length)g(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{for(var r=[],p=1,q=j.length-1;q>p;++p)r.push(new pe(j[p],f(p),e));r.push(new pe(m+k.text.slice(i.ch),n,e)),g(k,k.text.slice(0,h.ch)+j[0],f(0)),a.insert(h.line+1,r)}else if(1==j.length)g(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),f(0)),a.remove(h.line+1,o);else{g(k,k.text.slice(0,h.ch)+j[0],f(0)),g(l,m+l.text.slice(i.ch),n);for(var p=1,q=j.length-1,r=[];q>p;++p)r.push(new pe(j[p],f(p),e));o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,r)}Qc(a,"change",a,b),db(a,d.anchor,d.head,null,!0)}function jc(a){this.lines=a,this.parent=null;for(var b=0,c=a.length,d=0;c>b;++b)a[b].parent=this,d+=a[b].height;this.height=d}function kc(a){this.children=a;for(var b=0,c=0,d=0,e=a.length;e>d;++d){var f=a[d];b+=f.chunkSize(),c+=f.height,f.parent=this}this.size=b,this.height=c,this.parent=null}function lc(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function mc(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,f(a),c(a),a.options.lineWrapping||l(a),a.options.mode=b.modeOption,ja(a)}function nc(a,b){for(b-=a.first;!a.lines;)for(var c=0;;++c){var d=a.children[c],e=d.chunkSize();if(e>b){a=d;break}b-=e}return a.lines[b]}function oc(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function pc(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function qc(a,b){for(var c=b-a.height,d=a;d;d=d.parent)d.height+=c}function rc(a){if(null==a.parent)return null;for(var b=a.parent,c=$c(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function sc(a,b){var c=a.first;a:do{for(var d=0,e=a.children.length;e>d;++d){var f=a.children[d],g=f.height;if(g>b){a=f;continue a}b-=g,c+=f.chunkSize()}return c}while(!a.lines);for(var d=0,e=a.lines.length;e>d;++d){var h=a.lines[d],i=h.height;if(i>b)break;b-=i}return c+d}function tc(a,b){b=Pb(a.doc,b);for(var c=0,d=b.parent,e=0;e<d.lines.length;++e){var f=d.lines[e];if(f==b)break;c+=f.height}for(var g=d.parent;g;d=g,g=d.parent)for(var e=0;e<g.children.length;++e){var h=g.children[e];if(h==d)break;c+=h.height}return c}function uc(a){var b=a.order;return null==b&&(b=a.order=Le(a.text)),b}function vc(a){return{done:[],undone:[],undoDepth:1/0,lastTime:0,lastOp:null,lastOrigin:null,generation:a||1,maxGeneration:a||1}}function wc(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function xc(a,b){var c={line:b.from.line,ch:b.from.ch},d={from:c,to:de(b),text:oc(a,b.from,b.to)};return wc(a,d,b.from.line,b.to.line+1),lc(a,function(a){wc(a,d,b.from.line,b.to.line+1)},!0),d}function yc(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g=Yc(e.done);if(g&&(e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))){var h=Yc(g.changes);Wa(b.from,b.to)&&Wa(b.from,h.to)?h.to=de(b):g.changes.push(xc(a,b)),g.anchorAfter=c.anchor,g.headAfter=c.head}else for(g={changes:[xc(a,b)],generation:e.generation,anchorBefore:a.sel.anchor,headBefore:a.sel.head,anchorAfter:c.anchor,headAfter:c.head},e.done.push(g),e.generation=++e.maxGeneration;e.done.length>e.undoDepth;)e.done.shift();e.lastTime=f,e.lastOp=d,e.lastOrigin=b.origin}function zc(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function Ac(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=0,e=[];d<b.text.length;++d)e.push(zc(c[d]));return e}function Bc(a,b){for(var c=0,d=[];c<a.length;++c){var e=a[c],f=e.changes,g=[];d.push({changes:g,anchorBefore:e.anchorBefore,headBefore:e.headBefore,anchorAfter:e.anchorAfter,headAfter:e.headAfter});for(var h=0;h<f.length;++h){var i,j=f[h];if(g.push({from:j.from,to:j.to,text:j.text}),b)for(var k in j)(i=k.match(/^spans_(\d+)$/))&&$c(b,Number(i[1]))>-1&&(Yc(g)[k]=j[k],delete j[k])}}return d}function Cc(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Dc(a,b,c,d){for(var e=0;e<a.length;++e){for(var f=a[e],g=!0,h=0;h<f.changes.length;++h){var i=f.changes[h];if(f.copied||(i.from=Ya(i.from),i.to=Ya(i.to)),c<i.from.line)i.from.line+=d,i.to.line+=d;else if(b<=i.to.line){g=!1;break}}f.copied||(f.anchorBefore=Ya(f.anchorBefore),f.headBefore=Ya(f.headBefore),f.anchorAfter=Ya(f.anchorAfter),f.readAfter=Ya(f.headAfter),f.copied=!0),g?(Cc(f.anchorBefore),Cc(f.headBefore),Cc(f.anchorAfter),Cc(f.headAfter)):(a.splice(0,e+1),e=0)}}function Ec(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Dc(a.done,c,d,e),Dc(a.undone,c,d,e)}function Fc(){Kc(this)}function Gc(a){return a.stop||(a.stop=Fc),a}function Hc(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Ic(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Jc(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Kc(a){Hc(a),Ic(a)}function Lc(a){return a.target||a.srcElement}function Mc(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Od&&a.ctrlKey&&1==b&&(b=3),b}function Nc(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={}),e=d[b]||(d[b]=[]);e.push(c)}}function Oc(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers&&a._handlers[b];if(!d)return;for(var e=0;e<d.length;++e)if(d[e]==c){d.splice(e,1);break}}}function Pc(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Qc(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2);we||(++xe,we=[],setTimeout(Sc,0));for(var f=0;f<d.length;++f)we.push(c(d[f]))}}function Rc(a,b,c){return Pc(a,c||b.type,a,b),Jc(b)||b.codemirrorIgnore}function Sc(){--xe;var a=we;we=null;for(var b=0;b<a.length;++b)a[b]()}function Tc(a,b){var c=a._handlers&&a._handlers[b];return c&&c.length>0}function Uc(a){a.prototype.on=function(a,b){Nc(this,a,b)},a.prototype.off=function(a,b){Oc(this,a,b)}}function Vc(){this.id=null}function Wc(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),
-1==b&&(b=a.length));for(var f=d||0,g=e||0;b>f;++f)"	"==a.charAt(f)?g+=c-g%c:++g;return g}function Xc(a){for(;Ae.length<=a;)Ae.push(Yc(Ae)+" ");return Ae[a]}function Yc(a){return a[a.length-1]}function Zc(a){if(Md)a.selectionStart=0,a.selectionEnd=a.value.length;else try{a.select()}catch(b){}}function $c(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;++c)if(a[c]==b)return c;return-1}function _c(a,b){function c(){}c.prototype=a;var d=new c;return b&&ad(b,d),d}function ad(a,b){b||(b={});for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function bd(a){for(var b=[],c=0;a>c;++c)b.push(void 0);return b}function cd(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function dd(a){return/\w/.test(a)||a>"Â"&&(a.toUpperCase()!=a.toLowerCase()||Be.test(a))}function ed(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function fd(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)id(e,b);else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function gd(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function hd(a,b){return gd(a).appendChild(b)}function id(a,b){Cd?(a.innerHTML="",a.appendChild(document.createTextNode(b))):a.textContent=b}function jd(a){return a.getBoundingClientRect()}function kd(){return!1}function ld(a){if(null!=Ee)return Ee;var b=fd("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return hd(a,b),b.offsetWidth&&(Ee=b.offsetHeight-b.clientHeight),Ee||0}function md(a){if(null==Fe){var b=fd("span","â");hd(a,fd("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Fe=b.offsetWidth<=1&&b.offsetHeight>2&&!Bd)}return Fe?fd("span","â"):fd("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px")}function nd(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0)}e||d(b,c,"ltr")}function od(a){return a.level%2?a.to:a.from}function pd(a){return a.level%2?a.from:a.to}function qd(a){var b=uc(a);return b?od(b[0]):0}function rd(a){var b=uc(a);return b?pd(Yc(b)):a.text.length}function sd(a,b){var c=nc(a.doc,b),d=Pb(a.doc,c);d!=c&&(b=rc(d));var e=uc(d),f=e?e[0].level%2?rd(d):qd(d):0;return Va(b,f)}function td(a,b){for(var c,d;c=Ob(d=nc(a.doc,b));)b=c.find().to.line;var e=uc(d),f=e?e[0].level%2?qd(d):rd(d):d.text.length;return Va(b,f)}function ud(a,b,c){var d=a[0].level;return b==d?!0:c==d?!1:c>b}function vd(a,b){for(var c,d=0;d<a.length;++d){var e=a[d];if(e.from<b&&e.to>b)return Ke=null,d;if(e.from==b||e.to==b){if(null!=c)return ud(a,e.level,a[c].level)?(Ke=c,d):(Ke=d,c);c=d}}return Ke=null,c}function wd(a,b,c,d){if(!d)return b+c;do b+=c;while(b>0&&Ce.test(a.text.charAt(b)));return b}function xd(a,b,c,d){var e=uc(a);if(!e)return yd(a,b,c,d);for(var f=vd(e,b),g=e[f],h=wd(a,b,g.level%2?-c:c,d);;){if(h>g.from&&h<g.to)return h;if(h==g.from||h==g.to)return vd(e,h)==f?h:(g=e[f+=c],c>0==g.level%2?g.to:g.from);if(g=e[f+=c],!g)return null;h=c>0==g.level%2?wd(a,g.to,-1,d):wd(a,g.from,1,d)}}function yd(a,b,c,d){var e=b+c;if(d)for(;e>0&&Ce.test(a.text.charAt(e));)e+=c;return 0>e||e>a.text.length?null:e}var zd=/gecko\/\d/i.test(navigator.userAgent),Ad=/MSIE \d/.test(navigator.userAgent),Bd=Ad&&(null==document.documentMode||document.documentMode<8),Cd=Ad&&(null==document.documentMode||document.documentMode<9),Dd=/WebKit\//.test(navigator.userAgent),Ed=Dd&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Fd=/Chrome\//.test(navigator.userAgent),Gd=/Opera\//.test(navigator.userAgent),Hd=/Apple Computer/.test(navigator.vendor),Id=/KHTML\//.test(navigator.userAgent),Jd=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),Kd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Ld=/PhantomJS/.test(navigator.userAgent),Md=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Nd=Md||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Od=Md||/Mac/.test(navigator.platform),Pd=/win/i.test(navigator.platform),Qd=Gd&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Qd&&(Qd=Number(Qd[1])),Qd&&Qd>=15&&(Gd=!1,Dd=!0);var Rd,Sd,Td,Ud=Od&&(Ed||Gd&&(null==Qd||12.11>Qd)),Vd=zd||Ad&&!Cd,Wd=!1,Xd=!1,Yd=0,Zd=0,$d=0,_d=null;Ad?_d=-.53:zd?_d=15:Fd?_d=-.7:Hd&&(_d=-1/3);var ae,be,ce=null,de=a.changeEnd=function(a){return a.text?Va(a.from.line+a.text.length-1,Yc(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.Pos=Va,a.prototype={constructor:a,focus:function(){window.focus(),oa(this),Ia(this),la(this)},setOption:function(a,b){var c=this.options,d=c[a];(c[a]!=b||"mode"==a)&&(c[a]=b,ee.hasOwnProperty(a)&&ga(this,ee[a])(this,b,d))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:ga(null,function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque}),this.state.modeGen++,ja(this)}),removeOverlay:ga(null,function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a)return b.splice(c,1),this.state.modeGen++,void ja(this)}}),indentLine:ga(null,function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),ab(this.doc,a)&&mb(this,a,b,c)}),indentSelection:ga(null,function(a){var b=this.doc.sel;if(Wa(b.from,b.to))return mb(this,b.from.line,a);for(var c=b.to.line-(b.to.ch?0:1),d=b.from.line;c>=d;++d)mb(this,d,a)}),getTokenAt:function(a,b){var c=this.doc;a=$a(c,a);var d=J(this,a.line,b),e=this.doc.mode,f=nc(c,a.line),g=new zb(f.text,this.options.tabSize,a.line);for(0===a.ch&&""===f.text&&e.blankLine(d);g.pos<=a.ch&&!g.eol();){g.start=g.pos;var h=e.token(g,d)}return{start:g.start,end:g.pos,string:g.current(),className:h||null,type:h||null,state:d}},getTokenTypeAt:function(a){a=$a(this.doc,a);var b=_b(this,nc(this.doc,a.line)),c=0,d=(b.length-1)/2,e=a.ch;if(0==e)return b[2];for(;;){var f=c+d>>1;if((f?b[2*f-1]:0)>=e)d=f;else{if(!(b[2*f+1]<e))return b[2*f+2];c=f+1}}},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){if(le.hasOwnProperty(b)){var c=le[b],d=this.getModeAt(a);return d[b]&&c[d[b]]||d.helperType&&c[d.helperType]||c[d.name]}},getStateAfter:function(a,b){var c=this.doc;return a=Za(c,null==a?c.first+c.size-1:a),J(this,a+1,b)},cursorCoords:function(a,b){var c,d=this.doc.sel;return c=null==a?d.head:"object"==typeof a?$a(this.doc,a):a?d.from:d.to,$(this,c,b||"page")},charCoords:function(a,b){return Z(this,$a(this.doc,a),b||"page")},coordsChar:function(a,b){return a=Y(this,a,b||"page"),aa(this,a.left,a.top)},lineAtHeight:function(a,b){return a=Y(this,{top:a,left:0},b||"page").top,sc(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);var e=nc(this.doc,a);return X(this,nc(this.doc,a),{top:0,left:0},b||"page").top+(c?e.height:0)},defaultTextHeight:function(){return ca(this.display)},defaultCharWidth:function(){return da(this.display)},setGutterMarker:ga(null,function(a,b,c){return nb(this,a,function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&ed(d)&&(a.gutterMarkers=null),!0})}),clearGutter:ga(null,function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,ja(b,d,d+1),ed(c.gutterMarkers)&&(c.gutterMarkers=null)),++d})}),addLineClass:ga(null,function(a,b,c){return nb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass";if(a[d]){if(new RegExp("(?:^|\\s)"+c+"(?:$|\\s)").test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:ga(null,function(a,b,c){return nb(this,a,function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(!e)return!1;if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}return!0})}),addLineWidget:ga(null,function(a,b,c){return Wb(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!ab(this.doc,a))return null;var b=a;if(a=nc(this.doc,a),!a)return null}else{var b=rc(a);if(null==b)return null}return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=$(this,$a(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&ib(this,h,g,h+b.offsetWidth,g+b.offsetHeight)},triggerOnKeyDown:ga(null,Ga),execCommand:function(a){return me[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);for(var f=0,g=$a(this.doc,a);b>f&&(g=ob(this.doc,g,e,c,d),!g.hitSide);++f);return g},moveH:ga(null,function(a,b){var c,d=this.doc.sel;c=d.shift||d.extend||Wa(d.from,d.to)?ob(this.doc,d.head,a,b,this.options.rtlMoveVisually):0>a?d.from:d.to,bb(this.doc,c,c,a)}),deleteH:ga(null,function(a,b){var c=this.doc.sel;Wa(c.from,c.to)?Ua(this.doc,"",c.from,ob(this.doc,c.head,a,b,!1),"+delete"):Ua(this.doc,"",c.from,c.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(a,b,c,d){var e=1,f=d;0>b&&(e=-1,b=-b);for(var g=0,h=$a(this.doc,a);b>g;++g){var i=$(this,h,"div");if(null==f?f=i.left:i.left=f,h=pb(this,i,e,c),h.hitSide)break}return h},moveV:ga(null,function(a,b){var c=this.doc.sel,d=$(this,c.head,"div");null!=c.goalColumn&&(d.left=c.goalColumn);var e=pb(this,d,a,b);"page"==b&&lb(this,0,Z(this,e,"div").top-d.top),bb(this.doc,e,e,a),c.goalColumn=d.left}),toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite",""))},hasFocus:function(){return this.state.focused},scrollTo:ga(null,function(a,b){kb(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller,b=ye;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:ga(null,function(a,b){null==a?a={from:this.doc.sel.head,to:null}:"number"==typeof a?a={from:Va(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),b||(b=0);var c=a;null!=a.from.line&&(this.curOp.scrollToPos={from:a.from,to:a.to,margin:b},c={from:$(this,a.from),to:$(this,a.to)});var d=jb(this,Math.min(c.from.left,c.to.left),Math.min(c.from.top,c.to.top)-b,Math.max(c.from.right,c.to.right),Math.max(c.from.bottom,c.to.bottom)+b);kb(this,d.scrollLeft,d.scrollTop)}),setSize:ga(null,function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}null!=a&&(this.display.wrapper.style.width=c(a)),null!=b&&(this.display.wrapper.style.height=c(b)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(a){return ia(this,a)},refresh:ga(null,function(){var a=null==this.display.cachedTextHeight;U(this),kb(this,this.doc.scrollLeft,this.doc.scrollTop),ja(this),a&&f(this)}),swapDoc:ga(null,function(a){var b=this.doc;return b.cm=null,mc(this,a),U(this),na(this,!0),kb(this,a.scrollLeft,a.scrollTop),Qc(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Uc(a);var ee=a.optionHandlers={},fe=a.defaults={},ge=a.Init={toString:function(){return"CodeMirror.Init"}};sb("value","",function(a,b){a.setValue(b)},!0),sb("mode",null,function(a,b){a.doc.modeOption=b,c(a)},!0),sb("indentUnit",2,c,!0),sb("indentWithTabs",!1),sb("smartIndent",!0),sb("tabSize",4,function(a){c(a),U(a),ja(a)},!0),sb("electricChars",!0),sb("rtlMoveVisually",!Pd),sb("theme","default",function(a){h(a),i(a)},!0),sb("keyMap","default",g),sb("extraKeys",null),sb("onKeyEvent",null),sb("onDragEvent",null),sb("lineWrapping",!1,d,!0),sb("gutters",[],function(a){m(a.options),i(a)},!0),sb("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?s(a.display)+"px":"0",a.refresh()},!0),sb("coverGutterNextToScrollbar",!1,n,!0),sb("lineNumbers",!1,function(a){m(a.options),i(a)},!0),sb("firstLineNumber",1,i,!0),sb("lineNumberFormatter",function(a){return a},i,!0),sb("showCursorWhenSelecting",!1,C,!0),sb("resetSelectionOnContextMenu",!0),sb("readOnly",!1,function(a,b){"nocursor"==b?(Ja(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||na(a,!0))}),sb("dragDrop",!0),sb("cursorBlinkRate",530),sb("cursorScrollMargin",0),sb("cursorHeight",1),sb("workTime",100),sb("workDelay",100),sb("flattenSpans",!0),sb("pollInterval",100),sb("undoDepth",40,function(a,b){a.doc.history.undoDepth=b}),sb("historyEventDelay",500),sb("viewportMargin",10,function(a){a.refresh()},!0),sb("maxHighlightLength",1e4,function(a){c(a),a.refresh()},!0),sb("crudeMeasuringFrom",1e4),sb("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)}),sb("tabindex",null,function(a,b){a.display.input.tabIndex=b||""}),sb("autofocus",null);var he=a.modes={},ie=a.mimeModes={};a.defineMode=function(b,c){if(a.defaults.mode||"null"==b||(a.defaults.mode=b),arguments.length>2){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}he[b]=c},a.defineMIME=function(a,b){ie[a]=b},a.resolveMode=function(b){if("string"==typeof b&&ie.hasOwnProperty(b))b=ie[b];else if(b&&"string"==typeof b.name&&ie.hasOwnProperty(b.name)){var c=ie[b.name];b=_c(c,b),b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}},a.getMode=function(b,c){var c=a.resolveMode(c),d=he[c.name];if(!d)return a.getMode(b,"text/plain");var e=d(b,c);if(je.hasOwnProperty(c.name)){var f=je[c.name];for(var g in f)f.hasOwnProperty(g)&&(e.hasOwnProperty(g)&&(e["_"+g]=e[g]),e[g]=f[g])}return e.name=c.name,e},a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}}),a.defineMIME("text/plain","null");var je=a.modeExtensions={};a.extendMode=function(a,b){var c=je.hasOwnProperty(a)?je[a]:je[a]={};ad(b,c)},a.defineExtension=function(b,c){a.prototype[b]=c},a.defineDocExtension=function(a,b){te.prototype[a]=b},a.defineOption=sb;var ke=[];a.defineInitHook=function(a){ke.push(a)};var le=a.helpers={};a.registerHelper=function(b,c,d){le.hasOwnProperty(b)||(le[b]=a[b]={}),le[b][c]=d},a.isWordChar=dd,a.copyState=tb,a.startState=ub,a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state,a=c.mode}return c||{mode:a,state:b}};var me=a.commands={selectAll:function(a){a.setSelection(Va(a.firstLine(),0),Va(a.lastLine()))},killLine:function(a){var b=a.getCursor(!0),c=a.getCursor(!1),d=!Wa(b,c);d||a.getLine(b.line).length!=b.ch?a.replaceRange("",b,d?c:Va(b.line),"+delete"):a.replaceRange("",b,Va(b.line+1,0),"+delete")},deleteLine:function(a){var b=a.getCursor().line;a.replaceRange("",Va(b,0),Va(b),"+delete")},delLineLeft:function(a){var b=a.getCursor();a.replaceRange("",Va(b.line,0),b,"+delete")},undo:function(a){a.undo()},redo:function(a){a.redo()},goDocStart:function(a){a.extendSelection(Va(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(Va(a.lastLine()))},goLineStart:function(a){a.extendSelection(sd(a,a.getCursor().line))},goLineStartSmart:function(a){var b=a.getCursor(),c=sd(a,b.line),d=a.getLineHandle(c.line),e=uc(d);if(e&&0!=e[0].level)a.extendSelection(c);else{var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;a.extendSelection(Va(c.line,g?0:f))}},goLineEnd:function(a){a.extendSelection(td(a,a.getCursor().line))},goLineRight:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:b},"div"))},goLineLeft:function(a){var b=a.charCoords(a.getCursor(),"div").top+5;a.extendSelection(a.coordsChar({left:0,top:b},"div"))},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("	","end","+input")},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.replaceSelection("	","end","+input")},transposeChars:function(a){var b=a.getCursor(),c=a.getLine(b.line);b.ch>0&&b.ch<c.length-1&&a.replaceRange(c.charAt(b.ch)+c.charAt(b.ch-1),Va(b.line,b.ch-1),Va(b.line,b.ch+1))},newlineAndIndent:function(a){ga(a,function(){a.replaceSelection("\n","end","+input"),a.indentLine(a.getCursor().line,null,!0)})()},toggleOverwrite:function(a){a.toggleOverwrite()}},ne=a.keyMap={};ne.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},ne.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},ne.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},ne["default"]=Od?ne.macDefault:ne.pcDefault,ne.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},a.lookupKey=wb,a.isModifierKey=xb,a.keyName=yb,a.fromTextArea=function(b,c){function d(){b.value=j.getValue()}if(c||(c={}),c.value=b.value,!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex),!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder),null==c.autofocus){var e=document.body;try{e=document.activeElement}catch(f){}c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(Nc(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,h=g.submit;try{var i=g.submit=function(){d(),g.submit=h,g.submit(),g.submit=i}}catch(f){}}b.style.display="none";var j=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);return j.save=d,j.getTextArea=function(){return b},j.toTextArea=function(){d(),b.parentNode.removeChild(j.getWrapperElement()),b.style.display="",b.form&&(Oc(b.form,"submit",d),"function"==typeof b.form.submit&&(b.form.submit=h))},j},zb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(a){var b=this.string.charAt(this.pos);if("string"==typeof a)var c=b==a;else var c=b&&(a.test?a.test(b):a(b));return c?(++this.pos,b):void 0},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},backUp:function(a){this.pos-=a},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Wc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Wc(this.string,null,this.tabSize)},match:function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},a.StringStream=zb,a.TextMarker=Ab,Uc(Ab),Ab.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;if(b&&ea(a),Tc(this,"clear")){var c=this.find();c&&Qc(this,"clear",c.from,c.to)}for(var d=null,e=null,f=0;f<this.lines.length;++f){var g=this.lines[f],h=Eb(g.markedSpans,this);null!=h.to&&(e=rc(g)),g.markedSpans=Fb(g.markedSpans,h),null!=h.from?d=rc(g):this.collapsed&&!Qb(this.doc,g)&&a&&qc(g,ca(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var i=Pb(a.doc,this.lines[f]),j=k(a.doc,i);j>a.display.maxLineLength&&(a.display.maxLine=i,a.display.maxLineLength=j,a.display.maxLineChanged=!0)}null!=d&&a&&ja(a,d,e+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&eb(a)),b&&fa(a)}},Ab.prototype.find=function(){for(var a,b,c=0;c<this.lines.length;++c){var d=this.lines[c],e=Eb(d.markedSpans,this);if(null!=e.from||null!=e.to){var f=rc(d);null!=e.from&&(a=Va(f,e.from)),null!=e.to&&(b=Va(f,e.to))}}return"bookmark"==this.type?a:a&&{from:a,to:b}},Ab.prototype.changed=function(){var a=this.find(),b=this.doc.cm;if(a&&b){"bookmark"!=this.type&&(a=a.from);var c=nc(this.doc,a.line);if(P(b,c),a.line>=b.display.showingFrom&&a.line<b.display.showingTo){for(var d=b.display.lineDiv.firstChild;d;d=d.nextSibling)if(d.lineObj==c){d.offsetHeight!=c.height&&qc(c,d.offsetHeight);break}ia(b,function(){b.curOp.selectionChanged=b.curOp.forceUpdate=b.curOp.updateMaxLine=!0})}}},Ab.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=$c(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Ab.prototype.detachLine=function(a){if(this.lines.splice($c(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},a.SharedTextMarker=Cb,Uc(Cb),Cb.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Qc(this,"clear")}},Cb.prototype.find=function(){return this.primary.find()};var oe=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a,this.node=b};Uc(oe),oe.prototype.clear=Ub(function(){var a=this.line.widgets,b=rc(this.line);if(null!=b&&a){for(var c=0;c<a.length;++c)a[c]==this&&a.splice(c--,1);a.length||(this.line.widgets=null);var d=tc(this.cm,this.line)<this.cm.doc.scrollTop;qc(this.line,Math.max(0,this.line.height-Vb(this))),d&&lb(this.cm,0,-this.height),ja(this.cm,b,b+1)}}),oe.prototype.changed=Ub(function(){var a=this.height;this.height=null;var b=Vb(this)-a;if(b){qc(this.line,this.line.height+b);var c=rc(this.line);ja(this.cm,c,c+1)}});var pe=a.Line=function(a,b,c){this.text=a,Tb(this,b),this.height=c?c(this):1};Uc(pe);var qe={},re=/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\uFEFF]/g;jc.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;d>c;++c){var e=this.lines[c];this.height-=e.height,Yb(e),Qc(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.splice.apply(a,[a.length,0].concat(this.lines))},insertInner:function(a,b,c){this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var d=0,e=b.length;e>d;++d)b[d].parent=this},iterN:function(a,b,c){for(var d=a+b;d>a;++a)if(c(this.lines[a]))return!0}},kc.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(e>a){var f=Math.min(b,e-a),g=d.height;if(d.removeInner(a,f),this.height-=g-d.height,e==f&&(this.children.splice(c--,1),d.parent=null),0==(b-=f))break;a=0}else a-=e}if(this.size-b<25){var h=[];this.collapse(h),this.children=[new jc(h)],this.children[0].parent=this}},collapse:function(a){for(var b=0,c=this.children.length;c>b;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length,this.height+=c;for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>=a){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(;f.lines.length>50;){var h=f.lines.splice(f.lines.length-25,25),i=new jc(h);f.height-=i.height,this.children.splice(d+1,0,i),i.parent=this}this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new kc(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=$c(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new kc(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0,e=this.children.length;e>d;++d){var f=this.children[d],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var se=0,te=a.Doc=function(a,b,c){if(!(this instanceof te))return new te(a,b,c);null==c&&(c=0),kc.call(this,[new jc([new pe("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=vc(),this.cleanGeneration=1,this.frontier=c;var d=Va(c,0);this.sel={from:d,to:d,head:d,anchor:d,shift:!1,extend:!1,goalColumn:null},this.id=++se,this.modeOption=b,"string"==typeof a&&(a=Ge(a)),ic(this,{from:d,to:d,text:a},null,{head:d,anchor:d})};te.prototype=_c(kc.prototype,{constructor:te,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0,e=b.length;e>d;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=pc(this,this.first,this.first+this.size);return a===!1?b:b.join(a||"\n")},setValue:function(a){var b=Va(this.first,0),c=this.first+this.size-1;Oa(this,{from:b,to:Va(c,nc(this,c).text.length),text:Ge(a),origin:"setValue"},{head:b,anchor:b},!0)},replaceRange:function(a,b,c,d){b=$a(this,b),c=c?$a(this,c):b,Ua(this,a,b,c,d)},getRange:function(a,b,c){var d=oc(this,$a(this,a),$a(this,b));return c===!1?d:d.join(c||"\n")},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},setLine:function(a,b){ab(this,a)&&Ua(this,b,Va(a,0),$a(this,Va(a)))},removeLine:function(a){a?Ua(this,"",$a(this,Va(a-1)),$a(this,Va(a))):Ua(this,"",Va(0,0),$a(this,Va(1,0)))},getLineHandle:function(a){return ab(this,a)?nc(this,a):void 0},getLineNumber:function(a){return rc(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=nc(this,a)),Pb(this,a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return $a(this,a)},getCursor:function(a){var b,c=this.sel;return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||a===!1?c.to:c.from,Ya(b)},somethingSelected:function(){return!Wa(this.sel.head,this.sel.anchor)},setCursor:ha(function(a,b,c){var d=$a(this,"number"==typeof a?Va(a,b||0):a);c?bb(this,d):db(this,d,d)}),setSelection:ha(function(a,b,c){db(this,$a(this,a),$a(this,b||a),c)}),extendSelection:ha(function(a,b,c){bb(this,$a(this,a),b&&$a(this,b),c)}),getSelection:function(a){return this.getRange(this.sel.from,this.sel.to,a)},replaceSelection:function(a,b,c){Oa(this,{from:this.sel.from,to:this.sel.to,text:Ge(a),origin:c},b||"around")},undo:ha(function(){Qa(this,"undo")}),redo:ha(function(){Qa(this,"redo")}),setExtending:function(a){this.sel.extend=a},historySize:function(){var a=this.history;return{undo:a.done.length,redo:a.undone.length}},clearHistory:function(){this.history=vc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Bc(this.history.done),undone:Bc(this.history.undone)}},setHistory:function(a){var b=this.history=vc(this.history.maxGeneration);b.done=a.done.slice(0),b.undone=a.undone.slice(0)},markText:function(a,b,c){return Bb(this,$a(this,a),$a(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft};return a=$a(this,a),Bb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=$a(this,a);var b=[],c=nc(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first;return this.iter(function(d){var e=d.text.length+1;return e>a?(b=a,!0):(a-=e,void++c)}),$a(this,Va(c,b))},indexFromPos:function(a){a=$a(this,a);var b=a.ch;return a.line<this.first||a.ch<0?0:(this.iter(this.first,a.line,function(a){b+=a.text.length+1}),b)},copy:function(a){
var b=new te(pc(this,this.first,this.first+this.size),this.modeOption,this.first);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new te(pc(this,b,c),a.mode||this.modeOption,b);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],d},unlinkDoc:function(b){if(b instanceof a&&(b=b.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=this.linked[c];if(d.doc==b){this.linked.splice(c,1),b.unlinkDoc(this);break}}if(b.history==this.history){var e=[b.id];lc(b,function(a){e.push(a.id)},!0),b.history=vc(),b.history.done=Bc(this.history.done,e),b.history.undone=Bc(this.history.undone,e)}},iterLinkedDocs:function(a){lc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),te.prototype.eachLine=te.prototype.iter;var ue="iter insert remove copy getEditor".split(" ");for(var ve in te.prototype)te.prototype.hasOwnProperty(ve)&&$c(ue,ve)<0&&(a.prototype[ve]=function(a){return function(){return a.apply(this.doc,arguments)}}(te.prototype[ve]));Uc(te),a.e_stop=Kc,a.e_preventDefault=Hc,a.e_stopPropagation=Ic;var we,xe=0;a.on=Nc,a.off=Oc,a.signal=Pc;var ye=30,ze=a.Pass={toString:function(){return"CodeMirror.Pass"}};Vc.prototype={set:function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)}},a.countColumn=Wc;var Ae=[""],Be=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Ce=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff]/;a.replaceGetRect=function(a){jd=a};var De=function(){if(Cd)return!1;var a=fd("div");return"draggable"in a||"dragDrop"in a}();zd?kd=function(a,b){return 36==a.charCodeAt(b-1)&&39==a.charCodeAt(b)}:Hd&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?kd=function(a,b){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(a.slice(b-1,b+1))}:Dd&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?kd=function(a,b){var c=a.charCodeAt(b-1);return c>=8208&&8212>=c}:Dd&&(kd=function(a,b){if(b>1&&45==a.charCodeAt(b-1)){if(/\w/.test(a.charAt(b-2))&&/[^\-?\.]/.test(a.charAt(b)))return!0;if(b>2&&/[\d\.,]/.test(a.charAt(b-2))&&/[\d\.,]/.test(a.charAt(b)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|â¦[\w~`@#$%\^&*(_=+{[><]/.test(a.slice(b-1,b+1))});var Ee,Fe,Ge=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)};a.splitLines=Ge;var He=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Ie=function(){var a=fd("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),Je={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};a.keyNames=Je,function(){for(var a=0;10>a;a++)Je[a+48]=String(a);for(var a=65;90>=a;a++)Je[a]=String.fromCharCode(a);for(var a=1;12>=a;a++)Je[a+111]=Je[a+63235]="F"+a}();var Ke,Le=function(){function a(a){return 255>=a?b.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1791>=a?c.charAt(a-1536):a>=1792&&2220>=a?"r":"L"}var b="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",c="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",d=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,f=/[LRr]/,g=/[Lb1n]/,h=/[1n]/,i="L";return function(b){if(!d.test(b))return!1;for(var c,j=b.length,k=[],l=0;j>l;++l)k.push(c=a(b.charCodeAt(l)));for(var l=0,m=i;j>l;++l){var c=k[l];"m"==c?k[l]=m:m=c}for(var l=0,n=i;j>l;++l){var c=k[l];"1"==c&&"r"==n?k[l]="n":f.test(c)&&(n=c,"r"==c&&(k[l]="R"))}for(var l=1,m=k[0];j-1>l;++l){var c=k[l];"+"==c&&"1"==m&&"1"==k[l+1]?k[l]="1":","!=c||m!=k[l+1]||"1"!=m&&"n"!=m||(k[l]=m),m=c}for(var l=0;j>l;++l){var c=k[l];if(","==c)k[l]="N";else if("%"==c){for(var o=l+1;j>o&&"%"==k[o];++o);for(var p=l&&"!"==k[l-1]||j-1>o&&"1"==k[o]?"1":"N",q=l;o>q;++q)k[q]=p;l=o-1}}for(var l=0,n=i;j>l;++l){var c=k[l];"L"==n&&"1"==c?k[l]="L":f.test(c)&&(n=c)}for(var l=0;j>l;++l)if(e.test(k[l])){for(var o=l+1;j>o&&e.test(k[o]);++o);for(var r="L"==(l?k[l-1]:i),s="L"==(j-1>o?k[o]:i),p=r||s?"L":"R",q=l;o>q;++q)k[q]=p;l=o-1}for(var t,u=[],l=0;j>l;)if(g.test(k[l])){var v=l;for(++l;j>l&&g.test(k[l]);++l);u.push({from:v,to:l,level:0})}else{var w=l,x=u.length;for(++l;j>l&&"L"!=k[l];++l);for(var q=w;l>q;)if(h.test(k[q])){q>w&&u.splice(x,0,{from:w,to:q,level:1});var y=q;for(++q;l>q&&h.test(k[q]);++q);u.splice(x,0,{from:y,to:q,level:2}),w=q}else++q;l>w&&u.splice(x,0,{from:w,to:l,level:1})}return 1==u[0].level&&(t=b.match(/^\s+/))&&(u[0].from=t[0].length,u.unshift({from:0,to:t[0].length,level:0})),1==Yc(u).level&&(t=b.match(/\s+$/))&&(Yc(u).to-=t[0].length,u.push({from:j-t[0].length,to:j,level:0})),u[0].level!=Yc(u).level&&u.push({from:j,to:j,level:u[0].level}),u}}();return a.version="3.19.1",a}(),define("codemirror",function(a){return function(){var b;return b||a.CodeMirror}}(this)),CodeMirror.defineMode("sfm",function(a,b){var c=function(a,b){b.startPos={line:a.lineNo,ch:a.start},b.endPos=void 0},d=function(a,b){b.endPos={line:a.lineNo,ch:a.pos}};return{startState:function(){return{}},blankLine:function(a){a.inEm=!1,a.inStrong=!1,a.inReference=!1,a.inInlineMath=!1,a.endPos=void 0,a.startPos=void 0},token:function(a,b){a.sol()&&(a.match(/^\s*$/,!0)?b.wasBlank=!0:b.wasBlank=!1);var e=a.peek();if(!b.inMath&&a.match(/^\$\$/,!0)&&(b.inMath=!0,c(a,b)),b.inMath)return a.skipTo("$")&&"$"===a.next()?(a.next(),"$"===a.peek()&&a.next(),b.inMath=!1,d(a,b)):a.next(),"math";if(!b.inInlineMath&&a.match(/\%\%/,!0)&&(b.inInlineMath=!0,c(a,b)),b.inInlineMath)return a.skipTo("%")&&"%"===a.next()?(a.next(),"%"===a.peek()&&a.next(),b.inInlineMath=!1,d(a,b)):a.skipToEnd(),"inline-math";if(!b.inEm&&!b.inStrong&&"*"===e){a.next();var f=a.peek();"*"===f?(b.inStrong=!0,a.next(),c(a,b)):" "!==f&&(b.inEm=!0,c(a,b))}if(b.inStrong||b.inEm){if(a.skipTo("*")){a.next();var f=a.peek();"*"===f?(b.inStrong=!1,a.next()):b.inEm=!1,d(a,b)}else a.skipToEnd();return"string"}return!b.inReference&&a.match(/(!|>)?\[[^\]]*\] ?(?:\()/,!1)&&("!"===e&&(b.referenceType="image"),">"===e&&(b.referenceType="injection"),"["===e&&(b.referenceType="link"),b.inReference=!0,a.next(),c(a,b)),b.inReference?(a.match(/(\[)?[^\]]*\]\([^\)]*\)/,!0)?(b.inReference=!1,d(a,b)):a.skipToEnd(),b.referenceType):(a.next(),null)}}}),CodeMirror.defineMIME("text/x-markdown","markdown"),define("markdownmode",["codemirror"],function(){}),function(){function a(a,c,d,e){if(this.atOccurrence=!1,this.doc=a,null==e&&"string"==typeof c&&(e=!1),d=d?a.clipPos(d):b(0,0),this.pos={from:d,to:d},"string"!=typeof c)c.global||(c=new RegExp(c.source,c.ignoreCase?"ig":"g")),this.matches=function(d,e){if(d){c.lastIndex=0;for(var f,g,h=a.getLine(e.line).slice(0,e.ch),i=0;;){c.lastIndex=i;var j=c.exec(h);if(!j)break;if(f=j,g=f.index,i=f.index+(f[0].length||1),i==h.length)break}var k=f&&f[0].length||0;k||(0==g&&0==h.length?f=void 0:g!=a.getLine(e.line).length&&k++)}else{c.lastIndex=e.ch;var h=a.getLine(e.line),f=c.exec(h),k=f&&f[0].length||0,g=f&&f.index;g+k==h.length||k||(k=1)}return f&&k?{from:b(e.line,g),to:b(e.line,g+k),match:f}:void 0};else{e&&(c=c.toLowerCase());var f=e?function(a){return a.toLowerCase()}:function(a){return a},g=c.split("\n");1==g.length?c.length?this.matches=function(d,e){var g,h=f(a.getLine(e.line)),i=c.length;return(d?e.ch>=i&&-1!=(g=h.lastIndexOf(c,e.ch-i)):-1!=(g=h.indexOf(c,e.ch)))?{from:b(e.line,g),to:b(e.line,g+i)}:void 0}:this.matches=function(){}:this.matches=function(c,d){var e=d.line,h=c?g.length-1:0,i=g[h],j=f(a.getLine(e)),k=c?j.indexOf(i)+i.length:j.lastIndexOf(i);if(!(c?k>d.ch||k!=i.length:k<d.ch||k!=j.length-i.length))for(;;){if(c?!e:e==a.lineCount()-1)return;if(j=f(a.getLine(e+=c?-1:1)),i=g[c?--h:++h],!(h>0&&h<g.length-1)){var l=c?j.lastIndexOf(i):j.indexOf(i)+i.length;if(c?l!=j.length-i.length:l!=i.length)return;var m=b(d.line,k),n=b(e,l);return{from:c?n:m,to:c?m:n}}if(j!=i)return}}}}var b=CodeMirror.Pos;a.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(a){function c(a){var c=b(a,0);return d.pos={from:c,to:c},d.atOccurrence=!1,!1}for(var d=this,e=this.doc.clipPos(a?this.pos.from:this.pos.to);;){if(this.pos=this.matches(a,e))return this.pos.from&&this.pos.to||console.log(this.matches,this.pos),this.atOccurrence=!0,this.pos.match||!0;if(a){if(!e.line)return c(0);e=b(e.line-1,this.doc.getLine(e.line-1).length)}else{var f=this.doc.lineCount();if(e.line==f-1)return c(f);e=b(e.line+1,0)}}},from:function(){return this.atOccurrence?this.pos.from:void 0},to:function(){return this.atOccurrence?this.pos.to:void 0},replace:function(a){if(this.atOccurrence){var c=CodeMirror.splitLines(a);this.doc.replaceRange(c,this.pos.from,this.pos.to),this.pos.to=b(this.pos.from.line+c.length-1,c[c.length-1].length+(1==c.length?this.pos.from.ch:0))}}},CodeMirror.defineExtension("getSearchCursor",function(b,c,d){return new a(this.doc,b,c,d)}),CodeMirror.defineDocExtension("getSearchCursor",function(b,c,d){return new a(this,b,c,d)})}(),define("searchcursor",["codemirror"],function(){}),function(a,b){function c(){return new Date(Date.UTC.apply(Date,arguments))}function d(){var a=new Date;return c(a.getFullYear(),a.getMonth(),a.getDate())}function e(a){return function(){return this[a].apply(this,arguments)}}function f(b,c){function d(a,b){return b.toLowerCase()}var e,f=a(b).data(),g={},h=new RegExp("^"+c.toLowerCase()+"([A-Z])");c=new RegExp("^"+c.toLowerCase());for(var i in f)c.test(i)&&(e=i.replace(h,d),g[e]=f[i]);return g}function g(b){var c={};if(o[b]||(b=b.split("-")[0],o[b])){var d=o[b];return a.each(n,function(a,b){b in d&&(c[b]=d[b])}),c}}var h=a(window),i=function(){var b={get:function(a){return this.slice(a)[0]},contains:function(a){for(var b=a&&a.valueOf(),c=0,d=this.length;d>c;c++)if(this[c].valueOf()===b)return c;return-1},remove:function(a){this.splice(a,1)},replace:function(b){b&&(a.isArray(b)||(b=[b]),this.clear(),this.push.apply(this,b))},clear:function(){this.length=0},copy:function(){var a=new i;return a.replace(this),a}};return function(){var c=[];return c.push.apply(c,arguments),a.extend(c,b),c}}(),j=function(b,c){this.dates=new i,this.viewDate=d(),this.focusDate=null,this._process_options(c),this.element=a(b),this.isInline=!1,this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on, .input-group-addon, .btn"):!1,this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=a(p.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today, tfoot th.clear").attr("colspan",function(a,b){return parseInt(b)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};j.prototype={constructor:j,_process_options:function(b){this._o=a.extend({},this._o,b);var c=this.o=a.extend({},this._o),d=c.language;switch(o[d]||(d=d.split("-")[0],o[d]||(d=m.language)),c.language=d,c.startView){case 2:case"decade":c.startView=2;break;case 1:case"year":c.startView=1;break;default:c.startView=0}switch(c.minViewMode){case 1:case"months":c.minViewMode=1;break;case 2:case"years":c.minViewMode=2;break;default:c.minViewMode=0}c.startView=Math.max(c.startView,c.minViewMode),c.multidate!==!0&&(c.multidate=Number(c.multidate)||!1,c.multidate!==!1?c.multidate=Math.max(0,c.multidate):c.multidate=1),c.multidateSeparator=String(c.multidateSeparator),c.weekStart%=7,c.weekEnd=(c.weekStart+6)%7;var e=p.parseFormat(c.format);c.startDate!==-(1/0)&&(c.startDate?c.startDate instanceof Date?c.startDate=this._local_to_utc(this._zero_time(c.startDate)):c.startDate=p.parseDate(c.startDate,e,c.language):c.startDate=-(1/0)),c.endDate!==1/0&&(c.endDate?c.endDate instanceof Date?c.endDate=this._local_to_utc(this._zero_time(c.endDate)):c.endDate=p.parseDate(c.endDate,e,c.language):c.endDate=1/0),c.daysOfWeekDisabled=c.daysOfWeekDisabled||[],a.isArray(c.daysOfWeekDisabled)||(c.daysOfWeekDisabled=c.daysOfWeekDisabled.split(/[,\s]*/)),c.daysOfWeekDisabled=a.map(c.daysOfWeekDisabled,function(a){return parseInt(a,10)});var f=String(c.orientation).toLowerCase().split(/\s+/g),g=c.orientation.toLowerCase();if(f=a.grep(f,function(a){return/^auto|left|right|top|bottom$/.test(a)}),c.orientation={x:"auto",y:"auto"},g&&"auto"!==g)if(1===f.length)switch(f[0]){case"top":case"bottom":c.orientation.y=f[0];break;case"left":case"right":c.orientation.x=f[0]}else g=a.grep(f,function(a){return/^left|right$/.test(a)}),c.orientation.x=g[0]||"auto",g=a.grep(f,function(a){return/^top|bottom$/.test(a)}),c.orientation.y=g[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(d=b,e=a[f][1]):3===a[f].length&&(d=a[f][1],e=a[f][2]),c.on(e,d)},_unapplyEvents:function(a){for(var c,d,e,f=0;f<a.length;f++)c=a[f][0],2===a[f].length?(e=b,d=a[f][1]):3===a[f].length&&(e=a[f][1],d=a[f][2]),c.off(d,e)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:a.proxy(this.show,this),keyup:a.proxy(function(b){-1===a.inArray(b.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:a.proxy(this.keydown,this)}],[this.component,{click:a.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:a.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:a.proxy(function(a){this._focused_from=a.target},this)}],[this.element,{blur:a.proxy(function(a){this._focused_from=a.target},this)}]),this._secondaryEvents=[[this.picker,{click:a.proxy(this.click,this)}],[a(window),{resize:a.proxy(this.place,this)}],[a(document),{"mousedown touchstart":a.proxy(function(a){this.element.is(a.target)||this.element.find(a.target).length||this.picker.is(a.target)||this.picker.find(a.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(b,c){var d=c||this.dates.get(-1),e=this._utc_to_local(d);this.element.trigger({type:b,date:e,dates:a.map(this.dates,this._utc_to_local),format:a.proxy(function(a,b){0===arguments.length?(a=this.dates.length-1,b=this.o.format):"string"==typeof a&&(b=a,a=this.dates.length-1),b=b||this.o.format;var c=this.dates.get(a);return p.formatDate(c,b,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(a){return a&&new Date(a.getTime()+6e4*a.getTimezoneOffset())},_local_to_utc:function(a){return a&&new Date(a.getTime()-6e4*a.getTimezoneOffset())},_zero_time:function(a){return a&&new Date(a.getFullYear(),a.getMonth(),a.getDate())},_zero_utc_time:function(a){return a&&new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()))},getDates:function(){return a.map(this.dates,this._utc_to_local)},getUTCDates:function(){return a.map(this.dates,function(a){return new Date(a)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,b),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var b=a.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,a.map(b,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:e("setDates"),setUTCDate:e("setUTCDates"),setValue:function(){var a=this.getFormattedDate();this.isInput?this.element.val(a).change():this.component&&this.element.find("input").val(a).change()},getFormattedDate:function(c){c===b&&(c=this.o.format);var d=this.o.language;return a.map(this.dates,function(a){return p.formatDate(a,c,d)}).join(this.o.multidateSeparator)},setStartDate:function(a){this._process_options({startDate:a}),this.update(),this.updateNavArrows()},setEndDate:function(a){this._process_options({endDate:a}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(a){this._process_options({daysOfWeekDisabled:a}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var b=this.picker.outerWidth(),c=this.picker.outerHeight(),d=10,e=h.width(),f=h.height(),g=h.scrollTop(),i=[];this.element.parents().each(function(){var b=a(this).css("z-index");"auto"!==b&&0!==b&&i.push(parseInt(b))});var j=Math.max.apply(Math,i)+10,k=this.component?this.component.parent().offset():this.element.offset(),l=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),m=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),n=k.left,o=k.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(n-=b-m)):(this.picker.addClass("datepicker-orient-left"),k.left<0?n-=k.left-d:k.left+b>e&&(n=e-b-d));var p,q,r=this.o.orientation.y;"auto"===r&&(p=-g+k.top-c,q=g+f-(k.top+l+c),r=Math.max(p,q)===q?"top":"bottom"),this.picker.addClass("datepicker-orient-"+r),"top"===r?o+=l:o-=c+parseInt(this.picker.css("padding-top")),this.picker.css({top:o,left:n,zIndex:j})}},_allow_update:!0,update:function(){if(this._allow_update){var b=this.dates.copy(),c=[],d=!1;arguments.length?(a.each(arguments,a.proxy(function(a,b){b instanceof Date&&(b=this._local_to_utc(b)),c.push(b)},this)),d=!0):(c=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),c=c&&this.o.multidate?c.split(this.o.multidateSeparator):[c],delete this.element.data().date),c=a.map(c,a.proxy(function(a){return p.parseDate(a,this.o.format,this.o.language)},this)),c=a.grep(c,a.proxy(function(a){return a<this.o.startDate||a>this.o.endDate||!a},this),!0),this.dates.replace(c),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),d?this.setValue():c.length&&String(b)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&b.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var a=this.o.weekStart,b="<tr>";if(this.o.calendarWeeks){var c='<th class="cw">&nbsp;</th>';b+=c,this.picker.find(".datepicker-days thead tr:first-child").prepend(c)}for(;a<this.o.weekStart+7;)b+='<th class="dow">'+o[this.o.language].daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){for(var a="",b=0;12>b;)a+='<span class="month">'+o[this.o.language].monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").html(a)},setRange:function(b){b&&b.length?this.range=a.map(b,function(a){return a.valueOf()}):delete this.range,this.fill()},getClassNames:function(b){var c=[],d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),f=new Date;return b.getUTCFullYear()<d||b.getUTCFullYear()===d&&b.getUTCMonth()<e?c.push("old"):(b.getUTCFullYear()>d||b.getUTCFullYear()===d&&b.getUTCMonth()>e)&&c.push("new"),this.focusDate&&b.valueOf()===this.focusDate.valueOf()&&c.push("focused"),this.o.todayHighlight&&b.getUTCFullYear()===f.getFullYear()&&b.getUTCMonth()===f.getMonth()&&b.getUTCDate()===f.getDate()&&c.push("today"),-1!==this.dates.contains(b)&&c.push("active"),(b.valueOf()<this.o.startDate||b.valueOf()>this.o.endDate||-1!==a.inArray(b.getUTCDay(),this.o.daysOfWeekDisabled))&&c.push("disabled"),this.range&&(b>this.range[0]&&b<this.range[this.range.length-1]&&c.push("range"),-1!==a.inArray(b.valueOf(),this.range)&&c.push("selected")),c},fill:function(){var d,e=new Date(this.viewDate),f=e.getUTCFullYear(),g=e.getUTCMonth(),h=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),i=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),j=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,k=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,l=o[this.o.language].today||o.en.today||"",m=o[this.o.language].clear||o.en.clear||"";if(!isNaN(f)&&!isNaN(g)){this.picker.find(".datepicker-days thead th.datepicker-switch").text(o[this.o.language].months[g]+" "+f),this.picker.find("tfoot th.today").text(l).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(m).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var n=c(f,g-1,28),q=p.getDaysInMonth(n.getUTCFullYear(),n.getUTCMonth());n.setUTCDate(q),n.setUTCDate(q-(n.getUTCDay()-this.o.weekStart+7)%7);var r=new Date(n);r.setUTCDate(r.getUTCDate()+42),r=r.valueOf();for(var s,t=[];n.valueOf()<r;){if(n.getUTCDay()===this.o.weekStart&&(t.push("<tr>"),this.o.calendarWeeks)){var u=new Date(+n+(this.o.weekStart-n.getUTCDay()-7)%7*864e5),v=new Date(Number(u)+(11-u.getUTCDay())%7*864e5),w=new Date(Number(w=c(v.getUTCFullYear(),0,1))+(11-w.getUTCDay())%7*864e5),x=(v-w)/864e5/7+1;t.push('<td class="cw">'+x+"</td>")}if(s=this.getClassNames(n),s.push("day"),this.o.beforeShowDay!==a.noop){var y=this.o.beforeShowDay(this._utc_to_local(n));y===b?y={}:"boolean"==typeof y?y={enabled:y}:"string"==typeof y&&(y={classes:y}),y.enabled===!1&&s.push("disabled"),y.classes&&(s=s.concat(y.classes.split(/\s+/))),y.tooltip&&(d=y.tooltip)}s=a.unique(s),t.push('<td class="'+s.join(" ")+'"'+(d?' title="'+d+'"':"")+">"+n.getUTCDate()+"</td>"),d=null,n.getUTCDay()===this.o.weekEnd&&t.push("</tr>"),n.setUTCDate(n.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(t.join(""));var z=this.picker.find(".datepicker-months").find("th:eq(1)").text(f).end().find("span").removeClass("active");a.each(this.dates,function(a,b){b.getUTCFullYear()===f&&z.eq(b.getUTCMonth()).addClass("active")}),(h>f||f>j)&&z.addClass("disabled"),f===h&&z.slice(0,i).addClass("disabled"),f===j&&z.slice(k+1).addClass("disabled"),t="",f=10*parseInt(f/10,10);var A=this.picker.find(".datepicker-years").find("th:eq(1)").text(f+"-"+(f+9)).end().find("td");f-=1;for(var B,C=a.map(this.dates,function(a){return a.getUTCFullYear()}),D=-1;11>D;D++)B=["year"],-1===D?B.push("old"):10===D&&B.push("new"),-1!==a.inArray(f,C)&&B.push("active"),(h>f||f>j)&&B.push("disabled"),t+='<span class="'+B.join(" ")+'">'+f+"</span>",f+=1;A.html(t)}},updateNavArrows:function(){if(this._allow_update){var a=new Date(this.viewDate),b=a.getUTCFullYear(),c=a.getUTCMonth();switch(this.viewMode){case 0:this.picker.find(".prev").css(this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()&&c<=this.o.startDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()&&c>=this.o.endDate.getUTCMonth()?{visibility:"hidden"}:{visibility:"visible"});break;case 1:case 2:this.picker.find(".prev").css(this.o.startDate!==-(1/0)&&b<=this.o.startDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"}),this.picker.find(".next").css(this.o.endDate!==1/0&&b>=this.o.endDate.getUTCFullYear()?{visibility:"hidden"}:{visibility:"visible"})}}},click:function(b){b.preventDefault();var d,e,f,g=a(b.target).closest("span, td, th");if(1===g.length)switch(g[0].nodeName.toLowerCase()){case"th":switch(g[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var h=p.modes[this.viewMode].navStep*("prev"===g[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,h),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,h),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var i=new Date;i=c(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0),this.showMode(-2);var j="linked"===this.o.todayBtn?null:"view";this._setDate(i,j);break;case"clear":var k;this.isInput?k=this.element:this.component&&(k=this.element.find("input")),k&&k.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":g.is(".disabled")||(this.viewDate.setUTCDate(1),g.is(".month")?(f=1,e=g.parent().find("span").index(g),d=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(e),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(c(d,e,f))):(f=1,e=0,d=parseInt(g.text(),10)||0,this.viewDate.setUTCFullYear(d),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(c(d,e,f))),this.showMode(-1),this.fill());break;case"td":g.is(".day")&&!g.is(".disabled")&&(f=parseInt(g.text(),10)||1,d=this.viewDate.getUTCFullYear(),e=this.viewDate.getUTCMonth(),g.is(".old")?0===e?(e=11,d-=1):e-=1:g.is(".new")&&(11===e?(e=0,d+=1):e+=1),this._setDate(c(d,e,f)))}this.picker.is(":visible")&&this._focused_from&&a(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(a){var b=this.dates.contains(a);if(a||this.dates.clear(),1===this.o.multidate&&0===b||(-1!==b?this.dates.remove(b):this.dates.push(a)),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(a,b){b&&"date"!==b||this._toggle_multidate(a&&new Date(a)),b&&"view"!==b||(this.viewDate=a&&new Date(a)),this.fill(),this.setValue(),this._trigger("changeDate");var c;this.isInput?c=this.element:this.component&&(c=this.element.find("input")),c&&c.change(),!this.o.autoclose||b&&"date"!==b||this.hide()},moveMonth:function(a,c){if(!a)return b;if(!c)return a;var d,e,f=new Date(a.valueOf()),g=f.getUTCDate(),h=f.getUTCMonth(),i=Math.abs(c);if(c=c>0?1:-1,1===i)e=-1===c?function(){return f.getUTCMonth()===h}:function(){return f.getUTCMonth()!==d},d=h+c,f.setUTCMonth(d),(0>d||d>11)&&(d=(d+12)%12);else{for(var j=0;i>j;j++)f=this.moveMonth(f,c);d=f.getUTCMonth(),f.setUTCDate(g),e=function(){return d!==f.getUTCMonth()}}for(;e();)f.setUTCDate(--g),f.setUTCMonth(d);return f},moveYear:function(a,b){return this.moveMonth(a,12*b)},dateWithinRange:function(a){return a>=this.o.startDate&&a<=this.o.endDate},keydown:function(a){if(this.picker.is(":not(:visible)"))return void(27===a.keyCode&&this.show());var b,c,e,f=!1,g=this.focusDate||this.viewDate;switch(a.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),a.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;b=37===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+b),e=new Date(g),e.setUTCDate(g.getUTCDate()+b)),this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;b=38===a.keyCode?-1:1,a.ctrlKey?(c=this.moveYear(this.dates.get(-1)||d(),b),e=this.moveYear(g,b),this._trigger("changeYear",this.viewDate)):a.shiftKey?(c=this.moveMonth(this.dates.get(-1)||d(),b),e=this.moveMonth(g,b),this._trigger("changeMonth",this.viewDate)):(c=new Date(this.dates.get(-1)||d()),c.setUTCDate(c.getUTCDate()+7*b),e=new Date(g),e.setUTCDate(g.getUTCDate()+7*b)),this.dateWithinRange(c)&&(this.focusDate=this.viewDate=e,this.setValue(),this.fill(),a.preventDefault());break;case 32:break;case 13:g=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(g),f=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(a.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(f){this._trigger(this.dates.length?"changeDate":"clearDate");var h;this.isInput?h=this.element:this.component&&(h=this.element.find("input")),h&&h.change()}},showMode:function(a){a&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+p.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var k=function(b,c){this.element=a(b),this.inputs=a.map(c.inputs,function(a){return a.jquery?a[0]:a}),delete c.inputs,a(this.inputs).datepicker(c).bind("changeDate",a.proxy(this.dateUpdated,this)),this.pickers=a.map(this.inputs,function(b){return a(b).data("datepicker")}),this.updateDates()};k.prototype={updateDates:function(){this.dates=a.map(this.pickers,function(a){return a.getUTCDate()}),this.updateRanges()},updateRanges:function(){var b=a.map(this.dates,function(a){return a.valueOf()});a.each(this.pickers,function(a,c){c.setRange(b)})},dateUpdated:function(b){if(!this.updating){this.updating=!0;var c=a(b.target).data("datepicker"),d=c.getUTCDate(),e=a.inArray(b.target,this.inputs),f=this.inputs.length;if(-1!==e){if(a.each(this.pickers,function(a,b){b.getUTCDate()||b.setUTCDate(d);
}),d<this.dates[e])for(;e>=0&&d<this.dates[e];)this.pickers[e--].setUTCDate(d);else if(d>this.dates[e])for(;f>e&&d>this.dates[e];)this.pickers[e++].setUTCDate(d);this.updateDates(),delete this.updating}}},remove:function(){a.map(this.pickers,function(a){a.remove()}),delete this.element.data().datepicker}};var l=a.fn.datepicker;a.fn.datepicker=function(c){var d=Array.apply(null,arguments);d.shift();var e;return this.each(function(){var h=a(this),i=h.data("datepicker"),l="object"==typeof c&&c;if(!i){var n=f(this,"date"),o=a.extend({},m,n,l),p=g(o.language),q=a.extend({},m,p,n,l);if(h.is(".input-daterange")||q.inputs){var r={inputs:q.inputs||h.find("input").toArray()};h.data("datepicker",i=new k(this,a.extend(q,r)))}else h.data("datepicker",i=new j(this,q))}return"string"==typeof c&&"function"==typeof i[c]&&(e=i[c].apply(i,d),e!==b)?!1:void 0}),e!==b?e:this};var m=a.fn.datepicker.defaults={autoclose:!1,beforeShowDay:a.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},n=a.fn.datepicker.locale_opts=["format","rtl","weekStart"];a.fn.datepicker.Constructor=j;var o=a.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,p.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(a){var b=a.replace(this.validParts,"\x00").split("\x00"),c=a.match(this.validParts);if(!b||!b.length||!c||0===c.length)throw new Error("Invalid date format.");return{separators:b,parts:c}},parseDate:function(d,e,f){function g(){var a=this.slice(0,m[k].length),b=m[k].slice(0,a.length);return a===b}if(!d)return b;if(d instanceof Date)return d;"string"==typeof e&&(e=p.parseFormat(e));var h,i,k,l=/([\-+]\d+)([dmwy])/,m=d.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(d)){for(d=new Date,k=0;k<m.length;k++)switch(h=l.exec(m[k]),i=parseInt(h[1]),h[2]){case"d":d.setUTCDate(d.getUTCDate()+i);break;case"m":d=j.prototype.moveMonth.call(j.prototype,d,i);break;case"w":d.setUTCDate(d.getUTCDate()+7*i);break;case"y":d=j.prototype.moveYear.call(j.prototype,d,i)}return c(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),0,0,0)}m=d&&d.match(this.nonpunctuation)||[],d=new Date;var n,q,r={},s=["yyyy","yy","M","MM","m","mm","d","dd"],t={yyyy:function(a,b){return a.setUTCFullYear(b)},yy:function(a,b){return a.setUTCFullYear(2e3+b)},m:function(a,b){if(isNaN(a))return a;for(b-=1;0>b;)b+=12;for(b%=12,a.setUTCMonth(b);a.getUTCMonth()!==b;)a.setUTCDate(a.getUTCDate()-1);return a},d:function(a,b){return a.setUTCDate(b)}};t.M=t.MM=t.mm=t.m,t.dd=t.d,d=c(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0);var u=e.parts.slice();if(m.length!==u.length&&(u=a(u).filter(function(b,c){return-1!==a.inArray(c,s)}).toArray()),m.length===u.length){var v;for(k=0,v=u.length;v>k;k++){if(n=parseInt(m[k],10),h=u[k],isNaN(n))switch(h){case"MM":q=a(o[f].months).filter(g),n=a.inArray(q[0],o[f].months)+1;break;case"M":q=a(o[f].monthsShort).filter(g),n=a.inArray(q[0],o[f].monthsShort)+1}r[h]=n}var w,x;for(k=0;k<s.length;k++)x=s[k],x in r&&!isNaN(r[x])&&(w=new Date(d),t[x](w,r[x]),isNaN(w)||(d=w))}return d},formatDate:function(b,c,d){if(!b)return"";"string"==typeof c&&(c=p.parseFormat(c));var e={d:b.getUTCDate(),D:o[d].daysShort[b.getUTCDay()],DD:o[d].days[b.getUTCDay()],m:b.getUTCMonth()+1,M:o[d].monthsShort[b.getUTCMonth()],MM:o[d].months[b.getUTCMonth()],yy:b.getUTCFullYear().toString().substring(2),yyyy:b.getUTCFullYear()};e.dd=(e.d<10?"0":"")+e.d,e.mm=(e.m<10?"0":"")+e.m,b=[];for(var f=a.extend([],c.separators),g=0,h=c.parts.length;h>=g;g++)f.length&&b.push(f.shift()),b.push(e[c.parts[g]]);return b.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",a.fn.datepicker.DPGlobal=p,a.fn.datepicker.noConflict=function(){return a.fn.datepicker=l,this},a(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(b){var c=a(this);c.data("datepicker")||(b.preventDefault(),c.datepicker("show"))}),a(function(){a('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery),define("datepicker",["jquery","bootstrap"],function(){}),function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.2";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g=x.keys(a),e=0,f=g.length;f>e;e++)if(b.call(d,a[g[e]],g[e],a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-(1/0);var d={computed:-(1/0),value:-(1/0)};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d},x.sample=function(a,b,c){return arguments.length<2||c?a[x.random(a.length-1)]:x.shuffle(a).slice(0,Math.max(0,b))};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index-b.index}),"value")};var C=function(a){return function(b,c,d){var e={},f=null==c?x.identity:B(c);return y(b,function(c,g){var h=f.call(d,c,g,b);a(e,h,c)}),e}};x.groupBy=C(function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)}),x.indexBy=C(function(a,b,c){a[b]=c}),x.countBy=C(function(a,b){x.has(a,b)?a[b]++:a[b]=1}),x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e,f,g,h;return function(){f=this,e=arguments,g=new Date;var i=function(){var j=new Date-g;b>j?d=setTimeout(i,b-j):(d=null,c||(h=a.apply(f,e)))},j=c&&!d;return d||(d=setTimeout(i,b)),j&&(h=a.apply(f,e)),h}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=a[b[e]];return d},x.pairs=function(a){for(var b=x.keys(a),c=b.length,d=new Array(c),e=0;c>e;e++)d[e]=[b[e],a[b[e]]];return d},x.invert=function(a){for(var b={},c=x.keys(a),d=0,e=c.length;e>d;d++)b[a[c[d]]]=c[d];return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),define("underscore",function(a){return function(){var b,c;return c=function(){return this._.templateSettings={interpolate:/\{\{(.+?)\}\}/g},this._},b=c.apply(a,arguments),b||a._}}(this)),define("events",["underscore"],function(a){"use strict";function b(b){var c={},d={};switch(d.addEventListener=function(a,b){return c[a]=c[a]||[],c[a].push(b),!0},d.removeEventListener=function(b,d){return!c[b]||function(){return void 0===d?(delete c[b],!0):void a.each(c[b],function(a){return c[b][a]===d?(c[b].splice(a,1),!1):void 0})}()},d.trigger=function(b){var d=this,e=Array.prototype.slice.bind(arguments);return c.hasOwnProperty(b)?void a.each(c[b],function(a){a.apply(d,e(1))}):!0},b.constructor.name){case"Function":a.extend(b.prototype,d);break;default:a.extend(b,d)}}return function(a){b(a)}}),define("content",["underscore"],function(a){"use strict";function b(a){d.push(a)}function c(b){a.each(d,function(a){a(b)})}var d=[];return{init:function(a){c(a)},add:function(a){b(a)}}}),define("common",["underscore","events"],function(a,b){"use strict";var c,d={},e=Array.prototype.slice;return d.log=function(){var a=[];return function(){a.push(arguments),window.console&&console.log(Array.prototype.slice.call(arguments))}}(),d.KeyCode={left:37,up:38,right:39,down:40,enter:13,backspace:8,entf:46,esc:27,shift:16,cmd:91},d.CarbonCopy=function(b){if(!(b instanceof Array||b instanceof Object))return b;var c=function(){if(b instanceof Array)return e.call(b,0);if(b instanceof Object)return a.extend({},b);throw new Error("Cant copy element")}();return a.each(c,function(a,b){c[b]=d.CarbonCopy(a)}),c},d.sortArrayByObjectKey=function(a,b,c){return c=c||!1,b.sort(function(b,d){return(b[a]<d[a]?-1:b[a]>d[a]?1:0)*(c?1:-1)})},d.findObjectByKey=function(b,c,d){var e;return a.each(d,function(a){return a[b]===c?void(e=a):void 0}),e},d.genericError=function(){console&&"trace"in console&&console.trace(),d.log(arguments),d.trigger("generic error")},d.memoize=function(a){return function(){for(var b=Array.prototype.slice.call(arguments),c="",d=b.length,e=null;d--;)e=b[d],c+=e===Object(e)?JSON.stringify(e):e,a.memoize||(a.memoize={});return c in a.memoize?a.memoize[c]:a.memoize[c]=a.apply(this,b)}},d.expr=function(a){return a},d.trim=function(a){return a.replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},c={},d.setInterval=function(a,b){function d(){c[e]&&(setTimeout(function(){requestAnimationFrame(d)},b),a())}var e=+new Date;return c[e]=!0,d(),e},d.clearInterval=function(a){c[a]&&delete c[a]},b(d),window.Common=d,d}),define("shortcuts",["jquery","underscore","common","events"],function(a,b,c,d){"use strict";function e(a){var b=[];a.metaKey&&b.push("cmd"),a.ctrlKey&&b.push("ctrl"),a.altKey&&b.push("alt"),a.shiftKey&&b.push("shift"),a.which!==c.KeyCode.cmd&&a.which!==c.KeyCode.ctrl&&a.which!==c.KeyCode.alt&&a.which!==c.KeyCode.shift&&b.push(g(a.which)),b=b.join("+"),this.trigger(b,a),this.trigger("always",b,a)}var f,g,h;return h={left:c.KeyCode.left,up:c.KeyCode.up,right:c.KeyCode.right,down:c.KeyCode.down,enter:c.KeyCode.enter,backspace:c.KeyCode.backspace,entf:c.KeyCode.entf,esc:c.KeyCode.esc,shift:c.KeyCode.shift},g=c.memoize(function(a){var b,c=a;for(b in h)if(h[b]===a){c=b;break}return c}),f=function(){var c=this;d(c),a(window).keydown(b.throttle(function(a){e.call(c,a)},150))}}),define("spoiler",["jquery"],function(a){"use strict";var b;b=function(){return a(this).each(function(){a("> .spoiler-teaser",this).unbind("click").first().click(function(b){var c=a(this).find(".fa");b.preventDefault(),a(this).next(".spoiler-content").slideToggle(),c.toggleClass("fa-caret-square-o-down"),c.toggleClass("fa-caret-square-o-up")})})},a.fn.Spoiler=b}),define("i18n",[],function(){"use strict";var a={};return a.de={"Visit %s overview":"Zur %s Ãbersicht","An error occured, please reload.":"","Order successfully saved":"","Your browser doesnt support the following technologies: %s <br>Please update your browser!":"",Close:"SchlieÃen","When asynchronously trying to load a ressource, I came across an error: %s":"","You are using an outdated web browser. Please consider an update!":"","Click to edit":"","Remove Row":"","Edit %s":"Bearbeite %s","Uploading.":"LÃ¤d hoch.","You only can upload one file":"","Not an accepted file type":"","Filesize is too big":"","An error occured: %s":"","Image successfully uploaded.":"","An error occured.":"","Geogebra plugin could not be loaded, please try again.":"","Loading reference data":"",Normal:"",Geogebra:"","Pick a reference type:":"WÃ¤hle einen Referenz-Typ:",Title:"Titel"},a.en={"An error occured, please reload.":"",Close:"","Visit %s overview":"","Order successfully saved":"","Your browser doesnt support the following technologies: %s <br>Please update your browser!":"","When asynchronously trying to load a ressource, I came across an error: %s":"","You are using an outdated web browser. Please consider an update!":"","Click to edit":"","Remove Row":"","Edit %s":"","Uploading.":"","You only can upload one file":"","Not an accepted file type":"","Filesize is too big":"","An error occured: %s":"","Image successfully uploaded.":"","An error occured.":"","Geogebra plugin could not be loaded, please try again.":"","Loading reference data":"",Normal:"",Geogebra:"","Pick a reference type:":"",Title:""},a}),define("translator",["underscore","i18n","common"],function(a,b,c){"use strict";function d(a){return b[g.language]&&b[g.language][a]&&""!==b[g.language][a]?b[g.language][a]:(c.expr(g.debug&&h.push(a)),a)}function e(b,c){return a.each(c,function(a){switch(typeof a){case"string":b=b.replace(/%s/,a);break;case"number":b=b.replace(/%d/,a);break;case"boolean":b=b.replace(/%b/,a?"true":"false")}}),b}var f,g,h=[],i="de";return g={language:i,debug:!1},f=c.memoize(function(){var a=Array.prototype.slice.call(arguments),b=a.shift();return e(d(b),a)}),f.config=function(b){a.extend(g,b)},f.getLanguage=function(){return g.language},g.debug&&(window.t=f),f});var a=!1,b=!1,c=null,d=!1,e=null,g=null,h=!1,i=!1,j=function(){"use strict";function f(a){var b=0,c=0;if("number"==typeof window.innerWidth?(b=window.innerWidth,c=window.innerHeight):document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?(b=document.documentElement.clientWidth,c=document.documentElement.clientHeight):document.body&&(document.body.clientWidth||document.body.clientHeight)&&(b=document.body.clientWidth,c=document.body.clientHeight),a)if(a.clientWidth>0&&a.clientWidth<b)b=a.clientWidth;else{var d=a.getBoundingClientRect();d.left>0&&(b-=2*d.left)}return{width:b,height:c}}function j(a,b){if(a)return 1;var c=f(b),d=parseInt(c.width),e=Math.min(1,d/r.width),g=Math.min(1,c.height/r.height);return Math.min(e,g)}function k(a){for(var b=navigator.plugins,c=b.length,d=new RegExp(a,"i");c--;)if(d.test(b[c].name))return!0;return!1}function l(a,b){var c=new XMLHttpRequest;return"withCredentials"in c?c.open(a,b,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,b)):c=null,c}function m(){return void 0!==window.GGBT_wsf_view||void 0!==window.GGBT_wsf_edit}function n(){return void 0!==window.GGBT_wsf_edit}function o(){var a=q;null!==x?a=x:parseFloat(a)<5&&(a="5.0"),fa(a,!1),ha(q),null!==y&&ga(y,F),w=!0}for(var p={},q="5.0",r={},s=null,t=!1,u=!1,v=null,w=!1,x=null,y=null,z=0;z<arguments.length;z++){var A=arguments[z];if(null!==A)switch(typeof A){case"number":q=A.toFixed(1);break;case"string":A.match(new RegExp("^[0-9]\\.[0-9]+$"))?q=A:v=A;break;case"object":"undefined"!=typeof A.is3D?s=A:r=A;break;case"boolean":t=A,u=!0}}null===s&&(s={is3D:!1,AV:!1,SV:!1,CV:!1,EV2:!1,CP:!1,PC:!1,DA:!1,FI:!1,PV:!1,macro:!1},void 0===r.material_id||u||(t=!0)),null!==v&&void 0===r.id&&(r.id=v);var B="",C="",D="",E=!1,F=!1,G=!1,H=null,I=null,J=null,K=null,L=!1,M=null,N=null,O=null,P=null,Q=null,R=null,S=null,T=null;void 0!==r.height&&(r.height=Math.round(r.height)),void 0!==r.width&&(r.width=Math.round(r.width)),p.setHTML5Codebase=function(a,b){y=a,ga(a,b)},p.setJavaCodebaseVersion=function(a){I=a,ha(a)},p.setHTML5CodebaseVersion=function(a,b){x=a,fa(a,b)},p.getHTML5CodebaseVersion=function(){return J},p.getParameters=function(){return r},p.setJavaCodebase=function(a,b){E=!0,I="/"===a.slice(-1)?a.slice(-4,-1):a.slice(-3),null===b&&(b=-1===a.indexOf("http")),b&&null!==Q&&(Q=null),U(a,b)},p.setFontsCSSURL=function(a){O=a},p.setGiacJSURL=function(a){P=a},p.toggleAppletTypeControls=function(a){var b=p.getLoadedAppletType(),c="none",d="none";"java"===b&&p.isHTML5Installed()?d="inline":"html5"===b&&p.isJavaInstalled()&&(c="inline");var e=document.querySelector(a+" .view_as_Java");null!==e&&(e.style.display=c),e=document.querySelector(a+" .view_as_separator_Java"),null!==e&&(e.style.display=c),e=document.querySelector(a+" .view_as_HTML5"),null!==e&&(e.style.display=d),e=document.querySelector(a+" .view_as_separator_HTML5"),null!==e&&(e.style.display=d)};var U=function(a,b){if(D=a,G=b,null===Q){var c="";if(G){var d=window.location.pathname;c=d.substring(0,d.lastIndexOf("/"))+"/"}p.setJNLPFile(c+a+"/"+ba(G))}else p.setJNLPFile(Q+I+"/"+ba(G))};p.setJNLPFile=function(a){B=a},p.setJNLPBaseDir=function(a){Q=a,p.setJNLPFile(Q+I+"/"+ba(G))},p.inject=function(){function a(){if(!w)return void setTimeout(a,200);c=ca(c);var f=b||document.getElementById(d);p.removeExistingApplet(f,!1),void 0===r.width&&f.clientWidth&&(r.width=f.clientWidth),void 0===r.height&&f.clientHeight&&(r.height=f.clientHeight),r.width&&r.height||"html5"!==c||(delete r.width,delete r.height),H=c,"java"===c?W(f,r):"compiled"===c?$(f,r,!0):"screenshot"===c?_(f,r):Z(f,r,e)}for(var b,c="auto",d=r.id,e=!1,f=0;f<arguments.length;f++){var g=arguments[f];"string"==typeof g?(g=g.toLowerCase(),"preferjava"===g||"preferhtml5"===g||"java"===g||"html5"===g||"auto"===g||"screenshot"===g||"prefercompiled"===g||"compiled"===g?c=g:d=arguments[f]):"boolean"==typeof g?e=g:g instanceof HTMLElement&&(b=g)}a()},p.getViews=function(){return s},p.isJavaInstalled=function(){return"undefined"!=typeof deployJava?deployJava.versionCheck("1.6.0+")||deployJava.versionCheck("1.4")||deployJava.versionCheck("1.5.0*"):navigator.javaEnabled()?ea()&&da()>=10&&window.innerWidth===screen.width&&window.innerHeight===screen.height?!1:navigator.userAgent.indexOf("Android ")>-1?!1:ea()||k("java")?!0:!1:void 0};var V=function(a){var b,c;void 0!==r.tubeurl?b=r.tubeurl:window.location.host.indexOf("geogebratube.org")>-1||window.location.host.indexOf("tube.geogebra.org")>-1||window.location.host.indexOf("tube-test.geogebra.org")>-1||window.location.host.indexOf("tube-beta.geogebra.org")>-1||window.location.host.indexOf("geomatech-test.geogebra.org")>-1?b=window.location.protocol+"//"+window.location.host:(c="http"===window.location.protocol.substr(0,4)?window.location.protocol:"http:",b=c+"//tube.geogebra.org");var d={request:{"-api":"1.0.0",task:{"-type":"fetch",fields:{field:[{"-name":"id"},{"-name":"geogebra_format"},{"-name":"width"},{"-name":"height"},{"-name":"toolbar"},{"-name":"menubar"},{"-name":"inputbar"},{"-name":"reseticon"},{"-name":"labeldrags"},{"-name":"shiftdragzoom"},{"-name":"rightclick"},{"-name":"ggbbase64"}]},filters:{field:[{"-name":"id","#text":""+r.material_id}]},order:{"-by":"id","-type":"asc"},limit:{"-num":"1"}}}},e=function(){var c=g.responseText,d=JSON.parse(c),e=d.responses.response.item;return void 0===e?void h():(q=e.geogebra_format,void 0===r.ggbBase64&&(r.ggbBase64=e.ggbBase64),void 0===r.width&&(r.width=e.width),void 0===r.height&&(r.height=e.height),void 0===r.showToolBar&&(r.showToolBar="true"===e.toolbar),void 0===r.showMenuBar&&(r.showMenuBar="true"===e.menubar),void 0===r.showAlgebraInput&&(r.showAlgebraInput="true"===e.inputbar),void 0===r.showResetIcon&&(r.showResetIcon="true"===e.reseticon),void 0===r.enableLabelDrags&&(r.enableLabelDrags="true"===e.labeldrags),void 0===r.enableShiftDragZoom&&(r.enableShiftDragZoom="true"===e.shiftdragzoom),void 0===r.enableRightClick&&(r.enableRightClick="true"===e.rightclick),void 0===r.showToolBarHelp&&(r.showToolBarHelp=r.showToolBar),parseFloat(e.geogebra_format)>=5&&(s.is3D=!0),p.setPreviewImage(b+"/files/material-"+e.id+".png",b+"/images/GeoGebra_loading.png"),void a())},f=b+"/api/json.php",g=l("POST",f),h=function(){ia("Error: The request for fetching material_id "+r.material_id+" from tube was not successful.");
};return g?(g.onload=e,g.onerror=h,g.onprogress=function(){},g.setRequestHeader&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),void g.send(JSON.stringify(d))):void h()};p.isHTML5Installed=function(){if(ea()){if((s.is3D||"web3d.nocache.js"===K)&&da()<11)return!1;if(s.CV&&da()<10)return!1;if(da()<9)return!1}return!0},p.isCompiledInstalled=function(){if(ea()){if(s.is3D&&da()<11)return!1;if(da()<9)return!1}return!0},p.getLoadedAppletType=function(){return H},p.setPreviewImage=function(a,b){M=a,N=b},p.removeExistingApplet=function(a,b){var c;if("string"==typeof a&&(a=document.getElementById(a)),"compiled"===H&&void 0!==window[r.id]){if("function"==typeof window[r.id].stopAnimation&&window[r.id].stopAnimation(),"function"==typeof window[r.id].remove&&window[r.id].remove(),void 0!==ggbApplets)for(c=0;c<ggbApplets.length;c++)ggbApplets[c]===window[r.id]&&ggbApplets.splice(c,1);window[r.id]=void 0}for(H=null,c=0;c<a.childNodes.length;c++){var d=a.childNodes[c].tagName;"applet_screenshot"===a.childNodes[c].className?b?(a.childNodes[c].style.display="block",H="screenshot"):a.childNodes[c].style.display="none":("APPLET"===d||"ARTICLE"===d||"DIV"===d||"compiled"===H&&("SCRIPT"===d||"STYLE"===d))&&(a.removeChild(a.childNodes[c]),c--)}var e=void 0!==r.id?r.id:"ggbApplet",f=window[e];void 0!==f&&(window[e]=null)},p.refreshHitPoints=function(){if(parseFloat(e)>=5)return!0;var a=p.getAppletObject();return a&&"function"==typeof a.recalculateEnvironments?(a.recalculateEnvironments(),!0):!1},p.startAnimation=function(){var a=p.getAppletObject();return a&&"function"==typeof a.startAnimation?(a.startAnimation(),!0):!1},p.stopAnimation=function(){var a=p.getAppletObject();return a&&"function"==typeof a.stopAnimation?(a.stopAnimation(),!0):!1},p.setPreCompiledScriptPath=function(a,b){R=a,null===S&&(S=R),T=b},p.setPreCompiledResourcePath=function(a){S=a},p.getAppletObject=function(){var a=void 0!==r.id?r.id:"ggbApplet";return window[a]};var W=function(a,b){if(s.CV){var c;c=null!==P?P:D+"/giac.js";var d=document.createElement("script");d.setAttribute("src",c),d.onload=function(){window._GIAC_caseval=__ggb__giac.cwrap("_ZN4giac7casevalEPKc","string",["string"])},a.appendChild(d),d=document.createElement("script"),d.innerHTML="       var _GIAC_caseval = 'nD';       function _ggbCallGiac(exp) {           var ret = _GIAC_caseval(exp);           return ret;       }",a.appendChild(d)}var e=document.createElement("applet");e.setAttribute("name",void 0!==b.id?b.id:"ggbApplet"),void 0!==b.height&&b.height>0&&e.setAttribute("height",b.height),void 0!==b.width&&b.width>0&&e.setAttribute("width",b.width),e.setAttribute("code","dummy"),X(e,"jnlp_href",B),E&&X(e,"codebase",D),X(e,"boxborder","false"),X(e,"centerimage","true"),"5.0"===q?X(e,"java_arguments","-Xmx1024m -Djnlp.packEnabled=false"):X(e,"java_arguments","-Xmx1024m -Djnlp.packEnabled=true");for(var f in b)"width"!==f&&"height"!==f&&X(e,f,b[f]);X(e,"framePossible","false"),G||X(e,"image","http://tube.geogebra.org/images/java_loading.gif"),X(e,"codebase_lookup","false"),("Microsoft Internet Explorer"!==navigator.appName||da()>9)&&e.appendChild(document.createTextNode("This is a Java Applet created using GeoGebra from www.geogebra.org - it looks like you don't have Java installed, please go to www.java.com")),e.style.display="block",a.appendChild(e),ia("GeoGebra Java applet injected. Used JNLP file = '"+B+"'"+(E?" with overridden codebase '"+D+"'.":"."),b)},X=function(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)},Y=function(a){return a&&"false"!==a},Z=function(f,h,i){function k(a,b){b&&"function"==typeof b.appletOnLoad&&"function"==typeof renderGGBElement?renderGGBElement(a,b.appletOnLoad):renderGGBElement(a),ia("GeoGebra HTML5 applet injected and rendered with previously loaded codebase.",b)}function l(b,d){"undefined"==typeof renderGGBElement?(null===c&&(c=[]),c.push({article:b,params:d}),window.renderGGBElementReady=function(){a=!0,null!==c&&c.length&&(c.forEach(function(a){k(a.article,a.params)}),c=null)},parseFloat(J)<5&&(b.className+=" geogebraweb")):k(b,d)}var m=!a&&!b;(!a&&!b||e!==J||d&&!L)&&(m=!0,a=!1,b=!1);var o=document.createElement("article"),p=h.width,q=h.height;void 0!==h.width&&(parseFloat(J)<=4.4?(Y(h.showToolBar)&&(h.height-=7),Y(h.showAlgebraInput)&&(h.height-=37),h.width<605&&Y(h.showToolBar)&&(h.width=605,p=605)):(h.width<560&&Y(h.showToolBar)&&(h.width=560,p=560),parseFloat(J)>=5&&h.width<745&&Y(h.showMenuBar)&&(h.width=745,p=745))),o.className="notranslate",o.style.border="none",o.style.display="inline-block";var r=1;h.hasOwnProperty("scale")?r=h.scale:n()||(r=j(h.screenshotGenerator,f),isNaN(r)||1===r||o.setAttribute("data-param-scale",r));for(var s in h)h.hasOwnProperty(s)&&"appletOnLoad"!==s&&o.setAttribute("data-param-"+s,h[s]);if(!i&&null!==M&&parseFloat(J)>=4.4&&void 0!==h.width){var t=aa(p,q,h.borderColor,r),u=document.createElement("div");if(u.style.position="relative",u.style.display="block",u.style.width=p+"px",u.style.height=q+"px",h.hasOwnProperty("showSplash")||o.setAttribute("data-param-showSplash","false"),parseFloat(J)>=5){if("function"==typeof h.appletOnLoad)var v=h.appletOnLoad;if(h.appletOnLoad=function(){var a=f.querySelector(".ggb_preview");a&&a.parentNode.removeChild(a),"function"==typeof v&&v()},u.appendChild(t),r&&1!==r&&!isNaN(r)&&!n()){var w=u;"applet_container"===f.id&&(w=f),w.style.transform="scale("+r+","+r+")",w.style.transformOrigin="0% 0% 0px"}}else o.appendChild(t);u.appendChild(o),f.appendChild(u)}else f.appendChild(o);if(m){if(b=!0,parseFloat(J)>=4.4){var x;x=null===O?C+"css/fonts.css":O;var y=document.createElement("script");y.type="text/javascript",y.innerHTML='\n//<![CDATA[\nWebFontConfig = {\n   loading: function() {},\n   active: function() {},\n   inactive: function() {},\n   fontloading: function(familyName, fvd) {},\n   fontactive: function(familyName, fvd) {},\n   fontinactive: function(familyName, fvd) {},\n   custom: {\n       families: ["geogebra-sans-serif", "geogebra-serif"],\n           urls: [ "'+x+'" ]\n   }\n};\n//]]>\n\n';var z=document.createElement("script");z.type="text/javascript",z.src=C+"js/webfont.js",f.appendChild(y),f.appendChild(z)}for(var A=0;A<o.childNodes.length;A++){var B=o.childNodes[A].tagName;"TABLE"===B&&(o.removeChild(o.childNodes[A]),A--)}if(null!==g){var D=document.querySelector('script[src="'+g+'"]');void 0!==D&&D.parentNode.removeChild(D)}var E=document.createElement("script"),F=function(){l(o,h)};ia(C),E.src=C+K,E.onload=F,d=L,e=J,g=E.src,ia("GeoGebra HTML5 applet injected. Codebase = '"+C+"'.",h),f.appendChild(E)}else l(o,h);h.height=q,h.width=p},$=function(a,b,c){var d=b.id,e=j(b.screenshotGenerator,a);1!==e&&(b.scale=e,a.style.minWidth=b.width*e+"px",a.style.minHeight=b.height*e+"px");var f=document.createElement("div");f.id="view-container-"+d,f.setAttribute("width",b.width),f.setAttribute("height",b.height),f.style.width=b.width*e+"px",f.style.height=b.height*e+"px",void 0===b.showSplash&&(b.showSplash=!0);var g=document.createElement("div");if(g.id="__ggb__images",!c&&null!==M&&parseFloat(J)>=4.4&&void 0!==b.width){var k=aa(b.width,b.height,b.borderColor),l=document.createElement("div");l.style.position="relative",l.className="ggb_preview_container",l.style.display="block",l.style.width=b.width*e+"px",l.style.height=b.height*e+"px",l.appendChild(k),a.appendChild(l)}if(!h&&!i){var m=document.createElement("script");m.type="text/javascript",m.innerHTML='\nWebFontConfig = {\n   loading: function() {},\n   active: function() {},\n   inactive: function() {},\n   fontloading: function(familyName, fvd) {},\n   fontactive: function(familyName, fvd) {       if (!ggbCompiledAppletsLoaded) {           ggbCompiledAppletsLoaded = true;                      setTimeout(function() {               ggbCompiledResourcesLoadFinished = true;               ggbCompiledResourcesLoadInProgress = false;               if (window.ggbApplets != undefined) {                   for (var i = 0 ; i < window.ggbApplets.length ; i++) {                       window.ggbApplets[i].init({scale:window.ggbApplets[i].scaleParameter, url:window.ggbApplets[i].preCompiledScriptPath+"/", ss:'+(b.showSplash?"true":"false")+", sdz:"+(b.enableShiftDragZoom?"true":"false")+", rc:"+(b.enableRightClick?"true":"false")+", sri:"+(b.showResetIcon?"true":"false")+'});                   }               }               if (typeof window.ggbCompiledAppletsOnLoad == "function") {                   window.ggbCompiledAppletsOnLoad();               }           },1);       }   },\n   fontinactive: function(familyName, fvd) {},\n   custom: {\n       families: ["geogebra-sans-serif", "geogebra-serif"],\n           urls: [ "'+S+'/fonts/fonts.css" ]\n   }\n};\n\n';var n=document.createElement("script");n.type="text/javascript",n.src=S+"/fonts/webfont.js",i=!0,a.appendChild(m),a.appendChild(n)}var o=document.createElement("style");o.innerHTML="\n.view-frame {\n    border: 1px solid black;\n    display: inline-block;\n}\n#tip {\n    background-color: yellow;\n    border: 1px solid blue;\n    position: absolute;\n    left: -200px;\n    top: 100px;\n};\n",a.appendChild(o);var p=document.createElement("script"),q=function(){window[d].preCompiledScriptPath=R,window[d].scaleParameter=b.scale,c||a.querySelector(".ggb_preview_container").remove(),a.appendChild(f),a.appendChild(g),h&&(window[d].init({scale:b.scale,url:R+"/",ss:b.showSplash,sdz:b.enableShiftDragZoom,rc:b.enableRightClick,sri:b.showResetIcon}),"function"==typeof window.ggbAppletOnLoad&&window.ggbAppletOnLoad(a.id))},r=R+"/applet.js"+(null!=T&&void 0!=T?"?v="+T:"");p.src=r,p.onload=q,ia("GeoGebra precompiled applet injected. Script="+r+"."),a.appendChild(p)},_=function(a,b){if(null!==M&&parseFloat(J)>=4.4&&void 0!==b.width){var c=aa(b.width,b.height,b.borderColor),d=document.createElement("div");d.style.position="relative",d.style.display="block",d.style.width=b.width+"px",d.style.height=b.height+"px",d.className="applet_screenshot",d.appendChild(c),a.appendChild(d)}},aa=function(a,b,c){var d=document.createElement("div");d.className="ggb_preview",d.style.position="absolute",d.style.zIndex="1000001",d.style.width=a-2+"px",d.style.height=b-2+"px",d.style.top="0px",d.style.left="0px",d.style.overflow="hidden",d.style.backgroundColor="white";var e="black";void 0!==c&&"none"===c&&(e="transparent"),d.style.border="1px solid "+e;var f=document.createElement("img");if(f.style.position="relative",f.style.zIndex="1000",f.style.top="-1px",f.style.left="-1px",f.setAttribute("src",M),f.style.opacity=.3,null!==N){var g=document.createElement("img");g.style.position="absolute",g.style.zIndex="1001",g.style.opacity=1,g.setAttribute("src",N);var h=360;h>a/4*3&&(h=a/4*3);var i=h/5.8,j=(a-h)/2,k=(b-i)/2;g.style.left=j+"px",g.style.top=k+"px",g.setAttribute("width",h-4),g.setAttribute("height",i-4),d.appendChild(g)}return d.appendChild(f),d},ba=function(a){var b=parseFloat(I),c="applet"+10*b+"_";return c+=a?"local":"web",s.is3D&&(c+="_3D"),c+=".jnlp"},ca=function(a){return a=a.toLowerCase(),"java"===a||"html5"===a||"screenshot"===a||"compiled"===a?a:"preferjava"===a?p.isJavaInstalled()?"java":"html5":"preferhtml5"===a?p.isHTML5Installed()?"html5":"java":"prefercompiled"===a&&null!==R?p.isCompiledInstalled()?"compiled":"java":p.isJavaInstalled()&&!p.isHTML5Installed()?"java":"html5"},da=function(){var a=navigator.appVersion;return a.indexOf("Trident/7.0")>0?11:a.indexOf("MSIE")+1?parseFloat(a.split("MSIE")[1]):999},ea=function(){return 999!=da()},fa=function(a,b){if(J=a,b)return void ga(J,!0);var c=!t;if(c){var d=parseFloat(J);!isNaN(d)&&4.4>d&&(c=!1)}var e,f;e="http"===window.location.protocol.substr(0,4)?window.location.protocol:"http:";var g=J.indexOf("//");f=g>0?J:0===g?e+J:e+"//web.geogebra.org/"+J+"/";var h=["web","webSimple","web3d","tablet","phone"];for(var i in h)if(J.slice(-1*h[i].length)===h[i]||J.slice(-1*(h[i].length+1))===h[i]+"/")return void ga(f,!1);if(m()||!c||s.is3D||s.AV||s.SV||s.CV||s.EV2||s.CP||s.PC||s.DA||s.FI||s.PV||Y(r.showToolBar)||Y(r.showMenuBar)||Y(r.showAlgebraInput)||Y(r.enableRightClick)){var d=parseFloat(J);f+=s.is3D&&(isNaN(d)||d>=5)?"web3d/":"web/"}else f+="webSimple/";ga(f,!1)},ga=function(a,b){"/"!==a.slice(-1)&&(a+="/"),C=a,null===b&&(b=-1===a.indexOf("http")),F=b,K="web.nocache.js",L=!1;var c=C.split("/");c.length>1&&(b||"webSimple"!==c[c.length-2]?("web3d"===c[c.length-2]||"tablet"===c[c.length-2]||"phone"===c[c.length-2])&&(K=c[c.length-2]+".nocache.js"):(K="webSimple.nocache.js",L=!0)),c=a.split("/"),J=c[c.length-3],"test"===J.substr(0,4)?J=J.substr(4,1)+"."+J.substr(5,1):("war"===J.substr(0,3)||"beta"===J.substr(0,4))&&(J="5.0")},ha=function(a){I="test32"===a?"3.2":"test40"===a?"4.0":"test42"===a?"4.2":"test50"===a?"5.0":"test"===a?q:a,parseFloat(I)<4&&(I="4.0");var b;b="http"===window.location.protocol.substr(0,4)?window.location.protocol:"http:";var c=b+"//jars.geogebra.org/webstart/"+I+"/";("4.0"===I||"4.2"===I)&&(c+="jnlp/"),p.setJNLPBaseDir("http://tube.geogebra.org/webstart/"),U(c,!1)},ia=function(a,b){window.console&&window.console.log&&(!b||"undefined"==typeof b.showLogging||b.showLogging&&"false"!==b.showLogging)&&console.log(a)};return void 0!==r.material_id?V(o):o(),p};define("deployggb",function(){}),define("injections",["jquery","common","translator","deployggb","content"],function(a,b,c){"use strict";var d,e={},f={},g=0,h="https://www.geogebra.org/web/4.4/web/web.nocache.js",i=a('<article class="geogebraweb" data-param-width="700" data-param-height="525" data-param-usebrowserforjs="true" data-param-enableRightClick="false"></article>'),k=0,l=a('<div class="hidden-sm hidden-xs" style="transform-origin:top left"></div><a class="hidden-md hidden-lg">hi</a>');window.ggbOnInit=function(a){f[a]&&f[a]()},d=function(){var d=a(this).length;return a(this).each(function(){function m(a){if(Modernizr.touch)q.html('<div class="alert alert-warning">'+c("Sadly this geogebra plugin cannot be shown on your device. We work on that ;-)")+"</div>");else{var b="ggbApplet"+g,d=i.clone();g+=1,d.attr("data-param-id",b),d.attr("data-param-ggbbase64","UEsDBBQACAgIAD10R0QAAAAAAAAAAAAAAAAWAAAAZ2VvZ2VicmFfamF2YXNjcmlwdC5qc0srzUsuyczPU0hPT/LP88zLLNHQVKiuBQBQSwcI1je9uRkAAAAXAAAAUEsDBBQACAgIAD10R0QAAAAAAAAAAAAAAAAMAAAAZ2VvZ2VicmEueG1srVZtb9s2EP6c/oqDPqc2qTfbgZyiLVCgQBYUSzcU/UZJtMxZFgWRsp2iP353pGQ7Lx2WZXFk6njPvfLu6OzdYVvDTnZG6WYZ8AkLQDaFLlVTLYPert7Og3fXb7JK6krmnYCV7rbCLoN4EgcnOaQmnJEwHIy6avSt2ErTikLeFWu5FTe6ENYh19a2V9Ppfr+fjDonuqumVZVPDqYMAP1pzDIYXq5Q3QOhfeTgIWN8+u23G6/+rWqMFU0hAyBfe3X95iLbq6bUe9ir0q6XQZKmAaylqtbk/GIewJRALUbQysKqnTQoekaCKpeB3baBg4mG+Bf+DepjOAGUaqdK2S2DW3EbgO6UbOzA5IOR6Sie7ZTcez305kzEbDHDTCqj8loug5WoDYahmlWHKUQPuh5JY+9rmYtupE8O8Ev8IED9kKQLT8DHjRzGLumZ4ZMkzPtybjgAq3XttLJ/8GCgTy4MGw98GD2InvMgxce59siD+ZkHiOPwE3AJ/RIB/HQviafjgUw9OXMLZ37hA3NOXwsi0ldGFP2niPiZVX9SLzF6PMbFC0yGrzF5jPIZg2HyixhfmdpnE4u23L97npiMwpeYfNIi/9ZiNh37MxvqEsyasENerdziZHIlBwmWazqDS0iAL3CZUdmGwBOIEyT5HFJaZxBRpcYQwRwIxyOIYxKb41fsqjiFBHXR5syXM0QxJBFgVV9CGAOEDMKQ3jmEESKSBBIUIuuczEYpxCkS0RziBXpGmqiZIpRDGo2HEHGISJbPIEwhDWEWkXhMXieQEjxmEHOInSVEzSGiCPC0W22UTyWjGVq3x6S7rKmm7e2QqWG/2JZj1qx+BC91sflwTO3AkcLYcxjOzNMo9jP0waS+yGqRyxpvqTs6d4CdqKmcnYWVbiwMZ85Dv1d1ol2rwtxJa1HKwF9iJ26ElYdPiDajbWfaXSCZ7ItalUo0f2JRkApSCON94nr0eJ/wwXKhdVfe3RusFDh8l53G/uTJhJ3+4gSn3r1nRQ9ZKd4DphBU4wk7Z3BGl9f9r3nOttwdYxMHacb8Vx110JBZIj6bD7o+bbVaNfajaG3fuTsfR0JHUb1vqlq65LoOwnu22OT6cOeyGqZe19f71g0P50BefdS17gBbMEwSBAxr7leHIc+OKOYwzCHYeEyqPPL5InQIt+Z+dSg8d+/aECkfw+RsNKOMmxyo/LyFXdHQrd03yt6MhFXF5hQp4W/7bY71Nog9VMn/J5XZ9FGFZRvZNbL2ddTgSfa6N76wj8V5kfVGfhF2/b4pf5cVNuUXQWPQomoPPXlcykJtUdDvD6kTdKx/oKt+t5RVJ8cIa/dzzCfWcdl5VT/Zdqo+dXr7udl9xZp55Go2HePJTNGplkoTchzLG3mqvlIZgVO9PJfD4A1GUdDIwURaSmIAordr3blfXNi1uJKFc6jr3OEn5fXfUEsHCAggsi84BAAA2AoAAFBLAQIUABQACAgIAD10R0TWN725GQAAABcAAAAWAAAAAAAAAAAAAAAAAAAAAABnZW9nZWJyYV9qYXZhc2NyaXB0LmpzUEsBAhQAFAAICAgAPXRHRAggsi84BAAA2AoAAAwAAAAAAAAAAAAAAAAAXQAAAGdlb2dlYnJhLnhtbFBLBQYAAAAAAgACAH4AAADPBAAAAAA="),f[b]=function(){var c=window[b];c.setXML(a)},q.html(d)}}function n(){var b,c,d,e="gtApplet"+k,f=l.clone();k++,f.attr("id",e),q.html(f),d=new j({material_id:t.substr(5)},!0),d.inject(e,"preferHTML5"),b=function(){setTimeout(b,1e3),c=f.parent().width()/(f.find("div:first").width()*f.find("div:first > article").attr("data-param-scale")),a(f[0]).css("transform","scale("+c+")"),a(f[0]).height(f.find("div:first").height()*c*f.find("div:first > article").attr("data-param-scale")),a(f[0]).parent().height("100%")},b(),a(f[1]).attr("href","http://tube.geogebra.org/student/m"+t.substr(5)),a(f[1]).text(s)}function o(a){b.log("Illegal injection found: "+t),a.html('<div class="alert alert-info">'+c("Illegal injection found")+"</div>")}function p(a,c){if(e[t]={data:a,contentType:c},a.documentElement&&"geogebra"===a.documentElement.nodeName)m(a.documentElement.outerHTML);else if("image/jpeg"===c||"image/png"===c)q.html('<img src="'+t+'" title="'+s+'" />');else try{a=JSON.parse(a),a.response?(q.html('<div class="panel panel-default"><div class="panel-body">'+a.response+"</div></div>"),b.trigger("new context",q)):o(q)}catch(d){o(q)}}var q=a(this),r=a("> a",q),s=r.text(),t=r.attr("href");return t?(e[t]&&p(e[t].data,e[t].contentType),void a.ajax(t).success(function(){p(arguments[0],arguments[2].getResponseHeader("Content-Type"))}).always(function(){d-=1,0===d&&g>0&&require([h])}).error(function(){b.log("Could not load injection from Serlo server"),"/ggt/"===t.substr(0,5)&&n()})):!0})},a.fn.Injections=d}),define("parser",[],function(){"use strict";var a=function(){};return a.prototype.setConverter=function(a,b){this.converter=function(c){return a[b](c)}},a.prototype.parse=function(a){return this.converter?this.converter(a):a},a}),define("cache",[],function(){"use strict";return function(a,b){function c(){this.values={}}function d(){return g}function e(a){if(o)try{return JSON.parse(a)}catch(b){console.log("aint no json")}return a}function f(a){if(o)try{return JSON.stringify(a)}catch(b){}return a}function g(a){return g.prototype.functions(a)}function h(a){return m.setItem(this.memoryKey,f(a)),a}function i(){var a=m.getItem(this.memoryKey);return e(a)}function j(){return m.removeItem(this.memoryKey)}function k(){var b,c,d,e,f,g=a.document.cookie.split(";");for(b=0,c=g.length;c>b;b+=1)d=g[b],e=d.indexOf("="),f=e>-1?d.substr(0,e):d,a.document.cookie=f+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT"}var l,m,n={Storage:!!a.Storage,localStorage:!!a.localStorage,sessionStorage:!!a.sessionStorage,JSON:!!a.JSON,jQueryCookie:"function"==typeof jQuery&&"function"==typeof jQuery.cookie},o=n.JSON;return c.prototype.isFake=function(){return!n.jQueryCookie},c.prototype.setItem=function(a,b){return n.jQueryCookie?jQuery.cookie(a,b,{json:o}):(this.values[a]=b,b)},c.prototype.getItem=function(a){return n.jQueryCookie?jQuery.cookie(a,b,{json:o}):this.values[a]||null},c.prototype.removeItem=function(a){return n.jQueryCookie?jQuery.removeCookie(a):(this.values[a]=b,!0)},c.prototype.clear=function(){if(n.jQueryCookie)k();else{var a;for(a in this.values)this.values.hasOwnProperty(a)&&(this.values[a]=null)}return!0},m=n.localStorage?a.localStorage:new c,g.prototype.functions=function(a){if(a===b)throw"No valid memory key given";return{memoryKey:a,memorize:h,remember:i,forget:j}},g.runs=function(){return!("function"==typeof m.isFake&&m.isFake()===!0)},g.setStorage=function(b){return"localStorage"!==b&&"sessionStorage"!==b||!n[b]?!1:(m=a[b],!0)},g.getStorage=function(){return m},g.json=function(){return o=!0},g.nojson=function(){return o=!1,!o},g.getDrunk=function(){return m.clear()},function(){return l||(l=new d),l}()}(window)}),define("text",["module"],function(a){"use strict";var b,c,d,e,f,g=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],h=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,i=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,j="undefined"!=typeof location&&location.href,k=j&&location.protocol&&location.protocol.replace(/\:/,""),l=j&&location.hostname,m=j&&(location.port||void 0),n={},o=a.config&&a.config()||{};return b={version:"2.0.14",strip:function(a){if(a){a=a.replace(h,"");var b=a.match(i);b&&(a=b[1])}else a="";return a},jsEscape:function(a){return a.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:o.createXhr||function(){var a,b,c;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(b=0;3>b;b+=1){c=g[b];try{a=new ActiveXObject(c)}catch(d){}if(a){g=[c];break}}return a},parseName:function(a){var b,c,d,e=!1,f=a.lastIndexOf("."),g=0===a.indexOf("./")||0===a.indexOf("../");return-1!==f&&(!g||f>1)?(b=a.substring(0,f),c=a.substring(f+1)):b=a,d=c||b,f=d.indexOf("!"),-1!==f&&(e="strip"===d.substring(f+1),d=d.substring(0,f),c?c=d:b=d),{moduleName:b,ext:c,strip:e}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(a,c,d,e){var f,g,h,i=b.xdRegExp.exec(a);return i?(f=i[2],g=i[3],g=g.split(":"),h=g[1],g=g[0],!(f&&f!==c||g&&g.toLowerCase()!==d.toLowerCase()||(h||g)&&h!==e)):!0},finishLoad:function(a,c,d,e){d=c?b.strip(d):d,o.isBuild&&(n[a]=d),e(d)},load:function(a,c,d,e){if(e&&e.isBuild&&!e.inlineText)return void d();o.isBuild=e&&e.isBuild;var f=b.parseName(a),g=f.moduleName+(f.ext?"."+f.ext:""),h=c.toUrl(g),i=o.useXhr||b.useXhr;return 0===h.indexOf("empty:")?void d():void(!j||i(h,k,l,m)?b.get(h,function(c){b.finishLoad(a,f.strip,c,d)},function(a){d.error&&d.error(a)}):c([g],function(a){b.finishLoad(f.moduleName+"."+f.ext,f.strip,a,d)}))},write:function(a,c,d,e){if(n.hasOwnProperty(c)){var f=b.jsEscape(n[c]);d.asModule(a+"!"+c,"define(function () { return '"+f+"';});\n")}},writeFile:function(a,c,d,e,f){var g=b.parseName(c),h=g.ext?"."+g.ext:"",i=g.moduleName+h,j=d.toUrl(g.moduleName+h)+".js";b.load(i,d,function(c){var d=function(a){return e(j,a)};d.asModule=function(a,b){return e.asModule(a,j,b)},b.write(a,i,d,f)},f)}},"node"===o.env||!o.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(c=require.nodeRequire("fs"),b.get=function(a,b,d){try{var e=c.readFileSync(a,"utf8");"\ufeff"===e[0]&&(e=e.substring(1)),b(e)}catch(f){d&&d(f)}}):"xhr"===o.env||!o.env&&b.createXhr()?b.get=function(a,c,d,e){var f,g=b.createXhr();if(g.open("GET",a,!0),e)for(f in e)e.hasOwnProperty(f)&&g.setRequestHeader(f.toLowerCase(),e[f]);o.onXhr&&o.onXhr(g,a),g.onreadystatechange=function(b){var e,f;4===g.readyState&&(e=g.status||0,e>399&&600>e?(f=new Error(a+" HTTP status: "+e),f.xhr=g,d&&d(f)):c(g.responseText),o.onXhrComplete&&o.onXhrComplete(g,a))},g.send(null)}:"rhino"===o.env||!o.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?b.get=function(a,b){var c,d,e="utf-8",f=new java.io.File(a),g=java.lang.System.getProperty("line.separator"),h=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f),e)),i="";try{for(c=new java.lang.StringBuffer,d=h.readLine(),d&&d.length()&&65279===d.charAt(0)&&(d=d.substring(1)),null!==d&&c.append(d);null!==(d=h.readLine());)c.append(g),c.append(d);i=String(c.toString())}finally{h.close()}b(i)}:("xpconnect"===o.env||!o.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(d=Components.classes,e=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),f="@mozilla.org/windows-registry-key;1"in d,b.get=function(a,b){var c,g,h,i={};f&&(a=a.replace(/\//g,"\\")),h=new FileUtils.File(a);try{c=d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream),c.init(h,1,0,!1),g=d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream),g.init(c,"utf-8",c.available(),e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),g.readString(c.available(),i),g.close(),c.close(),b(i.value)}catch(j){throw new Error((h&&h.path||"")+": "+j)}}),b}),define("text!editor/templates/layout/column.html",[],function(){return'<div class="c{{ width }}"></div>'}),define("column",["jquery","underscore","events","translator","text!./editor/templates/layout/column.html"],function(a,b,c,d,e){"use strict";var f,g=b.template(e),h="<p>"+d("Click to edit")+"</p>";return f=function(b,d){var e=this;c(e),e.data=d||"",e.$el=a(g({width:b})),e.type=b,e.$el.on("click","a",function(a){a.preventDefault()}),e.$el.click(function(a){a.preventDefault(),a.stopPropagation(),e.trigger("select",e)})},f.prototype.update=function(b,c){var d;return this.data=b,c=c&&""!==c?c:h,d=this.$el.quickdiff("patch",a("<div></div>").html(c),["mathSpan","mathSpanInline"]),this.trigger("update",this),d},f.prototype.set=function(a){this.$el.html(a||h)},f.prototype.focus=function(){this.$el.focus().trigger("click")},f}),define("layout_add",["jquery","underscore","cache","events"],function(a,b,c,d){"use strict";function e(c){function d(a){var b=l+k,c=(i-20-23*k)/24*a+(a-1)*k;l+=c+k,f.beginPath(),f.fillStyle="#C5C5C5",f.rect(b,10,c,j-20),f.fill()}function e(a,b){return'<img src="'+a+'" alt="'+b+'" />'}var f,h=a("<canvas>")[0],i=90,j=60,k=5,l=5,m=c.toString(),n=g.remember()||{};return n[m]?e(n[m],m):(h.width=i,h.height=j,f=h.getContext("2d"),f.beginPath(),f.fillStyle="#EEEEEE",f.rect(0,0,i,j),f.fill(),b.each(c,function(a,b){d(a,b)}),n[m]=h.toDataURL("image/png"),g.memorize(n),e(n[m],m))}var f,g=new c("athene2-editor-image");return f=function(c){var f=this;d(f),f.$el=a('<div class="add-layout"></div>'),f.$plus=a('<a href="#" class="plus">+</a>'),f.$layoutList=a('<div class="layout-list">'),b.each(c,function(b){var c=a('<a href="#">'+e(b)+"</a>");c.click(function(a){a.stopPropagation(),f.trigger("add-layout",b),f.toggleLayouts(!0)}),f.$layoutList.append(c)}),f.$el.append(f.$plus),f.$plus.click(function(a){a.preventDefault(),a.stopPropagation(),f.toggleLayouts()}),f.addEventListener("close",function(){f.toggleLayouts(!0)})},f.prototype.toggleLayouts=function(a){a||this.opened?(this.$layoutList.detach(),this.opened=!1):(this.$el.append(this.$layoutList),this.opened=!0)},f}),define("text!editor/templates/layout/row.html",[],function(){return'<div class="r"></div>'}),define("row",["jquery","underscore","events","column","layout_add","translator","text!./editor/templates/layout/row.html"],function(a,b,c,d,e,f,g){"use strict";var h,i=b.template(g);return h=function(g,h,j,k){var l=this;c(l),l.data=j||[],l.title=g.toString(),l.index=h,l.columns=[],l.$el=a(i()),l.$el.mouseenter(function(a){l.onMouseEnter(a)}),l.$el.mouseleave(function(a){l.onMouseLeave(a)}),l.$actions=a('<div class="row-actions btn-group"></div>'),l.$remove=a('<a href="#" class="btn btn-xs btn-danger">').text(f("Remove Row")),l.$up=a('<a href="#" class="btn btn-xs btn-default">').attr({title:f("Move up")}).click(function(){l.trigger("move-up")}).html('<i class="fa fa-chevron-up"/>'),l.$down=a('<a href="#" class="btn btn-xs btn-default">').attr({title:f("Move down")}).click(function(){l.trigger("move-down")}).html('<i class="fa fa-chevron-down"/>'),l.$remove.click(function(a){a.preventDefault(),l.trigger("remove",l)}),l.$actions.append(l.$remove),l.$actions.append(l.$up),l.$actions.append(l.$down),b.each(g,function(a,b){var c=new d(a,l.data[b]);c.addEventListener("select",function(a){l.activeColumn=b,l.trigger("select",a)}),c.addEventListener("update",function(a){l.trigger("update",a)}),l.$el.append(c.$el),l.columns.push(c)}),l.activeColumn=0,l.layoutAdd=new e(k),l.layoutAdd.addEventListener("add-layout",function(a){l.trigger("add-layout",a)}),l.$el.prepend(l.layoutAdd.$el)},h.prototype.onMouseEnter=function(){this.$el.append(this.$actions)},h.prototype.onMouseLeave=function(){this.$actions.detach()},h}),define("router",[],function(){"use strict";function a(a){window.location.href=a}function b(){if("function"==typeof window.location.reload)return void window.location.reload();var a=window.location.href;window.location.href=a}var c;return c={navigate:function(b){a(b)},reload:function(){b()}}}),define("modals",["jquery","router"],function(a,b){"use strict";var c,d,e={},f="#modalTemplate";return d=function(b,c){this.$el=a(f).clone(),this.type=b.type||!1,this.title=b.title||!1,this.content=b.content,this.href=b.href||!1,this.cancel=void 0===b.cancel?!0:b.cancel,this.okayLabel=b.okayLabel||!1,this.render().show(c)},d.prototype.render=function(){var c=this,d=a(".btn-primary",c.$el);return a(".modal-body",c.$el).text(c.content),a("body").append(c.$el),d.click(function(){c.successCallback?(c.successCallback(),c.successCallback=null,c.hide()):c.href?b.navigate(c.href):c.hide()}),c.cancel||a(".btn-default, .close",c.$el).remove(),c.type&&d.removeClass("btn-primary").addClass("btn-"+this.type),c.title&&a(".modal-title",c.$el).text(c.title),c.label&&d.text(c.label),c},d.prototype.show=function(a){return this.successCallback=a,this.$el.modal("show"),this},d.prototype.hide=function(){return this.$el.modal("hide"),this},c=function(){return a(this).each(function(){var b=a(this),c={type:b.attr("data-type"),title:b.attr("data-title"),content:b.attr("data-content"),href:b.attr("href"),cancel:"false"===b.attr("data-cancel")?!1:!0,label:b.attr("data-label")};b.click(function(a){a.preventDefault(),new d(c)})})},a.fn.SerloModals=c,{show:function(a,b,c){return b?e[b]?e[b].show(c):e[b]=new d(a,c):new d(a,c)}}}),define("layout_builder",["jquery","underscore","cache","row","column","layout_add","events","modals","translator"],function(a,b,c,d,e,f,g,h,i){"use strict";var j;return j=function(a){if(void 0===a)throw new Error("No LayoutBuilderConfiguration set for LayoutBuilder");var b,c=this;g(this),c.layouts=a.layouts,c.rows=[],b=new f(c.layouts),b.addEventListener("add-layout",function(a){c.addRow(a)}),c.$el=b.$el},j.prototype.addRow=function(a,b,c,e){var f,g,j=this;return f=new d(a,j.rows.length,b,j.layouts),f.addEventListener("remove",function(a){h.show({type:"danger",title:i("Remove row"),content:i("Are you sure you want to delete this row?"),cancel:!0,okayLabel:"Yes"},"delete-row",function(){j.removeRow(a)})}),f.addEventListener("add-layout",function(a){j.addRow(a,null,f.index)}),f.addEventListener("move-up",function(){j.reOrderRows(f,-1)}),f.addEventListener("move-down",function(){j.reOrderRows(f,1)}),f.index=void 0===c?j.rows.length:c,g=j.rows.splice(0,f.index),g.push(f),j.rows=g.concat(j.rows),j.updateRowIndexes(),j.trigger("add",f),e||f.trigger("select",f.columns[0]),f},j.prototype.removeRow=function(a){a.$el.remove(),this.rows.splice(a.index,1),this.updateRowIndexes(),a.trigger("update"),a=null},j.prototype.reOrderRows=function(a,b){var c,d=this;d.rows.splice(a.index,1),c=d.rows.splice(0,a.index+b),c.push(a),d.rows=c.concat(d.rows),d.updateRowIndexes(),a.trigger("reorder")},j.prototype.updateRowIndexes=function(){b.each(this.rows,function(a,b){a.index=b})},j}),define("system_notification",["jquery","translator"],function(a,b){"use strict";var c,d,e="#content-layout",f={},g=b("An error occured, please reload."),h=function(b,g,h,i){var j;c||(c=a('<div id="system-notification">'),a(e).prepend(c)),i?f[i]?(j=f[i],j.$el.remove()):j=f[i]=new d(b,g,h):j=new d(b,g,h),c.append(j.$el)};return d=function(b,c,d){var e=this,f=a('<button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>').click(function(){e.$el.remove()});c=c||"info",e.$el=a('<div class="alert">'),c&&e.$el.addClass("alert-"+c),d?e.$el.html(b):e.$el.text(b),e.$el.append(f)},{notify:function(a,b,c,d){h(a,b,c,d)},error:function(a){this.notify(a||g,"danger",!1,"generic-error")}}}),define("formfield",["jquery","underscore","layout_builder","system_notification","events"],function(a,b,c,d,e){"use strict";function f(b,c){a.extend(b,c.prototype),c.apply(b,Array.prototype.slice.call(arguments,2))}var g=function(b,c,f){var g;this.field=b,this.$field=a(b),this.$label=a('<label class="preview-label">'),this.type=c,this.label=f||"",this.hasError=!!this.$field.parents(".has-error").length,this.hasError&&(g=this.$field.parents(".form-group").find(".help-block"),a("li",g).each(function(){
d.notify(this.innerHTML,"danger",!0)})),e(this),this.init()};return g.prototype.init=function(){var b=this;b.$el=a("<div>"),b.$inner=a("<div>").addClass("preview-content"),b.hasError&&b.$el.addClass("has-error"),b.$el.append(b.$inner),b.$inner.click(function(){b.trigger("select",b)}),b.data=this.$field.val()},g.prototype.setLabel=function(a){this.label=a,this.$label.append(a),this.$el.prepend(this.$label)},g.Textarea=function(a,c){function d(a,b){var c,d;e.activeRow&&(b||(c=e.activeRow.columns[e.activeRow.activeColumn+a]),!c&&e.layoutBuilder.rows[e.activeRow.index+a]&&(d=b||a>0?0:e.layoutBuilder.rows[e.activeRow.index-1].columns.length-1,c=e.layoutBuilder.rows[e.activeRow.index+a].columns[d]),c&&c.focus())}var e=this;f(e,g,a,"textarea",c),e.$inner.unbind("click"),e.data=this.$field.val(),e.updateField=b.throttle(function(){var a=[];b.each(e.layoutBuilder.rows,function(c){var d=[];b.each(c.columns,function(a){d.push({col:a.type,content:a.data})}),a.push(d)}),e.$field.val(a.length?JSON.stringify(a):"")},300),e.addEventListener("focus-next-column",function(){d(1)}),e.addEventListener("focus-previous-column",function(){d(-1)}),e.addEventListener("focus-next-row",function(){d(1,!0)}),e.addEventListener("focus-previous-row",function(){d(-1,!0)})},g.Textarea.prototype.addLayoutBuilder=function(d){function e(b){var c=a(".r",f.$inner);c.length&&b.index<c.length?a(c.eq(b.index)).before(b.$el):f.$inner.append(b.$el)}var f=this;f.layoutBuilder=new c(d),f.layoutBuilder.addEventListener("add",function(a){e(a),f.activeRow=a,a.addEventListener("select",function(b){f.activeRow=a,f.trigger("select",f,b)}),a.addEventListener("update",function(a){f.updateField(),f.trigger("update",a)}),a.addEventListener("reorder",function(){a.$el.detach(),e(a),f.updateField()}),b.each(a.columns,function(a){f.trigger("column-add",a)}),f.updateField()}),f.$el.append(f.layoutBuilder.$el),this.parseFieldData()},g.Textarea.prototype.parseFieldData=function(){var c=this,d=a(c.field).val()||"[]";try{d=JSON.parse(d)}catch(e){d=[[{col:24,content:d}]]}b.each(d,function(a,d){var e,f=[],g=[];b.each(a,function(a){f.push(a.col),g.push(a.content)}),e=c.layoutBuilder.addRow(f,g,void 0,!0),0===d&&e.trigger("select",e.columns[0])})},g.PlainText=function(b,c){var d=this;f(d,g,b,"plaintext",c),d.data={},d.data.value=d.$field.text(),d.$input=a("<textarea>").addClass("preview-textarea").text(d.data.value),d.$inner.append(d.$input),d.$input.on("keyup",function(){d.data.value=this.value,d.$field.text(d.data.value)})},g.Input=function(b,c){var d=this;f(d,g,b,"input",c),d.data={},d.data.value=d.field.value,d.data.placeholder=d.$field.attr("placeholder")||"",d.$input=a('<input type="text">').attr({placeholder:d.data.placeholder}).addClass("preview-input").val(d.data.value),d.$inner.append(d.$input),a.fn.datepicker&&d.$field.hasClass("datepicker")&&d.$input.datepicker({format:"yy-mm-dd"}).on("changeDate",function(){d.$input.trigger("keyup")}),d.$input.on("keyup",function(){d.data.value=d.field.value=this.value})},g.Checkbox=function(b,c){var d=this;f(d,g,b,"input",c),d.data=d.$field.is(":checked"),d.$checkbox=a('<input type="checkbox">').addClass("preview-checkbox").attr("checked",d.data),d.$label.addClass("field-checkbox").prepend(d.$checkbox),d.$checkbox.change(function(){d.data=d.$checkbox.is(":checked"),d.$field.attr("checked",d.data).val(d.data?1:0)})},g.Select=function(b,c){var d=this;f(d,g,b,"input",c),d.$select=a("<select>").addClass("preview-select"),d.$field.attr("multiple")&&d.$select.attr("multiple",!0),a("option",d.$field).each(function(){d.$select.append(a(this).clone())}),d.$select.change(function(){d.data=a(this).val(),d.$field.val(d.data)}),d.$inner.append(d.$select)},g.Radio=function(b,c){var d=this;f(d,g,b,"input",c),d.$radio=a('<input type="radio">').addClass("preview-radio").attr("name",d.$field.attr("name")),d.$field.is(":checked")&&d.$radio.attr("checked",!0),d.$inner=a('<label class="preview-content preview-radio-container">'),d.$el.append(d.$inner),d.$radio.change(function(){d.data=d.$radio.is(":checked"),d.$field.attr("checked",d.data)}),d.$inner.append(d.$radio).append(d.$field.val())},g}),define("preview",["formfield","events","jquery"],function(a,b,c){"use strict";var d,e=Array.prototype.slice;return d=function(a){this.$el=a.$el,this.formFields=[],b(this),this.init()},d.prototype.init=function(){var a=this;a.$el.click(function(){a.trigger("blur")})},d.prototype.setLayoutBuilderConfiguration=function(a){this.layoutBuilderConfiguration=a},d.prototype.createFromForm=function(b){var d=this;b.children().length&&(d.formFields=[],c("input,textarea,select",b).each(function(){var b,f,g=d.getFieldType(this);if(g){if(b=new a[g](this),f="Checkbox"===g?c(this).parent():c('label[name="'+c(this).attr("name")+'"],label[for="'+c(this).attr("name")+'"]'),f.length&&b.setLabel(f.text()),b.addEventListener("column-add",function(){d.trigger.apply(d,["column-add"].concat(e.call(arguments)))}),b.addEventListener("select",function(a){d.activeField=a,d.trigger.apply(d,["field-select"].concat(e.call(arguments)))}),b.addEventListener("update",function(){d.trigger.apply(d,["update"].concat(e.call(arguments)))}),"Textarea"===g){if(!d.layoutBuilderConfiguration)throw new Error("No Layout Builder Configuration set");b.addLayoutBuilder(d.layoutBuilderConfiguration)}d.formFields.push(b),d.$el.append(b.$el)}}))},d.prototype.focusNextColumn=function(){this.activeField&&this.activeField.trigger("focus-next-column")},d.prototype.focusPreviousColumn=function(){this.activeField&&this.activeField.trigger("focus-previous-column")},d.prototype.focusNextRow=function(){this.activeField&&this.activeField.trigger("focus-next-row")},d.prototype.focusPreviousRow=function(){this.activeField&&this.activeField.trigger("focus-previous-row")},d.prototype.getFieldType=function(a){var b,c=this;switch(a.tagName){case"TEXTAREA":b=a.classList.contains("plain")?"PlainText":"Textarea";break;case"INPUT":switch(a.type){case"hidden":return;case"submit":c.submit=a;break;case"checkbox":b="Checkbox";break;case"radio":b="Radio";break;default:b="Input"}break;case"SELECT":b="Select";break;case"LABEL":b="Label"}return b},d.prototype.scrollSync=function(a,b){var c,d,e=this.$el.parent(),f=a.offset().top+e.scrollTop()-90,g=a.height()-e.height()+90;g>0?c=f+g*b:f+a.height()>e.height()+e.scrollTop()-90?c=f:f<e.scrollTop()&&(c=f),c&&(d=e[0].scrollHeight-e[0].clientHeight,c>d?c=d:0>c&&(c=0),e.animate({scrollTop:c},{queue:!1}))},d.prototype.scrollTo=function(a,b){b=b||0;var c=this.$el.parent(),d=a.offset().top+c.scrollTop(),e=function(){var a=c[0].scrollHeight-c[0].clientHeight,e=d+b;return 0>e?0:e>a?a:e}();c.animate({scrollTop:e})},d});var k={extensions:{}},l=(k.forEach=function(a,b){if("function"==typeof a.forEach)a.forEach(b);else{var c,d=a.length;for(c=0;d>c;c++)b(a[c],c,a)}},function(a){return a.replace(/[_-]||\s/g,"").toLowerCase()});k.converter=function(a){var b,c,d,e=0,f=[],g=[];if("undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"!=typeof require){var h=require("fs");if(h){var i=h.readdirSync((__dirname||".")+"/extensions").filter(function(a){return~a.indexOf(".js")}).map(function(a){return a.replace(/\.js$/,"")});k.forEach(i,function(a){var b=l(a);k.extensions[b]=require("./extensions/"+a)})}}if(this.makeHtml=function(a){return b={},c={},d=[],a=a.replace(/~/g,"~T"),a=a.replace(/\$/g,"~D"),a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n"),a="\n\n"+a+"\n\n",a=O(a),a=a.replace(/^[ \t]+$/gm,""),k.forEach(f,function(b){a=n(b,a)}),a=B(a),a=p(a),a=o(a),a=r(a),a=M(a),a=a.replace(/~D/g,"$$"),a=a.replace(/~T/g,"~"),k.forEach(g,function(b){a=n(b,a)}),a},a&&a.extensions){var j=this;k.forEach(a.extensions,function(a){if("string"==typeof a&&(a=k.extensions[l(a)]),"function"!=typeof a)throw"Extension '"+a+"' could not be loaded.  It was either not found or is not a valid extension.";k.forEach(a(j),function(a){a.type?"language"===a.type||"lang"===a.type?f.push(a):("output"===a.type||"html"===a.type)&&g.push(a):g.push(a)})})}var m,n=function(a,b){if(a.regex){var c=new RegExp(a.regex,"g");return b.replace(c,a.replace)}return a.filter?a.filter(b):void 0},o=function(a){return a+="~0",a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(a,d,e,f,g){return d=d.toLowerCase(),b[d]=I(e),f?f+g:(g&&(c[d]=g.replace(/"/g,"&quot;")),"")}),a=a.replace(/~0/,"")},p=function(a){a=a.replace(/\n/g,"\n\n");return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,q),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,q),a=a.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,q),a=a.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,q),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,q),a=a.replace(/\n\n/g,"\n")},q=function(a,b){var c=b;return c=c.replace(/\n\n/g,"\n"),c=c.replace(/^\n/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(d.push(c)-1)+"K\n\n"},r=function(a){a=y(a);var b=C("<hr />");return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,b),a=a.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,b),a=z(a),a=A(a),a=G(a),a=p(a),a=H(a)},s=function(a){return a=D(a),a=t(a),a=J(a),a=w(a),a=u(a),a=K(a),a=I(a),a=F(a),a=a.replace(/  +\n/g," <br />\n")},t=function(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=P(b,"\\`*_")})},u=function(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,v),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,v),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,v)},v=function(a,d,e,f,g,h,i,j){void 0==j&&(j="");var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(""==n)if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0!=b[m])n=b[m],void 0!=c[m]&&(o=c[m]);else{if(!(k.search(/\(\s*\)$/m)>-1))return k;n=""}n=P(n,"*_");var p='<a href="'+n+'"';return""!=o&&(o=o.replace(/"/g,"&quot;"),o=P(o,"*_"),p+=' title="'+o+'"'),p+=">"+l+"</a>"},w=function(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,x),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,x)},x=function(a,d,e,f,g,h,i,j){var k=d,l=e,m=f.toLowerCase(),n=g,o=j;if(o||(o=""),""==n){if(""==m&&(m=l.toLowerCase().replace(/ ?\n/g," ")),n="#"+m,void 0==b[m])return k;n=b[m],void 0!=c[m]&&(o=c[m])}l=l.replace(/"/g,"&quot;"),n=P(n,"*_");var p='<img src="'+n+'" alt="'+l+'"';return o=o.replace(/"/g,"&quot;"),o=P(o,"*_"),p+=' title="'+o+'"',p+=" />"},y=function(a){function b(a){return a.replace(/[^\w]/g,"").toLowerCase()}return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,c){return C('<h1 id="'+b(c)+'">'+s(c)+"</h1>")}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,c){return C('<h2 id="'+b(c)+'">'+s(c)+"</h2>")}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,c,d){var e=c.length;return C("<h"+e+' id="'+b(d)+'">'+s(d)+"</h"+e+">")})},z=function(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return e?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol";d=d.replace(/\n{2,}/g,"\n\n\n");var f=m(d);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",f=f.replace(/\n{2,}/g,"\n\n\n"),h=m(f);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")};m=function(a){return e++,a=a.replace(/\n{2,}$/,"\n"),a+="~0",a=a.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(a,b,c,d,e){var f=e,g=b;return g||f.search(/\n{2,}/)>-1?f=r(N(f)):(f=z(N(f)),f=f.replace(/\n$/,""),f=s(f)),"<li>"+f+"</li>\n"}),a=a.replace(/~0/g,""),e--,a};var A=function(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=E(N(d)),d=O(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre><code>"+d+"\n</code></pre>",C(d)+e}),a=a.replace(/~0/,"")},B=function(a){return a+="~0",a=a.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(a,b,c){var d=b,e=c;return e=E(e),e=O(e),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),e="<pre><code"+(d?' class="'+d+'"':"")+">"+e+"\n</code></pre>",C(e)}),a=a.replace(/~0/,"")},C=function(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(d.push(a)-1)+"K\n\n"},D=function(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){var f=d;return f=f.replace(/^([ \t]*)/g,""),f=f.replace(/[ \t]*$/g,""),f=E(f),b+"<code>"+f+"</code>"})},E=function(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=P(a,"*_{}[]\\",!1)},F=function(a){return a=a.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),a=a.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},G=function(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=r(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),C("<blockquote>\n"+c+"\n</blockquote>")})},H=function(a){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var b=a.split(/\n{2,}/g),c=[],e=b.length,f=0;e>f;f++){var g=b[f];g.search(/~K(\d+)K/g)>=0?c.push(g):g.search(/\S/)>=0&&(g=s(g),g=g.replace(/^([ \t]*)/g,"<p>"),g+="</p>",c.push(g))}e=c.length;for(var f=0;e>f;f++)for(;c[f].search(/~K(\d+)K/)>=0;){var h=d[RegExp.$1];h=h.replace(/\$/g,"$$$$"),c[f]=c[f].replace(/~K\d+K/,h)}return c.join("\n\n")},I=function(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},J=function(a){return a=a.replace(/\\(\\)/g,Q),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,Q)},K=function(a){return a=a.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),a=a.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(a,b){return L(M(b))})},L=function(a){var b=[function(a){return"&#"+a.charCodeAt(0)+";"},function(a){return"&#x"+a.charCodeAt(0).toString(16)+";"},function(a){return a}];return a="mailto:"+a,a=a.replace(/./g,function(a){if("@"==a)a=b[Math.floor(2*Math.random())](a);else if(":"!=a){var c=Math.random();a=c>.9?b[2](a):c>.45?b[1](a):b[0](a)}return a}),a='<a href="'+a+'">'+a+"</a>",a=a.replace(/">.+:/g,'">')},M=function(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})},N=function(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")},O=function(a){return a=a.replace(/\t(?=\t)/g,"    "),a=a.replace(/\t/g,"~A~B"),a=a.replace(/~B(.+?)~A/g,function(a,b,c){for(var d=b,e=4-d.length%4,f=0;e>f;f++)d+=" ";return d}),a=a.replace(/~A/g,"    "),a=a.replace(/~B/g,"")},P=function(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,Q)},Q=function(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}},"undefined"!=typeof module&&(module.exports=k),"function"==typeof define&&define.amd&&define("showdown",[],function(){return k}),define("layout_builder_configuration",[],function(){"use strict";var a=function(){this.layouts=[]};return a.prototype.addLayout=function(a){return this.layouts.push(a),this},a}),define("texteditor_helper",["jquery","common","events","translator"],function(a,b,c,d){var e;return e=function(b,d){var e=this;e.settings=a.extend({cursorDelta:0,icon:void 0},d),c(e),e.textEditor=b,e.$el=a("<a>").addClass("btn btn-default helper").attr({href:"#",title:e.settings.title}),e.settings.description&&e.$el.attr({"data-toggle":"tooltip","data-placement":"bottom",title:e.settings.description}),e.$el.html(e.settings.icon?'<i class="fa fa-'+e.settings.icon+'"></i>':d.title),e.$el.click(function(a){a.preventDefault(),e.action()}),e.settings.shortcut&&e.addEventListener(e.settings.shortcut,function(a){a.stopPropagation(),a.preventDefault(),e.action()})},e.prototype.action=function(){if(this.textEditor.options.readOnly===!1){if(this.settings.action)return this.settings.action.apply(this,arguments);var a=this.textEditor.getCursor(!1),c=b.trim(this.textEditor.getSelection()),d={line:a.line,ch:a.ch},e=null;c?(this.textEditor.replaceSelection(this.settings.replaceBefore+c+this.settings.replaceAfter),d.ch=a.ch+this.settings.cursorDelta-c.length):(this.textEditor.replaceRange(this.settings.replaceBefore+this.settings.replaceAfter,a),d.ch=a.ch+this.settings.cursorDelta),this.settings.selectionDelta&&(e={line:a.line},"selection"===this.settings.selectionDelta?e.ch=d.ch+(c?c.length:0):e.ch=d.ch+this.settings.selectionDelta),this.textEditor.setSelection(d,e),this.textEditor.focus()}},e.Bold=function(a){return new e(a,{title:"Bold",icon:"bold",replaceBefore:"**",replaceAfter:"**",cursorDelta:2,selectionDelta:"selection",shortcut:"cmd+66",description:d("Make selected text bold")})},e.Italic=function(a){return new e(a,{title:"Italic",icon:"italic",replaceBefore:"*",replaceAfter:"*",cursorDelta:1,selectionDelta:"selection",shortcut:"cmd+73",description:d("Make selected text italic")})},e.List=function(a){return new e(a,{title:"List",icon:"list",replaceBefore:"* ",replaceAfter:"\n* ",cursorDelta:2,selectionDelta:"selection",description:d("Insert a list")})},e.Link=function(a){return new e(a,{title:"Link",icon:"link",replaceBefore:"[",replaceAfter:"]()",cursorDelta:1,selectionDelta:"selection",description:d("Insert a link")})},e.Injection=function(a){return new e(a,{title:"Injection",icon:"code",replaceBefore:">[",replaceAfter:"]()",cursorDelta:2,selectionDelta:"selection",description:d("Insert an injection or geogebra")})},e.Strike=function(a){return new e(a,{title:"Strike",icon:"strikethrough",replaceBefore:"~~",replaceAfter:"~~",cursorDelta:2,selectionDelta:"selection",description:d("Strike selected text")})},e.Image=function(a){return new e(a,{title:"Image",icon:"picture-o",replaceBefore:"![",replaceAfter:"]()",cursorDelta:2,selectionDelta:"selection",description:d("Insert an image")})},e.Formula=function(a){return new e(a,{title:"Æ<i><sub>(x)</sub></i>",replaceBefore:"$$",replaceAfter:"$$",cursorDelta:2,selectionDelta:"selection",description:d("Insert a formula")})},e.Undo=function(b){var c=this;c.title="Undo",c.$el=a('<a class="btn btn-default helper" data-toggle="tooltip" data-placement="bottom" href="#" title="'+c.title+'">').html('<i class="fa fa-undo"></i>'),c.$el.click(function(a){a.preventDefault(),b.undo()})},e.Redo=function(b){var c=this;c.title="Redo",c.$el=a('<a class="btn btn-default helper" data-toggle="tooltip" data-placement="bottom" href="#" title="'+c.title+'">').html('<i class="fa fa-redo"></i>'),c.$el.click(function(a){a.preventDefault(),b.redo()})},e.Fullscreen=function(){var b,c=this;b=document.body,b.webkitRequestFullScreen&&"undefined"!=typeof Element&&Element.ALLOW_KEYBOARD_INPUT&&(c.title="Fullscreen",c.$el=a('<a class="btn btn-default helper" data-toggle="tooltip" data-placement="bottom" href="#" title="'+c.title+'">').html('<i class="fa fa-expand"></i>'),c.$el.click(function(a){a.preventDefault(),b.requestFullScreen?b.requestFullScreen():b.mozRequestFullScreen?b.mozRequestFullScreen():b.webkitRequestFullScreen&&b.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}))},e.HidePlugins=function(b){var c=this;c.title=d("Hide Plugins"),c.editor=b,c.hide=c.editor.hidePlugins=!1,c.$el=a('<div class="btn btn-default helper btn-labeled">').html('<span class="btn-label"><span class="fa fa-eye-slash"></span></span>'+c.title),c.$el.click(function(a){a.preventDefault(),c.action()})},e.HidePlugins.prototype.action=function(){this.active=this.editor.hidePlugins=!this.active,this.$el.html(this.active?'<span class="btn-label"><span class="fa fa-eye"></span></span>'+d("Show plugins"):'<span class="btn-label"><span class="fa fa-eye-slash"></span></span>'+d("Hide plugins"))},e.Spoiler=function(a){var b=d("Title");return new e(a,{title:"Spoiler",replaceBefore:"/// "+b+"\n",replaceAfter:"\n///",cursorDelta:4,icon:"caret-square-o-down",selectionDelta:b.length,description:d("Insert a spoiler")})},e}),define("texteditor_plugin_manager",["underscore","events"],function(a,b){"use strict";var c,d=Array.prototype.slice;return c=function(){b(this),this.plugins=[],this.updateChain()},c.prototype.addPlugin=function(a){var b=this;return b.plugins.push(a),a.addEventListener("save",function(a){b.trigger("save",a),b.trigger("close")}),a.addEventListener("close",function(){b.trigger("close")}),a.addEventListener("update",function(a){b.trigger("update",a)}),a.addEventListener("toggle-plugin",function(a,c,d){var e=b.matchState(a);if(!e)throw new Error("Cannot load plugin: "+a);b.deactivate(),b.activate(e,c,d),b.trigger("toggle-plugin",e)}),this.updateChain(),this},c.prototype.updateChain=function(){this.chain=a.chain(this.plugins)},c.prototype.matchState=function(a){return this.chain.filter(function(b){return b.state===a?b:void 0}).value()[0]||null},c.prototype.activate=function(a){this.active=a,this.active.activate.apply(this.active,d.call(arguments,1))},c.prototype.deactivate=function(){this.active&&this.active.deactivate()},c}),define("text!editor/templates/plugins/default.html",[],function(){return'<div class="editor-plugin">\n    <div class="panel panel-default">\n        <div class="panel-heading">{{ title }}</div>\n        <div class="panel-body">\n            <input type="text" value="{{ content }}" />\n        </div>\n    </div>\n</div>'}),function(a,b){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),define("jquery.ui.mouse",["jquery.ui.widget"],function(){}),function(a,b){function c(a){return parseInt(a,10)||0}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=c(this.helper.css("left")),e=c(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return n?(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1):!1},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,
e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,e=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=d(a.width)&&b.minWidth&&b.minWidth>a.width,h=d(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(c),l=/nw|ne|n/.test(c);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=c(b.css("padding"+e))}),j.containerOffset=b.offset(),j.containerPosition=b.position(),j.containerSize={height:b.innerHeight()-d[3],width:b.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=Math.abs(g.parentData.left)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(n-j>0?(b.size.height=n,b.position.top=f.top-l):(b.size.height=j,b.position.top=f.top+e.height-j),m-i>0?(b.size.width=m,b.position.left=f.left-k):(b.size.width=i,b.position.left=f.left+e.width-i))}})}(jQuery),define("jquery.ui.resizable",["jquery.ui.mouse"],function(){}),define("texteditor_plugin",["jquery","events","translator","text!./editor/templates/plugins/default.html","jquery.ui.resizable"],function(a,b,c,d){var e,f={};return e=function(c){b(this),this.settings=a.extend(c,f),this.state=this.settings.state,this.data={name:"Plugin",content:"Default Plugin"},this.template=_.template(d)},e.prototype.setData=function(a,b){this.data[a]=b,this.updateContentString(),this.trigger("update",this)},e.prototype.updateContentString=function(){this.data.content="**"+this.name+"**"},e.prototype.save=function(){return this.trigger("save"),this.data},e.prototype.close=function(){this.trigger("close")},e.prototype.render=function(){},e.prototype.activate=function(){return this.$el=a(this.template(this.data)),this.makeRezisable(),this.$el},e.prototype.makeRezisable=function(){var b=this,c=a("iframe",b.$el);a(".ui-resizable-se",b.$el).length||a('<div class="ui-resizable-handle ui-resizable-se fa fa-arrows">').appendTo(a(".panel-body",b.$el)),a(".panel-body",b.$el).resizable({handles:{se:a(".ui-resizable-se",b.$el)},resize:function(d,e){var f=e.originalSize.width+2*(e.size.width-e.originalSize.width);a(this).width(f).position({of:b.$el,my:"center center",at:"center center"}),c.length&&c.width(f).height(e.size.height-140)}})},e.prototype.deactivate=function(){this.$el.detach()},e.prototype.getActivateLink=function(){return this.widget||(this.widget=a('<a class="editor-widget" href="#">').text(c("Edit %s",this.data.name)))},e}),function(){var a=function(a){var b,c={},d="text-align:left;";return c.th=function(b){return'<th style="'+d+'">'+a.makeHtml(b)+"</th>"},c.td=function(b){return'<td style="'+d+'">'+a.makeHtml(b)+"</td>"},c.ths=function(){var a="",b=0,d=[].slice.apply(arguments);for(b;b<d.length;b+=1)a+=c.th(d[b])+"\n";return a},c.tds=function(){var a="",b=0,d=[].slice.apply(arguments);for(b;b<d.length;b+=1)a+=c.td(d[b])+"\n";return a},c.thead=function(){var a,b=[].slice.apply(arguments);return a="<thead>\n",a+="<tr>\n",a+=c.ths.apply(this,b),a+="</tr>\n",a+="</thead>\n"},c.tr=function(){var a,b=[].slice.apply(arguments);return a="<tr>\n",a+=c.tds.apply(this,b),a+="</tr>\n"},b=function(a){var b,d,e=0,f=a.split("\n"),g=[],h=[];for(e;e<f.length;e+=1){if(b=f[e],b.trim().match(/^[|]{1}.*[|]{1}$/)){if(b=b.trim(),g.push('<div class="table-responsive">'),g.push('<table class="table table-striped">'),d=b.substring(1,b.length-1).split("|"),g.push(c.thead.apply(this,d)),b=f[++e],b.trim().match(/^[|]{1}[-=| ]+[|]{1}$/)){for(b=f[++e],g.push("<tbody>");b.trim().match(/^[|]{1}.*[|]{1}$/);)b=b.trim(),g.push(c.tr.apply(this,b.substring(1,b.length-1).split("|"))),b=f[++e];g.push("</tbody>"),g.push("</table>"),g.push("</div>"),h.push(g.join("\n")),g=[];continue}b=f[--e]}h.push(b)}return h.join("\n")},[{type:"lang",filter:b}]};"function"==typeof define&&define.amd?define("showdown_table",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.table=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.table=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){var a=function(a){var b,c=new RegExp(/^<p>=,sp. (.*)<\/p>([\s\S]*?)<p>=,sp.<\/p>/gm);return b=function(a){return a.replace(c,function(a,b,c){return'<div class="spoiler panel panel-default"><div class="spoiler-teaser panel-heading">'+b+'<span class="fa fa-caret-square-o-down pull-right">&nbsp;</span></div><div class="spoiler-content panel-body">'+c+"</div></div>"})},[{type:"output",filter:b}]};"function"==typeof define&&define.amd?define("showdown_spoiler",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.spoiler=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.spoiler=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){var a=function(a){var b,c=new RegExp(/^\/\/\/ (.*)\n([\s\S]*?)(\n|\r)+\/\/\//gm);return b=function(a){return a.replace(c,function(a,b,c){return"<p>=,sp. "+b+"</p>\n"+c+"<p>=,sp.</p>"})},[{type:"lang",filter:b}]};"function"==typeof define&&define.amd?define("showdown_spoiler_prepare",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.spoilerprepare=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.spoilerprepare=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){function a(a){for(var b in c)c.hasOwnProperty(b)&&"string"==typeof c[b]&&(c[b]=new RegExp("^("+c[b].toLowerCase()+")$"));return a.replace(f,function(a,b,f,h){var i,j,k="/"==h.substr(-1)&&"/"||"";return f=f.toLowerCase(),f.match(e)?(i=f in c&&c[f],j="*"in c&&c["*"],i||j?(h=h.trim(),k&&(h=h.substr(0,h.length-1)),h=h.replace(g,function(a,b,c,e,f){return c=c.toLowerCase(),f||e?f||(f=e,e='"'):(f="",e='"'),"href"!=c&&"src"!=c||"javascript:"!=f.trim().substr(0,"javascript:".length)&&"data:"!=f.trim().substr(0,"data:".length)||(f="#"),!d||"href"!=c&&"src"!=c||/^[a-zA-Z]{3,5}:\/\//.test(f)||(f="http://"+f),j&&c.match(j)||i&&c.match(i)?b+c+"="+e+f+e:""}),"<"+b+f+(h?" "+h:"")+k+">"):"<"+b+f+k+">"):""})}var b="a|b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|h4|h5|h6|i|img|li|ol|p|pre|sup|sub|strong|strike|ul|br|hr|span|table|th|tr|td|tbody|thead|tfoot|div",c={img:"src|width|height|alt",a:"href|name","*":"title",span:"class",table:"class",tr:"rowspan",td:"colspan|align",th:"rowspan|align",div:"class",b:"class",h1:"id",h2:"id",h3:"id",h4:"id",h5:"id",h6:"id"},d=!1,e=new RegExp("^("+b.toLowerCase()+")$"),f=/<(\/?)\s*([\w:\-]+)([^>]*)>/g,g=/(\s*)([\w:-]+)\s*=\s*(?:(?:(["'])([^\3]+?)(?:\3))|([^\s]+))/g,h=function(b){var c;return c=function(b){return a(b)},[{type:"output",filter:c}]};"function"==typeof define&&define.amd?define("showdown_htmlstrip",["showdown"],function(a){a.extensions=a.extensions||{},a.extensions.htmlstrip=h}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.htmlstrip=h),"undefined"!=typeof module&&(module.exports=h)}(),function(){function a(a){return a.replace(c.regexp,c.replace)}var b,c,d=function(){var a;return a=function(a){return a=a.replace(/(^|[^\\])(%%)([^\r]*?[^%])(%%?%)/gm,function(c,d,e,f,g){var h=f;return h=h.replace(/^([ \t]*)/g,""),h=h.replace(/[ \t]*$/g,""),"%%%"===g&&(h+="% "),a=a.replace(/\$/g,"\\$"),a=a.replace(/%/g,"\\%"),h=b(h),d+'<span class="mathInline">%%'+h+"%%</span>"}),a=a.replace(/(^|[^\\])(~D~D)([^\r]*?[^~])\2(?!~D)/gm,function(c,d,e,f){var g=f;return g=g.replace(/^([ \t]*)/g,""),g=g.replace(/[ \t]*$/g,""),g=b(g),a=a.replace(/[^\\]~D/g,"\\~D"),d+'<span class="math">~D~D'+g+"~D~D</span>"})},[{type:"lang",filter:a}]};b=function(b){return b=a(b)},c=function(){function a(a){return d[a]||a}for(var b="",c=["*","`","_","{","}","[","]","<","\\"],d={},e=c.length,f=0;e>f;f++)b+="\\"+c[f],d[c[f]]="Â§LT"+f;return b=new RegExp("(["+b+"])","gm"),{regexp:b,replace:a}}(),"function"==typeof define&&define.amd?define("showdown_latex",["showdown"],function(a){a.extensions=a.extensions||{},a.extensions.latex=d}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.latex=d),"undefined"!=typeof module&&(module.exports=d)}(),function(){function a(a){return a.replace(b.regexp,b.replace)}var b,c=function(){return[{type:"output",filter:function(b){return a(b)}}]};b=function(){function a(a,b){return d[parseInt(b)]||b}for(var b,c=["*","`","_","{","}","[","]","&lt;","\\"],d={},e=c.length,f=0;e>f;f++)d[""+f]=c[f];return b=new RegExp("Â§LT([0-9])","gm"),{regexp:b,replace:a}}(),"function"==typeof define&&define.amd?define("showdown_latex_output",["showdown"],function(a){a.extensions=a.extensions||{},a.extensions.latexoutput=c}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.latexoutput=c),"undefined"!=typeof module&&(module.exports=c)}(),function(){var a=function(a){function b(a){return a=a.split("/"),"http:"===a[0]||"https:"===a[0]?a.join("/"):(""===a[0]&&a.shift(),"/"+a.join("/"))}var c,d=new RegExp(/>\[(.*)\]\((.*)\)/g);return c=function(a){return a.replace(d,function(a,c,d){return'<div class="injection"><a href="'+b(d)+'" class="injection-link">'+c+"</a></div>"})},[{type:"lang",filter:c}]};"function"==typeof define&&define.amd?define("showdown_injections",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.injections=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.injections=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){var a=function(a){return[{type:"lang",regex:"\\B(\\\\)?@([\\S]+)\\b",replace:function(a,b,c){return"\\"===b?a:'<a class="user-mention" href="/user/profile/'+c+'">@'+c+"</a>"}},{type:"lang",regex:"\\\\@",replace:"@"}]};"function"==typeof define&&define.amd?define("showdown_atusername",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.atusername=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.atusername=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){var a=function(a){return[{type:"lang",regex:"(~T){2}([^~]+)(~T){2}",replace:function(a,b,c,d){return"<del>"+c+"</del>"}}]};"function"==typeof define&&define.amd?define("showdown_strikethrough",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.strikethrough=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.strikethrough=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){var a=function(a){return[{type:"lang",filter:function(){function a(a,b,c){return c=c.replace(e,function(a){return d[a]||a}),"\n```"+b+"\n"+c+"\n```"}var b,c,d={},e="",f=/(?:^|\n)```(.*)\n([\s\S]*?)\n```/gm,g=["~D","%","\\|","/"];for(b=0,c=g.length;c>b;b++)d[g[b].replace(/\\/g,"")]="Â§SC"+b;return e=new RegExp("("+g.join("|")+")","gm"),function(b){return b.replace(f,a)}}()}]};"function"==typeof define&&define.amd?define("showdown_code_prepare",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.codeprepare=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.codeprepare=a),"undefined"!=typeof module&&(module.exports=a)}(),function(){var a=function(a){return[{type:"lang",filter:function(){function a(a,b){return f[parseInt(b)]||b}var b,c,d,e=["~D","%","|","/"],f={};for(c=0,d=e.length;d>c;c++)f[""+c]=e[c];return b=new RegExp("Â§SC([0-9])","gm"),function(c){return c.replace(b,a)}}()}]};"function"==typeof define&&define.amd?define("showdown_code_output",["showdown"],function(b){b.extensions=b.extensions||{},b.extensions.codeoutput=a}):"undefined"!=typeof window&&window.Showdown&&window.Showdown.extensions&&(window.Showdown.extensions.codeoutput=a),"undefined"!=typeof module&&(module.exports=a)}(),define("text!editor/templates/plugins/image/image_plugin.html",[],function(){return'<div class="editor-plugin panel panel-default">\n    <div class="panel-heading">{{ name }}</div>\n    <div class="panel-body form-group">\n        <input class="title form-control" type="text" value="{{ title }}" />\n        <input class="href form-control" type="text" value="{{ href }}" />\n        <form id="fileupload" action="/upload" method="POST" enctype="multipart/form-data">\n        <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->\n        <div class="row fileupload-buttonbar">\n            <div class="col-lg-7">\n                <!-- The fileinput-button span is used to style the file input field as button -->\n                <input type="hidden" name="type" value="file" />\n                <input type="file" name="file">\n                <!-- The global file processing state -->\n                <span class="fileupload-process"></span>\n            </div>\n            <!-- The global progress state -->\n            <div class="col-lg-5 fileupload-progress fade">\n                <!-- The global progress bar -->\n                <div class="progress progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">\n                    <div class="progress-bar progress-bar-success" style="width:0%;"></div>\n                </div>\n                <!-- The extended global progress state -->\n                <div class="progress-extended">&nbsp;</div>\n            </div>\n        </div>\n    </form>\n    </div>\n    <div class="panel-footer"><a href="#" class="btn btn-cancel">Cancel</a><a href="#" class="btn btn-success btn-save pull-right">Save</a></div>\n</div>'}),function(a){"use strict";var b=function(a,c,d){var e,f,g=document.createElement("img");if(g.onerror=c,g.onload=function(){!f||d&&d.noRevoke||b.revokeObjectURL(f),c&&c(b.scale(g,d))},b.isInstanceOf("Blob",a)||b.isInstanceOf("File",a))e=f=b.createObjectURL(a),g._type=a.type;else{if("string"!=typeof a)return!1;e=a,d&&d.crossOrigin&&(g.crossOrigin=d.crossOrigin)}return e?(g.src=e,g):b.readFile(a,function(a){var b=a.target;b&&b.result?g.src=b.result:c&&c(a)})},c=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.isInstanceOf=function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},b.transformCoordinates=function(){},b.getTransformedOptions=function(a,b){var c,d,e,f,g=b.aspectRatio;if(!g)return b;c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c.crop=!0,e=a.naturalWidth||a.width,f=a.naturalHeight||a.height,e/f>g?(c.maxWidth=f*g,c.maxHeight=f):(c.maxWidth=e,c.maxHeight=e/g),c},b.renderImageToCanvas=function(a,b,c,d,e,f,g,h,i,j){return a.getContext("2d").drawImage(b,c,d,e,f,g,h,i,j),a},b.hasCanvasOption=function(a){return a.canvas||a.crop||a.aspectRatio},b.scale=function(a,c){c=c||{};var d,e,f,g,h,i,j,k,l,m=document.createElement("canvas"),n=a.getContext||b.hasCanvasOption(c)&&m.getContext,o=a.naturalWidth||a.width,p=a.naturalHeight||a.height,q=o,r=p,s=function(){var a=Math.max((f||q)/q,(g||r)/r);a>1&&(q*=a,r*=a)},t=function(){var a=Math.min((d||q)/q,(e||r)/r);1>a&&(q*=a,r*=a)};return n&&(c=b.getTransformedOptions(a,c),j=c.left||0,k=c.top||0,c.sourceWidth?(h=c.sourceWidth,void 0!==c.right&&void 0===c.left&&(j=o-h-c.right)):h=o-j-(c.right||0),c.sourceHeight?(i=c.sourceHeight,void 0!==c.bottom&&void 0===c.top&&(k=p-i-c.bottom)):i=p-k-(c.bottom||0),q=h,r=i),d=c.maxWidth,e=c.maxHeight,f=c.minWidth,g=c.minHeight,n&&d&&e&&c.crop?(q=d,r=e,l=h/i-d/e,0>l?(i=e*h/d,void 0===c.top&&void 0===c.bottom&&(k=(p-i)/2)):l>0&&(h=d*i/e,void 0===c.left&&void 0===c.right&&(j=(o-h)/2))):((c.contain||c.cover)&&(f=d=d||f,g=e=e||g),c.cover?(t(),s()):(s(),t())),n?(m.width=q,m.height=r,b.transformCoordinates(m,c),b.renderImageToCanvas(m,a,j,k,h,i,0,0,q,r)):(a.width=q,a.height=r,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b,c){if(window.FileReader){var d=new FileReader;if(d.onload=d.onerror=b,c=c||"readAsDataURL",d[c])return d[c](a),d}return!1},"function"==typeof define&&define.amd?define("loadimage",[],function(){return b}):a.loadImage=b}(this),function(a){"use strict";"function"==typeof define&&define.amd?define("fileupload_iframetransport",["jquery"],a):a(window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f,g=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+g+'"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),c.fileInput.removeAttr("form")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",g),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),define("texteditor_plugin_image",["jquery","underscore","common","system_notification","text!./editor/templates/plugins/image/image_plugin.html","texteditor_plugin","translator","loadimage","fileupload","fileupload_iframetransport"],function(a,b,c,d,e,f,g){"use strict";var h,i,j;i=new RegExp(/\[[^\]]*\]\(/),j=new RegExp(/\([^\)]*\)/),h=function(a){this.state="image",this.init(a)},h.prototype=new f,h.prototype.constructor=h,h.prototype.init=function(a){var c=this;c.fileuploadOptions=a||{},c.template=b.template(e),c.data.name="Image"},h.prototype.updateContentString=function(){this.data.content="!["+this.data.title+"]("+this.data.href+")"},h.prototype.onError=function(a){this.$uploadStatus.text(a.join("\n"))},h.prototype.activate=function(d){var e,f,h=this;h.data.content=d.string,e=b.first(h.data.content.match(i)),h.data.title=e.substr(1,e.length-3),f=b.first(h.data.content.match(j)),h.data.href=f.substr(1,f.length-2),h.$el=a(h.template(h.data)),h.$el.on("change",".title",function(){h.setData("title",this.value)}),h.$el.on("change",".href",function(){h.setData("href",this.value)}),h.$el.on("click",".btn-save",function(a){a.preventDefault(),h.trigger("save",h)}),h.$el.on("click",".btn-cancel",function(a){a.preventDefault(),h.trigger("close")}),h.$uploadStatus=a(".fileupload-process",h.$el),h.$upload=a("#fileupload",h.$el),h.$upload.fileupload(b.extend({},h.fileuploadOptions,{add:function(a,b){h.$el.addClass("uploading"),h.$uploadStatus.text(g("Uploading."));var c=[],d=h.fileuploadOptions.acceptFileTypes||/^image\/(gif|jpe?g|png|svg\+xml)$/i;b.originalFiles.length>h.fileuploadOptions.maxNumberOfFiles&&c.push(g("You only can upload one file")),b.originalFiles[0].type&&!d.test(b.originalFiles[0].type)&&c.push(g("Not an accepted file type")),b.originalFiles[0].size&&b.originalFiles[0].size>h.fileuploadOptions.loadImageMaxFileSize&&c.push(g("Filesize is too big")),c.length>0?h.onError(c):b.submit()},error:function(){h.$el.removeClass("uploading"),h.$uploadStatus.text(g("An error occured: %s",arguments[2])),c.genericError(arguments)},done:function(){var b=arguments[1];h.$el.removeClass("uploading"),b.result&&b.result.success&&b.result.files.length?(a(".href",h.$el).val(b.result.files[0].location).trigger("change"),h.$uploadStatus.text(g("Image successfully uploaded."))):(c.genericError(),h.$uploadStatus.text(g("An error occured.")))}}))},f.Image=h}),define("text!editor/templates/plugins/wiris/wiris_plugin.html",[],function(){return'<div class="editor-plugin panel panel-default">\n    <div class="panel-heading">{{ name }}</div>\n    <div class="panel-body content">\n        \n    </div>\n    <div class="panel-footer"><a href="#" class="btn btn-cancel">Cancel</a><a href="#" class="btn btn-success btn-save pull-right">Save</a></div>\n</div>'}),define("texteditor_plugin_wiris",["jquery","underscore","text!./editor/templates/plugins/wiris/wiris_plugin.html","texteditor_plugin","translator","common"],function(a,b,c,d,e,f){"use strict";function g(b,c,d){return a.ajax({url:b,method:d||"get",data:c})}var h,i,j="https://www.wiris.net/demo/editor/latex2mathml",k="https://www.wiris.net/demo/editor/mathml2latex";h=function(){this.state="math",this.init()},h.prototype=new d,h.prototype.constructor=h,h.prototype.init=function(){var d=this;d.template=b.template(c),d.data.name="Wiris",d.wrap="$$",d.$el=a(d.template(d.data)),d.$el.on("click",".btn-cancel",function(a){a.preventDefault(),d.trigger("close")}),a(".content",d.$el).height(450)},h.prototype.activate=function(b){function c(){d=b.state.string,e.data.content=d.substr(2,d.length-4),i.insertInto(a(".content",e.$el)[0]),g(j,"latex="+encodeURIComponent(e.data.content)).success(function(a){i.setMathML(a)}).fail(f.genericError),e.$el.on("click",".btn-save",function(){e.save()})}var d,e=this;e.token=b,i?c():require(["https://www.wiris.net/demo/editor/editor"],function(){i=com.wiris.jsEditor.JsEditor.newInstance({language:"en"}),c()})},h.prototype.deactivate=function(){this.$el.detach(),i.close()},h.prototype.save=function(){var a=this,b=i.getMathML();g(k,"mml="+encodeURIComponent(b),"post").success(function(b){a.data.content=a.wrap+b+a.wrap,a.trigger("save",a)}).fail(f.genericError)},d.Wiris=h}),define("text!editor/templates/plugins/injection/injection_plugin.html",[],function(){return'<div class="editor-plugin panel panel-default">\n    <div class="panel-heading">{{ name }}</div>\n    <div class="panel-body">\n        <div class="alert alert-info">Loading injection data</div>\n    </div>\n    <div class="panel-footer"><a href="#" class="btn btn-cancel btn-default">Cancel</a></div>\n</div>'}),define("texteditor_plugin_injection",["jquery","underscore","common","system_notification","texteditor_plugin","translator","text!./editor/templates/plugins/injection/injection_plugin.html"],function(a,b,c,d,e,f,g){
"use strict";var h,i,j;i=new RegExp(/\[[^\]]*\]\(/),j=new RegExp(/\([^\)]*\)/),h=function(a){this.state="injection",this.init(a)},h.prototype=new e,h.prototype.constructor=h,h.prototype.init=function(){var a=this;a.template=b.template(g),a.data.name="Injection"},h.prototype.activate=function(d){var e,g,h,i,k=this;k.$el=a(k.template(k.data)),e=b.first(d.string.match(j)),e=e.substr(1,e.length-2),h=a(".panel-body",k.$el),k.$el.on("click",".btn-cancel",function(a){a.preventDefault(),k.trigger("close")}),""!==e?(e=e.split("/"),"attachment"===e[1]&&"file"===e[2]&&e[3]&&e[4]?(h.html('<div class="alert alert-info">'+f("Loading injection data")+"</div>"),e[2]="info",e.pop(),a.ajax(e.join("/")).success(function(a){a&&a.success?"geogebra"===a.type||2===a.files.length?k.trigger("toggle-plugin","geogebra-injection",d,a):"geogebratube"===a.type||2===a.files.length?k.trigger("toggle-plugin","geogebratube-injection",d,a):k.trigger("toggle-plugin","default-injection",d):(c.genericError(),k.trigger("close"))}).error(function(){c.genericError(),k.trigger("close")})):"ggt"==e[0]?k.trigger("toggle-plugin","geogebratube-injection",d,e.join("/")):k.trigger("toggle-plugin","default-injection",d)):(g=[{name:f("Normal"),key:"default-injection"},{name:f("GeogebraTube"),key:"geogebratube-injection"}],h.empty(),i=a('<div class="btn-group">'),i.append(a('<a class="btn btn-default disabled" disabled>').text(f("Pick a injection type:"))),b.each(g,function(b){var c=b.key;a("<a>").text(b.name).attr({"class":"btn btn-default",href:"#"}).click(function(a){a.preventDefault(),k.trigger("toggle-plugin",c,d)}).appendTo(i).data(b)}),h.append(i))},e.Injection=h}),define("text!editor/templates/plugins/injection/injection_plugin_default.html",[],function(){return'<div class="editor-plugin panel panel-default">\n    <div class="panel-heading">{{ name }}</div>\n    <div class="panel-body">\n        <div class="form-group">\n            <input class="title form-control" type="text" value="{{ title }}" />\n            <input class="href form-control" type="text" value="{{ href }}" />\n        </div>\n    </div>\n    <div class="panel-footer"><a href="#" class="btn btn-cancel">Cancel</a><a href="#" class="btn btn-success btn-save pull-right">Save</a></div>\n</div>'}),define("texteditor_plugin_default_injection",["jquery","underscore","common","system_notification","texteditor_plugin","translator","text!./editor/templates/plugins/injection/injection_plugin_default.html"],function(a,b,c,d,e,f,g){"use strict";var h,i,j;i=new RegExp(/\[[^\]]*\]\(/),j=new RegExp(/\([^\)]*\)/),h=function(a){this.state="default-injection",this.info=a||{},this.init()},h.prototype=new e,h.prototype.constructor=h,h.prototype.init=function(){var a=this;a.template=b.template(g),a.data.name="Injection"},h.prototype.activate=function(c){var d,e,f=this;f.data.content=c.string,d=b.first(f.data.content.match(i)),f.data.title=d.substr(1,d.length-3),e=b.first(f.data.content.match(j)),f.data.href=e.substr(1,e.length-2),f.$el=a(f.template(f.data)),f.$el.on("click",".btn-save",function(){f.save()}),f.$el.on("click",".btn-cancel",function(a){a.preventDefault(),f.trigger("close")})},h.prototype.save=function(){this.setAndValidateContent(),this.trigger("save",this)},h.prototype.setAndValidateContent=function(){var b=a(".href",this.$el).val();"/"!==b.substr(0,1)&&(b="/"+b),this.data.content=">["+a(".title",this.$el).val()+"]("+b+")"},e.DefaultInjection=h}),define("text!editor/templates/plugins/injection/injection_plugin_geogebra.html",[],function(){return'<div class="editor-plugin editor-geogebra-plugin panel panel-default">\n    <div class="panel-heading">{{ name }}</div>\n    <div class="panel-body">\n        <div class="form-group">\n            <input class="title form-control" type="text" value="{{ title }}" />\n            <input class="href form-control" type="text" value="{{ href }}" />\n            <!--<article class="geogebraweb" data-param-width="500" data-param-height="500" data-param-showMenuBar="true" data-param-showtoolbar="true" data-param-usebrowserforjs="true" data-param-enableRightClick="true"></article>-->\n            <iframe class="geogebraweb-app-iframe" src="/editor/geogebra-editor.html" />\n\n            <div class="is-hidden">\n                <form id="fileupload">\n                    <input type="file" name="file">\n                </form>\n            </div>\n        </div>\n    </div>\n    <div class="panel-footer">\n        <a href="#" class="btn btn-cancel">Cancel</a>\n        <div class="pull-right btn-group">\n            <a href="#" class="btn btn-success btn-save save-as-image">Insert as image</a>\n            <a href="#" class="btn btn-success btn-save">Insert as Applet</a>\n        </div>\n    </div>\n</div>'}),define("texteditor_plugin_geogebra_injection",["jquery","underscore","common","system_notification","texteditor_plugin","translator","text!./editor/templates/plugins/injection/injection_plugin_geogebra.html"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=0,d=setInterval(function(){c+=100,a.ggbApplet&&(clearTimeout(d),b(null,a.ggbApplet)),c>=2e4&&(clearTimeout(d),b(new Error("Could not initialize Geogebra")))},100)}function i(){return!!window.Blob&&!!window.FormData&&!!window.Uint8Array}var j,k,l;k=new RegExp(/\[[^\]]*\]\(/),l=new RegExp(/\([^\)]*\)/),j=function(){this.state="geogebra-injection",this.init()},j.prototype=new e,j.prototype.constructor=j,j.prototype.init=function(){this.template=b.template(g),this.data={},this.data.name="Geogebra",i()||(this.activate=function(){d.notify(f("You need to update your browser to use the Geogebra plugin."),"error")})},j.prototype.activate=function(c,d){var e,f,g=this;this.isActive=!0,g.data.info=d,g.data.content=c.string,e=b.first(g.data.content.match(k)),g.data.title=e.substr(1,e.length-3),f=b.first(g.data.content.match(l)),g.data.href=f.substr(1,f.length-2),g.$el=a(g.template(g.data)),g.$el.on("click",".btn-save",function(){g.save(a(this).hasClass("save-as-image"))}),g.$el.on("click",".btn-cancel",function(a){a.preventDefault(),g.trigger("close")}),a(".panel-body",this.$el).width(800)},j.prototype.render=function(){function b(){for(var b,d=0,f=e.data.info.files.length;f>d;)-1!=e.data.info.files[d].type.indexOf("/xml")&&(b=e.data.info.files[d].location,d=f),d+=1;a.ajax({url:b}).success(function(a){e.ggbApplet.setXML(a.documentElement.outerHTML),e.ggbApplet.startEditing()}).error(c.genericError)}var e=this;e.ggbApplet=null,e.$iframe=a(".geogebraweb-app-iframe",e.$el),e.$iframe.css({height:720,width:"100%",borderWidth:0}),h(e.$iframe[0].contentWindow,function(c,g){if(c)d.notify(f("Geogebra plugin could not be loaded, please try again."));else{if(!e.isActive)return;a(".gwt-MenuItem.signIn",e.$iframe[0].contentDocument).hide(),e.ggbApplet=g,e.data.info&&e.data.info.files&&b()}})},j.prototype.deactivate=function(){this.isActive=!1,this.$el.detach()},j.prototype.save=function(d){function e(a){return unescape(encodeURIComponent(a))}function f(b,d){return a.ajax({url:d||"/attachment/upload",type:"POST",data:b,processData:!1,contentType:!1}).error(c.genericError)}function g(c){var e=(d?b.last(c.files):b.first(c.files)).location;a(".href",k.$el).val(e),k.data.content=">["+a(".title",k.$el).val()+"]("+e+")",k.trigger("save",k)}if(this.ggbApplet){var h,i,j,k=this,l=k.ggbApplet.getXML(),m=e(l);j=k.createUploadFormData(m,"application/xml","geogebra.xml"),f(j).success(function(a){d?(h=k.ggbApplet.getContext2D(),i=h.canvas.toDataURL("image/jpeg"),i=atob(i.split(",")[1]),j=k.createUploadFormData(i,"image/jpeg","geogebra.jpg"),f(j,"/attachment/upload/"+a.id).success(function(a){g(a)})):g(a)})}},j.prototype.createUploadFormData=function(a,b,c){for(var d,e,f=[],g=0;g<a.length;g++)f.push(a.charCodeAt(g));return d=new Blob([new Uint8Array(f)],{type:b}),e=new FormData,e.append("attachment[file]",d,c),e.append("type","geogebra"),e},e.GeogebraInjection=j}),define("text!editor/templates/plugins/injection/injection_plugin_geogebratube.html",[],function(){return'<div class="editor-plugin panel panel-default">\n    <div class="panel-heading">{{ name }}</div>\n    <div class="panel-body">\n        <div class="form-group">\n            <p>Alt Text:</p>\n            <input class="title form-control" type="text" value="{{ title }}" />\n            <p>GeogebraTube Link:</p>\n            <input class="href form-control" type="text" value="{{ href }}" />\n        </div>\n    </div>\n    <div class="panel-footer"><a href="#" class="btn btn-cancel">Cancel</a><a href="#" class="btn btn-success btn-save pull-right">Save</a></div>\n</div>'}),define("texteditor_plugin_geogebratube_injection",["jquery","underscore","common","system_notification","texteditor_plugin","translator","text!./editor/templates/plugins/injection/injection_plugin_geogebratube.html"],function(a,b,c,d,e,f,g){"use strict";var h,i,j;i=new RegExp(/\[[^\]]*\]\(/),j=new RegExp(/\([^\)]*\)/),h=function(a){this.state="geogebratube-injection",this.info=a||{},this.init()},h.prototype=new e,h.prototype.constructor=h,h.prototype.init=function(){var a=this;a.template=b.template(g),a.data.name="GeogebraTube"},h.prototype.activate=function(c){var d,e,f=this;f.data.content=c.string,d=b.first(f.data.content.match(i)),f.data.title=d.substr(1,d.length-3),e=b.first(f.data.content.match(j)),f.data.href=e.substr(1,e.length-2),f.$el=a(f.template(f.data)),f.$el.on("click",".btn-save",function(){f.save()}),f.$el.on("click",".btn-cancel",function(a){a.preventDefault(),f.trigger("close")})},h.prototype.save=function(){this.setAndValidateContent(),this.trigger("save",this)},h.prototype.setAndValidateContent=function(){var b=a(".href",this.$el).val();if("ggt/"!=b.substr(0,4)){var c,d=b.split("/");c=d[d.length-1],b=parseInt("m"==c.substr(0,1)?c.substr(1):c),NaN!==b&&(b="ggt/"+b)}this.data.content=">["+a(".title",this.$el).val()+"]("+b+")"},e.GeogebraTubeInjection=h}),define("ATHENE2-EDITOR",["jquery","underscore","events","content","shortcuts","spoiler","injections"],function(a,b,c,d,e){"use strict";function f(a,c,d,e,f){function g(c,d,e,f){var i,j=a.getTokenAt(c);return b.isEqual(j.state.startPos,h&&!f)||!b.isEqual(j.state.startPos,h&&f)?j.state.endPos?j:d<=c.line?(i={ch:j.end,line:c.line},j):(h=j.state.startPos,c.line++,c.ch=1,g(c,d,j,!1)):e}var h={};return g(c,d,e,f)}var g,h=a("body"),i=a(window);return g=function(b){return this.helpers=[],c(this),d.add(function(b){var c=a(b);MathJax.Hub.Queue(["Typeset",MathJax.Hub,b]),c.parents(".spoiler").length?c.parents(".spoiler").Spoiler():c.hasClass("spoiler")?c.Spoiler():a(".spoiler",c).Spoiler(),c.parents(".injection").length?c.parents(".injection").Injections():c.hasClass("injection")?c.Injections():a(".injection",c).Injections()}),this.updateSettings(b)},g.prototype.updateSettings=function(b){return a.extend(this,b)},g.prototype.initialize=function(){var c=this;i.resize(function(){c.resize()}).resize(),c.$pluginWrapper=a('<div class="editor-plugin-wrapper">'),c.initKeyshortCuts(new e),c.textEditor.on("change",b.throttle(function(){if(c.editable){var a=c.textEditor.getValue(),e=c.editable.update(a,c.parser.parse(a));"identical"!==e.type&&e.replace.length>0&&b.each(e.replace,function(a){a.innerHTML&&d.init(a)})}},150)),c.textEditor.on("cursorActivity",b.throttle(function(){var a=c.textEditor.getCursor();c.textEditor.operation(function(){var d=c.textEditor.getTokenAt(a);c.currentToken&&b.isEqual(c.currentToken,d)||(d.line=a.line,c.currentToken=d,c.trigger("tokenChange",d))})},400)),c.textEditor.on("cursorActivity",b.throttle(function(){c.editable&&c.preview.scrollSync(c.editable.$el,c.textEditor.getCursor().line/c.textEditor.lastLine())},1500)),c.addEventListener("tokenChange",function(a){var d,e=a.type;c.pluginManager.deactivate(),c.$widget&&c.$widget.remove(),!c.textEditor.hidePlugins&&e&&(e=b.first(a.type.split(" ")),d=c.pluginManager.matchState(e),d&&(c.$widget=d.getActivateLink(),c.$widget.click(function(){var a=c.textEditor.doc.size;c.$widget.remove(),c.$widget=null,c.currentToken=f(c.textEditor,c.textEditor.getCursor(),a,{},!0),c.currentToken.state.string=c.textEditor.doc.getRange(c.currentToken.state.startPos,c.currentToken.state.endPos),c.activePlugin=d,c.pluginManager.activate(d,c.currentToken),c.showPlugin()}),c.textEditor.addWidget(c.textEditor.getCursor(),c.$widget[0])))}),c.pluginManager.addEventListener("close",function(){c.$pluginWrapper.detach()}),c.pluginManager.addEventListener("save",function(a){c.textEditor.replaceRange(a.data.content,c.currentToken.state.startPos,c.currentToken.state.endPos)}),c.pluginManager.addEventListener("toggle-plugin",function(a){c.activePlugin=a,c.showPlugin()}),c.preview.addEventListener("field-select",function(a,b){if(c.editable){if(c.editable===b)return;c.editable.$el.removeClass("active"),c.editable.history=c.textEditor.getHistory(),c.editable=null}"textarea"===a.type&&b?(c.editable=b,b.$el.addClass("active"),c.preview.scrollSync(c.editable.$el,1),c.textEditor.operation(function(){var a=c.textEditor.getWrapperElement().classList;c.textEditor.setValue(b.data),c.textEditor.clearHistory(),c.editable.history&&c.textEditor.setHistory(c.editable.history),c.textEditor.setOption("readOnly",!1),c.textEditor.execCommand("selectAll"),c.textEditor.focus(),a.add("activated"),setTimeout(function(){a.remove("activated")},2e3)})):c.emptyTextEditor()}),c.preview.addEventListener("blur",function(){c.editable&&(c.editable.$el.removeClass("active"),c.editable=null),c.emptyTextEditor()}),c.preview.addEventListener("column-add",function(a){a.set(c.parser.parse(a.data))}),c.preview.setLayoutBuilderConfiguration(c.layoutBuilderConfiguration),c.preview.createFromForm(c.$form),d.init(c.preview.$el[0]),function(){var a=c.preview.$el.find(".has-error");a.length&&c.preview.$el.parent().animate({scrollTop:a.first().position().top})}(),c.$submit.click(function(){c.preview.submit&&(a(window).unbind("beforeunload"),a(c.preview.submit).click())})},g.prototype.initKeyshortCuts=function(a){var c=this;a.addEventListener("cmd+shift+right",function(a){a.stopPropagation(),c.preview.focusNextColumn()}),a.addEventListener("cmd+shift+left",function(a){a.stopPropagation(),c.preview.focusPreviousColumn()}),a.addEventListener("cmd+shift+up",function(a){a.stopPropagation(),c.preview.focusPreviousRow()}),a.addEventListener("cmd+shift+down",function(a){a.stopPropagation(),c.preview.focusNextRow()}),a.addEventListener("always",function(a,d){c.editable&&(d.stopPropagation(),b.each(c.helpers,function(b){b.trigger&&b.trigger(a,d)}))})},g.prototype.addHelper=function(b,c){var d=a("#editor-plugin-group-"+c);d.length||(d=a("<div>").addClass("btn-group").attr({id:"editor-plugin-group-"+c}),this.$helpers.append(d)),d.append(b.$el),this.helpers.push(b)},g.prototype.addPlugin=function(a){return this.plugins.push(a),this},g.prototype.showPlugin=function(){this.activePlugin&&(this.$pluginWrapper.append(this.activePlugin.$el).appendTo(h),this.activePlugin.render())},g.prototype.resize=function(){return this.textEditor&&this.textEditor.setSize(i.width()/2,i.height()-58),this},g.prototype.emptyTextEditor=function(){var a=this;a.textEditor.operation(function(){a.textEditor.setValue(""),a.textEditor.setOption("readOnly",!0)})},g}),require(["jquery","underscore","common","translator","ATHENE2-EDITOR","codemirror","parser","preview","showdown","layout_builder_configuration","texteditor_helper","texteditor_plugin_manager","texteditor_plugin","system_notification","showdown_table","showdown_spoiler","showdown_spoiler_prepare","showdown_htmlstrip","showdown_latex","showdown_latex_output","showdown_injections","showdown_atusername","showdown_strikethrough","showdown_code_prepare","showdown_code_output","texteditor_plugin_image","texteditor_plugin_wiris","texteditor_plugin_injection","texteditor_plugin_default_injection","texteditor_plugin_geogebra_injection","deployggb","texteditor_plugin_geogebratube_injection"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";"undefined"!=typeof MathJax&&MathJax.Hub.Config({displayAlign:"left",extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],skipStartupTypeset:!0,tex2jax:{inlineMath:[["%%","%%"]]},"HTML-CSS":{scale:100,linebreaks:{automatic:!0}},SVG:{linebreaks:{automatic:!0}}}),a(function(){function b(){var b,o,p=new j,q=new g,r=new i.converter({extensions:["codeprepare","injections","table","htmlstrip","latex","atusername","strikethrough","spoiler","spoilerprepare","latexoutput","codeoutput"]}),s=new l;q.setConverter(r,"makeHtml"),p.addLayout([24]).addLayout([12,12]).addLayout([9,15]).addLayout([6,18]).addLayout([6,4,14]).addLayout([9,4,11]).addLayout([12,4,8]).addLayout([16,8]).addLayout([8,8,8]).addLayout([6,6,12]).addLayout([12,6,6]).addLayout([6,12,6]).addLayout([6,6,6,6]),s.addPlugin(new m.Image({dataType:"json",type:"post",url:"/attachment/upload",paramName:"attachment[file]",loadImageMaxFileSize:8e6,maxNumberOfFiles:1})).addPlugin(new m.Wiris).addPlugin(function(){var a=new m.Wiris;return a.state="inline-math",a.wrap="%%",a}()).addPlugin(new m.DefaultInjection).addPlugin(new m.GeogebraInjection({dataType:"json",type:"post",url:"/attachment/upload",loadImageMaxFileSize:8e6,maxNumberOfFiles:1})).addPlugin(new m.GeogebraTubeInjection).addPlugin(new m.Injection),o=new f(a("#main .editor-main-inner")[0],{lineNumbers:!0,styleActiveLine:!0,matchBrackets:!0,lineWrapping:!0,readOnly:"nocursor"}),b=b||new e({$form:a("form").first(),$helpers:a("#editor-helpers"),$submit:a("#editor-actions .btn-success"),parser:q,layoutBuilderConfiguration:p,textEditor:o,preview:new h({$el:a("#preview .editor-main-inner")}),pluginManager:s}),b.addHelper(new k.Bold(o),"1"),b.addHelper(new k.Italic(o),"1"),b.addHelper(new k.Strike(o),"1"),b.addHelper(new k.List(o),"1"),b.addHelper(new k.Link(o),"2"),b.addHelper(new k.Injection(o),"2"),b.addHelper(new k.Image(o),"2"),b.addHelper(new k.Formula(o),"2"),b.addHelper(new k.Spoiler(o),"2"),b.addHelper(new k.HidePlugins(o),"3"),b.addHelper(new k.Fullscreen),b.initialize(),a(".helper").tooltip({container:"body"}),window.editor=b,c.addEventListener("generic error",function(){n.error()}),a(window).bind("beforeunload",function(){return d("Are you sure you want to leave this page? All of your unsaved changes will be lost!")})}d.config({language:a("html").attr("lang")||"de"}),a.fn.quickdiff("filter","mathSpanInline",function(b){return"SPAN"===b.nodeName&&a(b).hasClass("mathInline")},function(b,c){var d=a.trim(a("script",b).text()),e=a.trim(a(c).text());return"%%"+d+"%%"!==e}),a.fn.quickdiff("filter","mathSpan",function(b){return"SPAN"===b.nodeName&&a(b).hasClass("math")},function(b,c){var d=a.trim(a("script",b).text()),e=a.trim(a(c).text());return"$$"+d+"$$"!==e}),a.fn.quickdiff("attributes",{td:["align"],th:["align"],img:["src","alt","title"],a:["href","title"]}),b(a("body"))})})}();